import{u as N,B as z,j as F,l as I,S as H,a as A,b as P,c as Y,d as j,e as K,f as J,g as Q,h as W,p as X,r as Z,i as $,k as ee}from"./user-f5d7b971.js";import{B as te,M as oe}from"./index-6554cf10.js";import{T as le}from"./index-a507c2b6.js";import{B as se}from"./index-53e4b8ce.js";import{C as re,T as ae}from"./index-5d6b5539.js";import{I as ne}from"./index-1a133b7f.js";import{_ as G,q as ie,r as ue,p as ce,a as m,b as l,c as r,f as i,I as de,K as me,$ as pe,n as y,g as u,C as f,d as c,w as v,T as R,t as h,i as _e,F as C,E as w,h as g}from"./index-a7d1dc36.js";import{u as T}from"./incident-b2a094f0.js";import"./index-f1216fd0.js";import"./mapbox-gl-748c9941.js";import"./index-d7d7792e.js";import"./vue-cleave.min-776623f5.js";const he=ie({name:"Checkbox",inheritAttrs:!1,components:{Icon:ne},props:{label:{type:String},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:"checkbox"},activeClass:{type:String,default:"bg-slate-900 dark:bg-slate-900 "},value:{type:null},modelValue:{type:null},badge:{type:Boolean,default:!1},icon:{type:Boolean,default:!1},prevIcon:{type:String,default:"heroicons-outline:volume-up"},nextIcon:{type:String,default:"heroicons-outline:volume-off"}},emits:{"update:modelValue":e=>({modelValue:e})},setup(e,o){const d=ue(e.active),p=()=>{d.value=!d.value};return{localValue:ce({get:()=>e.modelValue,set:n=>o.emit("update:modelValue",n)}),ck:d,onChange:p}}}),ge=["disabled","name","value"],be={key:0},fe={key:0},ke={key:0,class:"text-slate-500 dark:text-slate-400 text-sm leading-6"};function ye(e,o,d,p,s,n){const k=m("Icon");return l(),r("div",null,[i("label",{class:y(["flex items-start",e.disabled?" cursor-not-allowed opacity-40":"cursor-pointer"])},[de(i("input",pe({type:"checkbox",class:"hidden",disabled:e.disabled,name:e.name,onChange:o[0]||(o[0]=(...b)=>e.onChange&&e.onChange(...b)),value:e.value,"onUpdate:modelValue":o[1]||(o[1]=b=>e.localValue=b)},e.$attrs),null,16,ge),[[me,e.localValue]]),i("div",{class:y([e.ck?e.activeClass:"bg-secondary-500","relative inline-flex h-6 w-[46px] ltr:mr-3 rtl:ml-3 items-center rounded-full transition-all duration-150"])},[e.badge&&e.ck?(l(),r("span",{key:0,class:y([e.icon?"text-sm":" text-[9px]","absolute left-1 top-1/2 -translate-y-1/2 capitalize font-bold text-white tracking-[1px]"])},[e.icon?u("",!0):(l(),r("span",be,"on")),e.icon?(l(),f(k,{key:1,icon:e.prevIcon},null,8,["icon"])):u("",!0)],2)):u("",!0),e.badge&&!e.ck?(l(),r("span",{key:1,class:y([e.icon?"text-sm":" text-[9px]","absolute right-1 top-1/2 -translate-y-1/2 capitalize font-bold text-slate-900 tracking-[1px]"])},[c(R,null,{default:v(()=>[e.icon?u("",!0):(l(),r("span",fe,"Off"))]),_:1}),c(R,null,{default:v(()=>[e.icon?(l(),f(k,{key:0,icon:e.nextIcon},null,8,["icon"])):u("",!0)]),_:1})],2)):u("",!0),i("span",{class:y([e.ck?"ltr:translate-x-6 rtl:-translate-x-6":"ltr:translate-x-[2px] rtl:-translate-x-[2px]","inline-block h-5 w-5 transform rounded-full bg-white transition-all duration-150"])},null,2)],2),e.label?(l(),r("span",ke,h(e.label),1)):u("",!0)],2)])}const ve=G(he,[["render",ye]]);const M=N(),Se={components:{Block:te,Textinput:le,Button:se,Select:re,Textarea:ae,Map:oe,Breadcrumb:z,Switch:ve},data(){return{saveBtn:"Save "+this.$route.params.module,contacts_field:F,incidents_field:I,form:{},loading:!1,user_store:M}},created(){this.form=this.ModuleStore.form,this.ModuleStore.loading=!1,this.$route.params.id!=""&&this.$route.params.id!=null?(this.ModuleStore.id=this.$route.params.id,this.ModuleStore.getItem()):this.clearField()},mounted(){(this.$route.params.id===void 0||this.$route.params.id=="")&&this.$route.params.module=="incidents"&&T().generate_id(this.$route.params.module),this.load_picklist()},methods:{ResourcesCategories(){const e=this.ModuleStore.resources_type_storage.filter(o=>o.resources_categories_id==this.ModuleStore.form.resources_categories_picklist);this.ModuleStore.resources_types_picklist=e},ChangeRole(){this.form.roles_picklist==2?this.form.user_privileges.users=0:this.form.user_privileges.users=1},split_name(e){return e.split(".")[1]},clearField(){this.fields_computed.map(e=>{e.fields.map(o=>{this.ModuleStore.id="";const d=o.name.split(".");if(d.length==1)if(o.type=="date"){var p=new Date,s=String(p.getDate()).padStart(2,"0"),n=String(p.getMonth()+1).padStart(2,"0"),k=p.getFullYear();p=k+"-"+n+"-"+s;var b=o.default=="current_date"?p:o.default;this.form[o.name]=b}else this.form[o.name]=o.default;else this.form[d[0]][d[1]]=o.default})})},saveForm(){this.ModuleStore.form=this.form;var e="";if(this.RequiredField.map(o=>{this.ModuleStore.form[o.name]==""&&(e+=`<span class="text-red-500"><b>${o.label}</b> is required field</span><br>`)}),e!="")return H.fire({icon:"error",title:"Something wrong",html:e}),!1;console.log(this.ModuleStore.form),this.ModuleStore.save()},updateCoordinates(e){const{lng:o,lat:d}=e;this.ModuleStore.form.coordinates=o+","+d},load_picklist(){const e=this.$route.params.module;e=="incidents"?(this.ModuleStore.incident_statuses_picklist.length==0&&this.ModuleStore.get_incident_status(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type(),this.ModuleStore.incident_priorities_picklist.length==0&&this.ModuleStore.get_incident_priority()):e=="resources"?(this.ModuleStore.resources_types_picklist.length==0&&this.ModuleStore.get_resources_type(),this.ModuleStore.resources_statuses_picklist.length==0&&this.ModuleStore.get_resources_status(),this.ModuleStore.conditions_picklist.length==0&&this.ModuleStore.get_resources_condition(),this.ModuleStore.resources_categories_picklist.length==0&&this.ModuleStore.get_resources_category()):e=="contacts"?(this.ModuleStore.caller_types_picklist.length==0&&this.ModuleStore.get_caller_types(),this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="agencies"?(this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="responders"?this.ModuleStore.responder_types_picklist.length==0&&this.ModuleStore.get_responder_type():e=="preplans"?(this.ModuleStore.pre_plan_classifications_picklist.length==0&&this.ModuleStore.get_preplan_classification(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type()):e=="users"&&this.ModuleStore.roles_picklist.length==0&&this.ModuleStore.get_role(),M.assigned_to.length==0&&M.get_assigned_to()}},computed:{fields_computed(){let e;switch(this.$route.params.module){case"incidents":e=I;break;case"resources":e=ee;break;case"contacts":e=F;break;case"agencies":e=$;break;case"responders":e=Z;break;case"preplans":e=X;break;case"call_logs":e=W;break;case"users":e=Q;break}return e},RequiredField(){const e=[];return this.fields_computed.map(o=>{o.fields.map(d=>{d.required&&e.push(d)})}),e},ModuleStore(){const e=this.$route.params.module;let o;switch(e){case"incidents":o=T();break;case"resources":o=J();break;case"contacts":o=K();break;case"agencies":o=j();break;case"responders":o=Y();break;case"preplans":o=P();break;case"call_logs":o=A();break;case"users":o=M;break}return o}}},Ve={class:"lg:grid lg:grid-cols-2 gap-12"},Me={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},xe={key:0},Ue={class:"fromGroup relative"},Ce={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},we={key:0,class:"text-red-500"},Be={key:1},qe={class:"fromGroup relative"},Fe={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ie={key:0,class:"text-red-500"},Re={key:2},Te={key:0,class:"fromGroup relative"},Ge={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},De={key:0,class:"text-red-500"},Ee={key:1,class:"fromGroup relative"},Le={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Oe={key:0,class:"text-red-500"},Ne={key:2,class:"fromGroup relative"},ze={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},He={key:0,class:"text-red-500"},Ae={key:3,class:"fromGroup relative"},Pe={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ye={key:0,class:"text-red-500"},je={key:3},Ke={class:"fromGroup relative"},Je={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Qe={key:0,class:"text-red-500"},We={key:4},Xe={key:0},Ze={key:1},$e={key:5},et={class:"fromGroup relative"},tt={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ot={key:0,class:"text-red-500"};function lt(e,o,d,p,s,n){const k=m("Breadcrumb"),b=m("Loading"),B=m("Textinput"),D=m("Map"),x=m("Block"),q=m("flat-pickr"),S=m("Select"),E=m("Textarea"),U=m("Switch"),L=m("Button");return l(),r("div",null,[c(k,{mode:"edit"}),c(b,{active:n.ModuleStore.loading,"onUpdate:active":o[0]||(o[0]=_=>n.ModuleStore.loading=_)},null,8,["active"]),n.ModuleStore.loading?u("",!0):(l(),r("form",{key:0,onSubmit:o[1]||(o[1]=_e((..._)=>n.saveForm&&n.saveForm(..._),["prevent"]))},[(l(!0),r(C,null,w(n.fields_computed,(_,O)=>(l(),r("div",{key:O},[_.block_name=="Location Details"?(l(),f(x,{key:0,title:_.block_name},{default:v(()=>[i("div",Ve,[i("div",null,[(l(!0),r(C,null,w(_.fields,(t,V)=>(l(),f(B,{isReadonly:t.readonly,class:"mt-4",key:V,modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a,label:t.label,placeholder:`Enter ${t.label}`},null,8,["isReadonly","modelValue","onUpdate:modelValue","label","placeholder"]))),128))]),i("div",null,[c(D,{set_coordinates:s.form.coordinates,onUpdateCoordinate:n.updateCoordinates},null,8,["set_coordinates","onUpdateCoordinate"])])])]),_:2},1032,["title"])):(l(),f(x,{key:1,title:_.block_name},{default:v(()=>[i("div",Me,[(l(!0),r(C,null,w(_.fields,(t,V)=>(l(),r("div",{key:V,class:y([`custom-grid-${V%2}`,"mt-4"])},[t.type=="time"?(l(),r("div",xe,[i("div",Ue,[i("label",Ce,[g(h(t.label)+" ",1),t.required?(l(),r("span",we,"*")):u("",!0)]),c(q,{modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a,class:"form-control",placeholder:"HH:mm",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1}},null,8,["modelValue","onUpdate:modelValue"])])])):t.type=="date"?(l(),r("div",Be,[i("div",qe,[i("label",Fe,[g(h(t.label)+" ",1),t.required?(l(),r("span",Ie,"*")):u("",!0)]),c(q,{modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"}},null,8,["modelValue","onUpdate:modelValue"])])])):t.type=="picklist"?(l(),r("div",Re,[t.name=="assigned_to_picklist"?(l(),r("div",Te,[i("label",Ge,[g(h(t.label)+" ",1),t.required?(l(),r("span",De,"*")):u("",!0)]),c(S,{placeholder:"Select an option",reduce:a=>a.id,options:s.user_store[t.name],modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a},null,8,["reduce","options","modelValue","onUpdate:modelValue"])])):u("",!0),t.name=="roles_picklist"?(l(),r("div",Ee,[i("label",Le,[g(h(t.label)+" ",1),t.required?(l(),r("span",Oe,"*")):u("",!0)]),c(S,{"onOption:selected":n.ChangeRole,placeholder:"Select an option",reduce:a=>a.id,options:s.user_store[t.name],modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a},null,8,["onOption:selected","reduce","options","modelValue","onUpdate:modelValue"])])):u("",!0),t.name=="resources_categories_picklist"?(l(),r("div",Ne,[i("label",ze,[g(h(t.label)+" ",1),t.required?(l(),r("span",He,"*")):u("",!0)]),c(S,{"onOption:selected":n.ResourcesCategories,placeholder:"Select an option",reduce:a=>a.id,options:n.ModuleStore[t.name],modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a},null,8,["onOption:selected","reduce","options","modelValue","onUpdate:modelValue"])])):(l(),r("div",Ae,[i("label",Pe,[g(h(t.label)+" ",1),t.required?(l(),r("span",Ye,"*")):u("",!0)]),c(S,{placeholder:"Select an option",reduce:a=>a.id,options:n.ModuleStore[t.name],modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a},null,8,["reduce","options","modelValue","onUpdate:modelValue"])]))])):t.type=="textarea"?(l(),r("div",je,[i("div",Ke,[i("label",Je,[g(h(t.label)+" ",1),t.required?(l(),r("span",Qe,"*")):u("",!0)]),c(E,{placeholder:`Enter ${t.label}`,modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a},null,8,["placeholder","modelValue","onUpdate:modelValue"])])])):t.type=="checkbox"?(l(),r("div",We,[this.$route.params.module=="users"?(l(),r("div",Xe,[s.form.user_privileges[n.split_name(t.name)]==1?(l(),f(U,{key:0,label:t.label,modelValue:s.form.user_privileges[n.split_name(t.name)],"onUpdate:modelValue":a=>s.form.user_privileges[n.split_name(t.name)]=a,active:!0,class:"mb-5"},null,8,["label","modelValue","onUpdate:modelValue"])):u("",!0),s.form.user_privileges[n.split_name(t.name)]==0?(l(),f(U,{key:1,label:t.label,modelValue:s.form.user_privileges[n.split_name(t.name)],"onUpdate:modelValue":a=>s.form.user_privileges[n.split_name(t.name)]=a,active:!1,class:"mb-5"},null,8,["label","modelValue","onUpdate:modelValue"])):u("",!0)])):(l(),r("div",Ze,[c(U,{label:t.label,modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a,active:s.form[t.name],class:"mb-5"},null,8,["label","modelValue","onUpdate:modelValue","active"])]))])):(l(),r("div",$e,[i("div",et,[i("label",tt,[g(h(t.label)+" ",1),t.required?(l(),r("span",ot,"*")):u("",!0)]),c(B,{isReadonly:t.readonly,type:t.type,name:s.form[t.name],modelValue:s.form[t.name],"onUpdate:modelValue":a=>s.form[t.name]=a,placeholder:`Enter ${t.label}`},null,8,["isReadonly","type","name","modelValue","onUpdate:modelValue","placeholder"])])]))],2))),128))])]),_:2},1032,["title"]))]))),128)),c(x,null,{default:v(()=>[c(L,{class:"w-full bg-emerald-500/100 hover:bg-emerald-600/100",text:s.saveBtn},null,8,["text"])]),_:1})],32))])}const gt=G(Se,[["render",lt]]);export{gt as default};

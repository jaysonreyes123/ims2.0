import{M as V,a as F,b as G,c as N,d as z}from"./mapbox-gl-geocoder-e8f69630.js";import{C as L}from"./index-bfef6123.js";import{r as y,_ as w,a as u,b as n,c as a,f as e,d as _,w as d,F as m,E as x,C as M,h as l,t as p,g as c}from"./index-8591da51.js";import"./index-42d9ee31.js";const v=y(),$=y([]),j=y([]),D={components:{MapboxMap:V,MapboxMarker:F,MapboxGeocoder:G,MapboxImages:N,MapboxLayer:z,Card:L},data(){return{coordinates:[0,0],incident_map_:$,resources_map_:j,map:v}},mounted(){this.incident_map(),this.resources_map()},methods:{async incident_map(){try{const o=await this.$axios.get("map/incidents");this.incident_map_=o.data}catch(o){console.log(o)}},async resources_map(){try{const o=await this.$axios.get("map/resources");this.resources_map_=o.data}catch(o){console.log(o)}},flyto(o){v.value.flyTo({center:o})}}},E={class:"shadow-lg"},S={class:"lg:grid grid-cols-5 rounded-md"},T={class:"col-span-4"},Y={style:{width:"300px"}},J={class:"text-xs mt-1"},R={style:{width:"300px"}},X={class:"text-xs mt-1"},Z={class:"bg-white p-5 h-screen overflow-x-auto"},H={class:"list-item mt-1"},O=["onClick"],P={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},Q={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"},U={key:0},W={class:"list-item mt-1"},q=["onClick"],A={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},K={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"};function ee(o,s,h,C,r,b){const f=u("MapboxGeocoder"),g=u("router-link"),k=u("MapboxMarker"),I=u("MapboxMap");return n(),a("div",E,[e("div",S,[e("div",T,[_(I,{class:"h-screen",onMbCreated:s[0]||(s[0]=t=>r.map=t),"access-token":"pk.eyJ1IjoiamF5c29ucmV5ZXMyNiIsImEiOiJjbGd1aDViYXUwZzM2M3BsamlpdWtjbzBsIn0.DmYf96Yhwg7vip5Qpzghnw","map-style":"mapbox://styles/mapbox/streets-v11",center:[122.4902841093123,12.573067659271082],zoom:5},{default:d(()=>[_(f,{countries:"PH"}),r.incident_map_!==void 0?(n(!0),a(m,{key:0},x(r.incident_map_.features,(t,i)=>(n(),M(k,{key:i,"lng-lat":t.geometry.coordinates},{popup:d(()=>[e("div",Y,[s[3]||(s[3]=e("p",{class:"text-base"},[e("b",null,"Incident")],-1)),e("div",J,[_(g,{class:"text-blue-600",to:`/app/module/incidents/detail/${t.properties.id}`},{default:d(()=>[l(p(t.properties.incident_no),1)]),_:2},1032,["to"]),e("p",null,[s[1]||(s[1]=e("b",null,"Status: ",-1)),l(p(t.properties.status),1)]),e("p",null,[s[2]||(s[2]=e("b",null,"Location: ",-1)),l(p(t.properties.location),1)])])])]),default:d(()=>[s[4]||(s[4]=e("p",{class:"custom-marker"},[e("span",{class:"pulsing-dot-red"})],-1))]),_:2},1032,["lng-lat"]))),128)):c("",!0),r.resources_map_!==void 0?(n(!0),a(m,{key:1},x(r.resources_map_.features,(t,i)=>(n(),M(k,{key:i,"lng-lat":t.geometry.coordinates},{popup:d(()=>[e("div",R,[s[7]||(s[7]=e("p",{class:"text-base"},[e("b",null,"Resources")],-1)),e("div",X,[_(g,{class:"text-blue-600",to:`/app/module/resources/detail/${t.properties.id}`},{default:d(()=>[l(p(t.properties.name),1)]),_:2},1032,["to"]),e("p",null,[s[5]||(s[5]=e("b",null,"Type: ",-1)),l(p(t.properties.type),1)]),e("p",null,[s[6]||(s[6]=e("b",null,"Status: ",-1)),l(p(t.properties.status),1)])])])]),default:d(()=>[s[8]||(s[8]=e("p",{class:"custom-marker"},[e("span",{class:"pulsing-dot-black"})],-1))]),_:2},1032,["lng-lat"]))),128)):c("",!0)]),_:1})]),e("div",Z,[e("div",null,[s[10]||(s[10]=e("p",{class:"text-sm font-bold"},"Current incidents",-1)),e("ul",H,[r.incident_map_!==void 0?(n(!0),a(m,{key:0},x(r.incident_map_.features,(t,i)=>(n(),a("li",{onClick:B=>b.flyto(t.geometry.coordinates),key:i,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[e("div",P,[e("div",Q,[s[9]||(s[9]=e("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#FF0000] mr-2"},null,-1)),l(" "+p(t.properties.incident_no),1)])])],8,O))),128)):c("",!0)])]),s[13]||(s[13]=e("br",null,null,-1)),r.resources_map_!=""?(n(),a("div",U,[s[12]||(s[12]=e("p",{class:"text-sm font-bold"},"Current Resources",-1)),e("ul",W,[r.resources_map_!==void 0?(n(!0),a(m,{key:0},x(r.resources_map_.features,(t,i)=>(n(),a("li",{onClick:B=>b.flyto(t.geometry.coordinates),key:i,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[e("div",A,[e("div",K,[s[11]||(s[11]=e("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#000000] mr-2"},null,-1)),l(" "+p(t.properties.name),1)])])],8,q))),128)):c("",!0)])])):c("",!0)])])])}const se=w(D,[["render",ee],["__scopeId","data-v-99ade924"]]),te={components:{Map:se}};function oe(o,s,h,C,r,b){const f=u("Map");return n(),a("div",null,[_(f)])}const pe=w(te,[["render",oe]]);export{pe as default};

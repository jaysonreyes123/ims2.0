import{I as ve}from"./index-dd1ce917.js";import{C as Wt,T as ot}from"./index-b019bb3a.js";import{e as S,p as j,o as bt,v as yt,H as Te,y as he,W as kt,r as T,X as st,A as Ie,m as Yt,Y as $t,B as Zt,Z as Kt,_ as z,a as k,b as i,c as f,n as C,t as M,g as v,f as s,h as Re,C as G,D as ge,d as y,F as Q,E as ce,q as xt,I as ze,$ as Jt,i as oe,a0 as Xt,w as A,S as it,U as St,K as Qt,a1 as el,a2 as tl}from"./index-1d3dd1f9.js";import{S as Le,u as ll,a as nl,b as al,c as rl,d as ol,e as sl,f as il,g as dl,h as ul,p as wt,r as Ct,i as Vt,j as tt,k as lt,l as nt,B as cl}from"./user-dd06187b.js";import{B as De}from"./index-b562c514.js";import{C as Ee}from"./index-59a3d1fa.js";import{f as fl,o as ml,N as pl,_ as hl}from"./transition-10f9343d.js";import{C as Ft,T as gl}from"./index-b262ec37.js";import{u as vl}from"./incident-9ee9fcc1.js";import{c as Oe,a as K,b as _l,_ as bl}from"./object-00bb900c.js";import"./micro-task-890db824.js";/**
  * vee-validate v4.5.11
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function xe(e){return typeof e=="function"}function Mt(e){return e==null}const Se=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function It(e){return Number(e)>=0}const yl={};function kl(e){return yl[e]}const Pe=Symbol("vee-validate-form"),xl=Symbol("vee-validate-field-instance");function at(e){return xe(e)&&!!e.__locatorRef}function Ae(e){return!!e&&xe(e.validate)}function At(e){return e==="checkbox"||e==="radio"}function Sl(e){return Se(e)||Array.isArray(e)}function wl(e){return Array.isArray(e)?e.length===0:Se(e)&&Object.keys(e).length===0}function qe(e){return/^\[.+\]$/i.test(e)}function Cl(e){return Et(e)&&e.multiple}function Et(e){return e.tagName==="SELECT"}function Vl(e){return Pt(e)&&e.target&&"submit"in e.target}function Pt(e){return e?!!(typeof Event<"u"&&xe(Event)&&e instanceof Event||e&&e.srcElement):!1}function dt(e){return qe(e)?e.replace(/\[|\]/gi,""):e}function X(e,l,t){return e?qe(l)?e[dt(l)]:(l||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,r)=>Sl(a)&&r in a?a[r]:t,e):t}function ke(e,l,t){if(qe(l)){e[dt(l)]=t;return}const n=l.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let r=0;r<n.length;r++){if(r===n.length-1){a[n[r]]=t;return}(!(n[r]in a)||Mt(a[n[r]]))&&(a[n[r]]=It(n[r+1])?[]:{}),a=a[n[r]]}}function Ze(e,l){if(Array.isArray(e)&&It(l)){e.splice(Number(l),1);return}Se(e)&&delete e[l]}function Ke(e,l){if(qe(l)){delete e[dt(l)];return}const t=l.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let r=0;r<t.length;r++){if(r===t.length-1){Ze(n,t[r]);break}if(!(t[r]in n)||Mt(n[t[r]]))break;n=n[t[r]]}const a=t.map((r,o)=>X(e,t.slice(0,o).join(".")));for(let r=a.length-1;r>=0;r--)if(wl(a[r])){if(r===0){Ze(e,t[0]);continue}Ze(a[r-1],t[r-1])}}function U(e){return Object.keys(e)}function Ge(e,l=void 0){const t=$t();return(t==null?void 0:t.provides[e])||Zt(e,l)}function rt(e,l,t){if(Array.isArray(e)){const n=[...e],a=n.indexOf(l);return a>=0?n.splice(a,1):n.push(l),n}return e===l?t:l}function Fl(e,l=0){let t=null,n=[];return function(...a){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const r=e(...a);n.forEach(o=>o(r)),n=[]},l),new Promise(r=>n.push(r))}}function Je(e){if(Bt(e))return e._value}function Bt(e){return"_value"in e}function Ot(e){if(!Pt(e))return e;const l=e.target;if(At(l.type)&&Bt(l))return Je(l);if(l.type==="file"&&l.files)return Array.from(l.files);if(Cl(l))return Array.from(l.options).filter(t=>t.selected&&!t.disabled).map(Je);if(Et(l)){const t=Array.from(l.options).find(n=>n.selected);return t?Je(t):l.value}return l.value}function Nt(e){const l={};return Object.defineProperty(l,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Se(e)&&e._$$isNormalized?e:Se(e)?Object.keys(e).reduce((t,n)=>{const a=Ml(e[n]);return e[n]!==!1&&(t[n]=ct(a)),t},l):typeof e!="string"?l:e.split("|").reduce((t,n)=>{const a=Il(n);return a.name&&(t[a.name]=ct(a.params)),t},l):l}function Ml(e){return e===!0?[]:Array.isArray(e)||Se(e)?e:[e]}function ct(e){const l=t=>typeof t=="string"&&t[0]==="@"?Al(t.slice(1)):t;return Array.isArray(e)?e.map(l):e instanceof RegExp?[e]:Object.keys(e).reduce((t,n)=>(t[n]=l(e[n]),t),{})}const Il=e=>{let l=[];const t=e.split(":")[0];return e.includes(":")&&(l=e.split(":").slice(1).join(":").split(",")),{name:t,params:l}};function Al(e){const l=t=>X(t,e)||t[e];return l.__locatorRef=e,l}function El(e){return Array.isArray(e)?e.filter(at):U(e).filter(l=>at(e[l])).map(l=>e[l])}const Pl={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Bl=Object.assign({},Pl);const Ol=()=>Bl;async function jt(e,l,t={}){const n=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:l,bails:n??!0,formData:(t==null?void 0:t.values)||{}},o=(await Nl(a,e)).errors;return{errors:o,valid:!o.length}}async function Nl(e,l){if(Ae(e.rules))return jl(l,e.rules,{bails:e.bails});if(xe(e.rules)||Array.isArray(e.rules)){const o={field:e.name,form:e.formData,value:l},u=Array.isArray(e.rules)?e.rules:[e.rules],c=u.length,g=[];for(let b=0;b<c;b++){const m=u[b],p=await m(l,o);if(typeof p!="string"&&p)continue;const F=typeof p=="string"?p:Tt(o);if(g.push(F),e.bails)return{errors:g}}return{errors:g}}const t=Object.assign(Object.assign({},e),{rules:Nt(e.rules)}),n=[],a=Object.keys(t.rules),r=a.length;for(let o=0;o<r;o++){const u=a[o],c=await Tl(t,l,{name:u,params:t.rules[u]});if(c.error&&(n.push(c.error),e.bails))return{errors:n}}return{errors:n}}async function jl(e,l,t){var n;return{errors:await l.validate(e,{abortEarly:(n=t.bails)!==null&&n!==void 0?n:!0}).then(()=>[]).catch(r=>{if(r.name==="ValidationError")return r.errors;throw r})}}async function Tl(e,l,t){const n=kl(t.name);if(!n)throw new Error(`No such validator '${t.name}' exists.`);const a=Rl(t.params,e.formData),r={field:e.name,value:l,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},o=await n(l,a,r);return typeof o=="string"?{error:o}:{error:o?void 0:Tt(r)}}function Tt(e){const l=Ol().generateMessage;return l?l(e):"Field is invalid"}function Rl(e,l){const t=n=>at(n)?n(l):n;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((n,a)=>(n[a]=t(e[a]),n),{})}async function Ll(e,l){const t=await e.validate(l,{abortEarly:!1}).then(()=>[]).catch(r=>{if(r.name!=="ValidationError")throw r;return r.inner||[]}),n={},a={};for(const r of t){const o=r.errors;n[r.path]={valid:!o.length,errors:o},o.length&&(a[r.path]=o[0])}return{valid:!t.length,results:n,errors:a}}async function Ul(e,l,t){const a=U(e).map(async g=>{var b,m,p;const I=await jt(X(l,g),e[g],{name:((b=t==null?void 0:t.names)===null||b===void 0?void 0:b[g])||g,values:l,bails:(p=(m=t==null?void 0:t.bailsMap)===null||m===void 0?void 0:m[g])!==null&&p!==void 0?p:!0});return Object.assign(Object.assign({},I),{path:g})});let r=!0;const o=await Promise.all(a),u={},c={};for(const g of o)u[g.path]={valid:g.valid,errors:g.errors},g.valid||(r=!1,c[g.path]=g.errors[0]);return{valid:r,results:u,errors:c}}function ft(e,l,t){typeof t.value=="object"&&(t.value=B(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||l==="__proto__"?Object.defineProperty(e,l,t):e[l]=t.value}function B(e){if(typeof e!="object")return e;var l=0,t,n,a,r=Object.prototype.toString.call(e);if(r==="[object Object]"?a=Object.create(e.__proto__||null):r==="[object Array]"?a=Array(e.length):r==="[object Set]"?(a=new Set,e.forEach(function(o){a.add(B(o))})):r==="[object Map]"?(a=new Map,e.forEach(function(o,u){a.set(B(u),B(o))})):r==="[object Date]"?a=new Date(+e):r==="[object RegExp]"?a=new RegExp(e.source,e.flags):r==="[object DataView]"?a=new e.constructor(B(e.buffer)):r==="[object ArrayBuffer]"?a=e.slice(0):r.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)ft(a,n[l],Object.getOwnPropertyDescriptor(e,n[l]));for(l=0,n=Object.getOwnPropertyNames(e);l<n.length;l++)Object.hasOwnProperty.call(a,t=n[l])&&a[t]===e[t]||ft(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}var Ue=function e(l,t){if(l===t)return!0;if(l&&t&&typeof l=="object"&&typeof t=="object"){if(l.constructor!==t.constructor)return!1;var n,a,r;if(Array.isArray(l)){if(n=l.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!e(l[a],t[a]))return!1;return!0}if(l instanceof Map&&t instanceof Map){if(l.size!==t.size)return!1;for(a of l.entries())if(!t.has(a[0]))return!1;for(a of l.entries())if(!e(a[1],t.get(a[0])))return!1;return!0}if(l instanceof Set&&t instanceof Set){if(l.size!==t.size)return!1;for(a of l.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(l)&&ArrayBuffer.isView(t)){if(n=l.length,n!=t.length)return!1;for(a=n;a--!==0;)if(l[a]!==t[a])return!1;return!0}if(l.constructor===RegExp)return l.source===t.source&&l.flags===t.flags;if(l.valueOf!==Object.prototype.valueOf)return l.valueOf()===t.valueOf();if(l.toString!==Object.prototype.toString)return l.toString()===t.toString();if(r=Object.keys(l),n=r.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[a]))return!1;for(a=n;a--!==0;){var o=r[a];if(!e(l[o],t[o]))return!1}return!0}return l!==l&&t!==t};let mt=0;function zl(e,l){const{value:t,initialValue:n,setInitialValue:a}=Dl(e,l.modelValue,!l.standalone),{errorMessage:r,errors:o,setErrors:u}=Gl(e,!l.standalone),c=ql(t,n,o),g=mt>=Number.MAX_SAFE_INTEGER?0:++mt;function b(m){var p;"value"in m&&(t.value=m.value),"errors"in m&&u(m.errors),"touched"in m&&(c.touched=(p=m.touched)!==null&&p!==void 0?p:c.touched),"initialValue"in m&&a(m.initialValue)}return{id:g,path:e,value:t,initialValue:n,meta:c,errors:o,errorMessage:r,setState:b}}function Dl(e,l,t){const n=t?Ge(Pe,void 0):void 0,a=T(S(l));function r(){return n?X(n.meta.value.initialValues,S(e),S(a)):S(a)}function o(b){if(!n){a.value=b;return}n.setFieldInitialValue(S(e),b)}const u=j(r);if(!n)return{value:T(r()),initialValue:u,setInitialValue:o};const c=l?S(l):X(n.values,S(e),S(u));return n.stageInitialValue(S(e),c),{value:j({get(){return X(n.values,S(e))},set(b){n.setFieldValue(S(e),b)}}),initialValue:u,setInitialValue:o}}function ql(e,l,t){const n=st({touched:!1,pending:!1,valid:!0,validated:!!S(t).length,initialValue:j(()=>S(l)),dirty:j(()=>!Ue(S(e),S(l)))});return he(t,a=>{n.valid=!a.length},{immediate:!0,flush:"sync"}),n}function Gl(e,l){const t=l?Ge(Pe,void 0):void 0;function n(r){return r?Array.isArray(r)?r:[r]:[]}if(!t){const r=T([]);return{errors:r,errorMessage:j(()=>r.value[0]),setErrors:o=>{r.value=n(o)}}}const a=j(()=>t.errorBag.value[S(e)]||[]);return{errors:a,errorMessage:j(()=>a.value[0]),setErrors:r=>{t.setFieldErrorBag(S(e),n(r))}}}function J(e,l,t){return At(t==null?void 0:t.type)?Yl(e,l,t):Rt(e,l,t)}function Rt(e,l,t){const{initialValue:n,validateOnMount:a,bails:r,type:o,checkedValue:u,label:c,validateOnValueUpdate:g,uncheckedValue:b,standalone:m}=Hl(S(e),t),p=m?void 0:Ge(Pe);let I=!1;const{id:F,value:P,initialValue:se,meta:O,setState:ee,errors:_e,errorMessage:be}=zl(e,{modelValue:n,standalone:m}),te=()=>{O.touched=!0},D=j(()=>{let _=S(l);const E=S(p==null?void 0:p.schema);return E&&!Ae(E)&&(_=Wl(E,S(e))||_),Ae(_)||xe(_)||Array.isArray(_)?_:Nt(_)});async function le(_){var E,R;return p!=null&&p.validateSchema?(E=(await p.validateSchema(_)).results[S(e)])!==null&&E!==void 0?E:{valid:!0,errors:[]}:jt(P.value,D.value,{name:S(c)||S(e),values:(R=p==null?void 0:p.values)!==null&&R!==void 0?R:{},bails:r})}async function q(){O.pending=!0,O.validated=!0;const _=await le("validated-only");return I&&(_.valid=!0,_.errors=[]),ee({errors:_.errors}),O.pending=!1,_}async function W(){const _=await le("silent");return I&&(_.valid=!0),O.valid=_.valid,_}function $(_){return!(_!=null&&_.mode)||(_==null?void 0:_.mode)==="force"||(_==null?void 0:_.mode)==="validated-only"?q():W()}const ne=(_,E=!0)=>{const R=Ot(_);P.value=R,!g&&E&&q()};bt(()=>{if(a)return q();(!p||!p.validateSchema)&&W()});function ie(_){O.touched=_}let H;function ae(){H=he(P,g?q:W,{deep:!0})}ae();function Z(_){var E;H==null||H();const R=_&&"value"in _?_.value:se.value;ee({value:B(R),initialValue:B(R),touched:(E=_==null?void 0:_.touched)!==null&&E!==void 0?E:!1,errors:(_==null?void 0:_.errors)||[]}),O.pending=!1,O.validated=!1,W(),Ie(()=>{ae()})}function re(_){P.value=_}function we(_){ee({errors:Array.isArray(_)?_:[_]})}const de={id:F,name:e,label:c,value:P,meta:O,errors:_e,errorMessage:be,type:o,checkedValue:u,uncheckedValue:b,bails:r,resetField:Z,handleReset:()=>Z(),validate:$,handleChange:ne,handleBlur:te,setState:ee,setTouched:ie,setErrors:we,setValue:re};if(yt(xl,de),Te(l)&&typeof S(l)!="function"&&he(l,(_,E)=>{Ue(_,E)||(O.validated?q():W())},{deep:!0}),!p)return de;p.register(de),kt(()=>{I=!0,p.unregister(de)});const Ye=j(()=>{const _=D.value;return!_||xe(_)||Ae(_)||Array.isArray(_)?{}:Object.keys(_).reduce((E,R)=>{const Ce=El(_[R]).map(fe=>fe.__locatorRef).reduce((fe,Ve)=>{const Be=X(p.values,Ve)||p.values[Ve];return Be!==void 0&&(fe[Ve]=Be),fe},{});return Object.assign(E,Ce),E},{})});return he(Ye,(_,E)=>{if(!Object.keys(_).length)return;!Ue(_,E)&&(O.validated?q():W())}),de}function Hl(e,l){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1});if(!l)return t();const n="valueProp"in l?l.valueProp:l.checkedValue;return Object.assign(Object.assign(Object.assign({},t()),l||{}),{checkedValue:n})}function Wl(e,l){if(e)return e[l]}function Yl(e,l,t){const n=t!=null&&t.standalone?void 0:Ge(Pe),a=t==null?void 0:t.checkedValue,r=t==null?void 0:t.uncheckedValue;function o(u){const c=u.handleChange,g=j(()=>{const m=S(u.value),p=S(a);return Array.isArray(m)?m.includes(p):p===m});function b(m,p=!0){var I,F;if(g.value===((F=(I=m)===null||I===void 0?void 0:I.target)===null||F===void 0?void 0:F.checked))return;let P=Ot(m);n||(P=rt(S(u.value),S(a),S(r))),c(P,p)}return kt(()=>{g.value&&b(S(a),!1)}),Object.assign(Object.assign({},u),{checked:g,checkedValue:a,uncheckedValue:r,handleChange:b})}return o(Rt(e,l,t))}let $l=0;function Zl(e){const l=$l++;let t=!1;const n=T({}),a=T(!1),r=T(0),o={},u=st(B(S(e==null?void 0:e.initialValues)||{})),{errorBag:c,setErrorBag:g,setFieldErrorBag:b}=Xl(e==null?void 0:e.initialErrors),m=j(()=>U(c.value).reduce((d,h)=>{const V=c.value[h];return V&&V.length&&(d[h]=V[0]),d},{}));function p(d){const h=n.value[d];return Array.isArray(h)?h[0]:h}function I(d){return!!n.value[d]}const F=j(()=>U(n.value).reduce((d,h)=>{const V=p(h);return V&&(d[h]=S(V.label||V.name)||""),d},{})),P=j(()=>U(n.value).reduce((d,h)=>{var V;const w=p(h);return w&&(d[h]=(V=w.bails)!==null&&V!==void 0?V:!0),d},{})),se=Object.assign({},(e==null?void 0:e.initialErrors)||{}),{initialValues:O,originalInitialValues:ee,setInitialValues:_e}=Jl(n,u,e==null?void 0:e.initialValues),be=Kl(n,u,O,m),te=e==null?void 0:e.validationSchema,D={formId:l,fieldsByPath:n,values:u,errorBag:c,errors:m,schema:te,submitCount:r,meta:be,isSubmitting:a,fieldArraysLookup:o,validateSchema:S(te)?qt:void 0,validate:E,register:Ye,unregister:_,setFieldErrorBag:b,validateField:R,setFieldValue:ie,setValues:H,setErrors:ne,setFieldError:$,setFieldTouched:ae,setTouched:Z,resetForm:re,handleSubmit:Ce,stageInitialValue:Be,unsetInitialValue:Ve,setFieldInitialValue:fe};function le(d){return Array.isArray(d)}function q(d,h){return Array.isArray(d)?d.forEach(h):h(d)}function W(d){Object.values(n.value).forEach(h=>{h&&q(h,d)})}function $(d,h){b(d,h)}function ne(d){g(d)}function ie(d,h,{force:V}={force:!1}){var w;const x=n.value[d],L=B(h);if(!x){ke(u,d,L);return}if(le(x)&&((w=x[0])===null||w===void 0?void 0:w.type)==="checkbox"&&!Array.isArray(h)){const ue=B(rt(X(u,d)||[],h,void 0));ke(u,d,ue);return}let Y=h;!le(x)&&x.type==="checkbox"&&!V&&!t&&(Y=B(rt(X(u,d),h,S(x.uncheckedValue)))),ke(u,d,Y)}function H(d){U(u).forEach(h=>{delete u[h]}),U(d).forEach(h=>{ie(h,d[h])}),Object.values(o).forEach(h=>h&&h.reset())}function ae(d,h){const V=n.value[d];V&&q(V,w=>w.setTouched(h))}function Z(d){U(d).forEach(h=>{ae(h,!!d[h])})}function re(d){t=!0,d!=null&&d.values?(_e(d.values),H(d==null?void 0:d.values)):(_e(ee.value),H(ee.value)),W(h=>h.resetField()),d!=null&&d.touched&&Z(d.touched),ne((d==null?void 0:d.errors)||{}),r.value=(d==null?void 0:d.submitCount)||0,Ie(()=>{t=!1})}function we(d,h){const V=Kt(d),w=h;if(!n.value[w]){n.value[w]=V;return}const x=n.value[w];x&&!Array.isArray(x)&&(n.value[w]=[x]),n.value[w]=[...n.value[w],V]}function de(d,h){const V=h,w=n.value[V];if(w){if(!le(w)&&d.id===w.id){delete n.value[V];return}if(le(w)){const x=w.findIndex(L=>L.id===d.id);if(x===-1)return;if(w.splice(x,1),w.length===1){n.value[V]=w[0];return}w.length||delete n.value[V]}}}function Ye(d){const h=S(d.name);we(d,h),Te(d.name)&&he(d.name,async(w,x)=>{await Ie(),de(d,x),we(d,w),(m.value[x]||m.value[w])&&($(x,void 0),R(w)),await Ie(),I(x)||Ke(u,x)});const V=S(d.errorMessage);V&&(se==null?void 0:se[h])!==V&&R(h),delete se[h]}function _(d){const h=S(d.name);de(d,h),Ie(()=>{I(h)||($(h,void 0),Ke(u,h))})}async function E(d){if(W(x=>x.meta.validated=!0),D.validateSchema)return D.validateSchema((d==null?void 0:d.mode)||"force");const h=await Promise.all(Object.values(n.value).map(x=>{const L=Array.isArray(x)?x[0]:x;return L?L.validate(d).then(Y=>({key:S(L.name),valid:Y.valid,errors:Y.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),V={},w={};for(const x of h)V[x.key]={valid:x.valid,errors:x.errors},x.errors.length&&(w[x.key]=x.errors[0]);return{valid:h.every(x=>x.valid),results:V,errors:w}}async function R(d){const h=n.value[d];return h?Array.isArray(h)?h.map(V=>V.validate())[0]:h.validate():Promise.resolve({errors:[],valid:!0})}function Ce(d,h){return function(w){return w instanceof Event&&(w.preventDefault(),w.stopPropagation()),Z(U(n.value).reduce((x,L)=>(x[L]=!0,x),{})),a.value=!0,r.value++,E().then(x=>{if(x.valid&&typeof d=="function")return d(B(u),{evt:w,setErrors:ne,setFieldError:$,setTouched:Z,setFieldTouched:ae,setValues:H,setFieldValue:ie,resetForm:re});!x.valid&&typeof h=="function"&&h({values:B(u),evt:w,errors:x.errors,results:x.results})}).then(x=>(a.value=!1,x),x=>{throw a.value=!1,x})}}function fe(d,h){ke(O.value,d,B(h))}function Ve(d){Ke(O.value,d)}function Be(d,h){ke(u,d,h),fe(d,h)}async function zt(){const d=S(te);return d?Ae(d)?await Ll(d,u):await Ul(d,u,{names:F.value,bailsMap:P.value}):{valid:!0,results:{},errors:{}}}const Dt=Fl(zt,5);async function qt(d){const h=await Dt(),V=D.fieldsByPath.value||{},w=U(D.errorBag.value);return[...new Set([...U(h.results),...U(V),...w])].reduce((L,Y)=>{const ue=V[Y],$e=(h.results[Y]||{errors:[]}).errors,Fe={errors:$e,valid:!$e.length};if(L.results[Y]=Fe,Fe.valid||(L.errors[Y]=Fe.errors[0]),!ue)return $(Y,$e),L;if(q(ue,Me=>Me.meta.valid=Fe.valid),d==="silent")return L;const Ht=Array.isArray(ue)?ue.some(Me=>Me.meta.validated):ue.meta.validated;return d==="validated-only"&&!Ht||q(ue,Me=>Me.setState({errors:Fe.errors})),L},{valid:h.valid,results:{},errors:{}})}const Gt=Ce((d,{evt:h})=>{Vl(h)&&h.target.submit()});return bt(()=>{if(e!=null&&e.initialErrors&&ne(e.initialErrors),e!=null&&e.initialTouched&&Z(e.initialTouched),e!=null&&e.validateOnMount){E();return}D.validateSchema&&D.validateSchema("silent")}),Te(te)&&he(te,()=>{var d;(d=D.validateSchema)===null||d===void 0||d.call(D,"validated-only")}),yt(Pe,D),{errors:m,meta:be,values:u,isSubmitting:a,submitCount:r,validate:E,validateField:R,handleReset:()=>re(),resetForm:re,handleSubmit:Ce,submitForm:Gt,setFieldError:$,setErrors:ne,setFieldValue:ie,setValues:H,setFieldTouched:ae,setTouched:Z}}function Kl(e,l,t,n){const a={touched:"some",pending:"some",valid:"every"},r=j(()=>!Ue(l,S(t)));function o(){const c=Object.values(e.value).flat(1).filter(Boolean);return U(a).reduce((g,b)=>{const m=a[b];return g[b]=c[m](p=>p.meta[b]),g},{})}const u=st(o());return Yt(()=>{const c=o();u.touched=c.touched,u.valid=c.valid,u.pending=c.pending}),j(()=>Object.assign(Object.assign({initialValues:S(t)},u),{valid:u.valid&&!U(n.value).length,dirty:r.value}))}function Jl(e,l,t){const n=T(B(S(t))||{}),a=T(B(S(t))||{});function r(o,u=!1){n.value=B(o),a.value=B(o),u&&U(e.value).forEach(c=>{const g=e.value[c],b=Array.isArray(g)?g.some(p=>p.meta.touched):g==null?void 0:g.meta.touched;if(!g||b)return;const m=X(n.value,c);ke(l,c,B(m))})}return Te(t)&&he(t,o=>{r(o,!0)},{deep:!0}),{initialValues:n,originalInitialValues:a,setInitialValues:r}}function Xl(e){const l=T({});function t(r){return Array.isArray(r)?r:r?[r]:[]}function n(r,o){if(!o){delete l.value[r];return}l.value[r]=t(o)}function a(r){l.value=U(r).reduce((o,u)=>{const c=r[u];return c&&(o[u]=t(c)),o},{})}return e&&a(e),{errorBag:l,setErrorBag:a,setFieldErrorBag:n}}const Ql={components:{Icon:ve,Cleave:Wt},props:{prepend:{type:String},append:{type:String},placeholder:{type:String,default:"Search"},label:{type:String},classLabel:{type:String,default:" "},classInput:{type:String,default:"classinput"},type:{type:String,default:"text"},name:{type:String},modelValue:{type:String,default:""},error:{type:String},hasicon:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1},validate:{type:String},msgTooltip:{type:Boolean,default:!1},description:{type:String},prependIcon:{type:String},appendIcon:{type:String},merged:{type:Boolean,default:!1},isMask:{type:Boolean,default:!1},options:{type:Object,default:()=>({creditCard:!0,delimiter:"-"})}},data(){return{types:this.type}},methods:{toggleType(){this.types=this.types==="text"?"password":"text"}}},en=["for"],tn={key:0,class:"flex-none input-group-addon"},ln={key:0,class:"input-group-text inline-block h-full"},nn={key:1,class:"inline-block h-full prepend-slot"},an={class:"flex-1"},rn=["type","name","placeholder","value","error","id","readonly","disabled","validate"],on={key:2,class:"flex text-xl absolute ltr:right-[14px] rtl:left-[14px] top-1/2 -translate-y-1/2"},sn={key:0,class:"text-danger-500"},dn={key:1,class:"text-success-500"},un={key:1,class:"flex-none input-group-addon right"},cn={key:0,class:"input-group-text inline-block h-full"},fn={key:1,class:"inline-block h-full append-slot"},mn={key:3,class:"block text-slate-400 font-light leading-4 text-xs mt-2"};function pn(e,l,t,n,a,r){const o=k("Icon"),u=k("cleave");return i(),f("div",{class:C(`${t.horizontal?"flex":""}  ${t.merged?"merged":""}`)},[t.label?(i(),f("label",{key:0,class:C(`${t.classLabel} ${t.horizontal?"flex-0 mr-6 md:w-[100px] w-[60px] break-words":""}  ltr:inline-block rtl:block  input-label `),for:t.name},M(t.label),11,en)):v("",!0),s("div",{class:C(["flex items-stretch inputGroup",`
    
    ${t.append||t.appendIcon?"has-append":""}
    ${t.prepend||t.prependIcon?"has-prepend":""}

    ${t.error?"is-invalid":""}  ${t.validate?"is-valid":""}
    
    ${e.$slots.prepend?"has-prepend-slot":""}
    ${e.$slots.append?"has-append-slot":""}
    ${t.horizontal?"flex-1":""}
    `])},[t.prepend||t.prependIcon||e.$slots.prepend?(i(),f("span",tn,[t.prepend||t.prependIcon?(i(),f("span",ln,[Re(M(t.prepend)+" ",1),t.prependIcon?(i(),G(o,{key:0,icon:t.prependIcon},null,8,["icon"])):v("",!0)])):v("",!0),e.$slots.prepend?(i(),f("span",nn,[ge(e.$slots,"prepend")])):v("",!0)])):v("",!0),s("div",an,[s("div",{class:C(["relative fromGroup2",`${t.error?"has-error":""}  ${t.validate?"is-valid":""}`])},[t.isMask?v("",!0):(i(),f("input",{key:0,type:a.types,name:t.name,placeholder:t.placeholder,class:C(`${t.classInput} input-group-control block w-full focus:outline-none h-[40px] `),value:t.modelValue,onInput:l[0]||(l[0]=c=>e.$emit("update:modelValue",c.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate},null,42,rn)),t.isMask?(i(),G(u,{key:1,class:C(`${t.classInput} cleave input-group-control block w-full focus:outline-none h-[40px] `),name:t.name,placeholder:t.placeholder,value:t.modelValue,onInput:l[1]||(l[1]=c=>e.$emit("update:modelValue",c.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate,options:t.options,modelValue:"modelValue"},null,8,["class","name","placeholder","value","error","id","readonly","disabled","validate","options"])):v("",!0),t.error||t.validate?(i(),f("div",on,[t.error?(i(),f("span",sn,[y(o,{icon:"heroicons-outline:information-circle"})])):v("",!0),t.validate?(i(),f("span",dn,[y(o,{icon:"bi:check-lg"})])):v("",!0)])):v("",!0)],2)]),t.append||t.appendIcon||e.$slots.append?(i(),f("span",un,[t.append||t.appendIcon?(i(),f("span",cn,[Re(M(t.append)+" ",1),t.appendIcon?(i(),G(o,{key:0,icon:t.appendIcon},null,8,["icon"])):v("",!0)])):v("",!0),e.$slots.append?(i(),f("span",fn,[ge(e.$slots,"append")])):v("",!0)])):v("",!0)],2),t.error?(i(),f("span",{key:1,class:C(["mt-2",t.msgTooltip?" inline-block bg-danger-500 text-white text-[10px] px-2 py-1 rounded":" text-danger-500 block text-sm"])},M(t.error),3)):v("",!0),t.validate?(i(),f("span",{key:2,class:C(["mt-2",t.msgTooltip?" inline-block bg-success-500 text-white text-[10px] px-2 py-1 rounded":" text-success-500 block text-sm"])},M(t.validate),3)):v("",!0),t.description?(i(),f("span",mn,M(t.description),1)):v("",!0)],2)}const ut=z(Ql,[["render",pn]]);const hn={props:{placeholder:{type:String,default:"Select Option"},label:{type:String},classLabel:{type:String,default:" "},classInput:{type:String,default:"classinput"},name:{type:String},modelValue:{default:""},error:{type:String},isReadonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1},validate:{type:String},msgTooltip:{type:Boolean,default:!1},formatter:{type:Function,default:e=>e},description:{type:String},size:{type:String},multiple:{type:Boolean,default:!1},options:{type:Array,default:()=>[{value:"",label:"Select Option"},{value:"",label:"Select Option2"}]}}},gn=["for"],vn={class:"relative"},_n=["name","value","error","id","readonly","disabled","validate","formatter","size","multiple"],bn={value:"",disabled:"",selected:""},yn=["value"],kn={key:3,class:"block text-secondary-500 font-light leading-4 text-xs mt-2"};function xn(e,l,t,n,a,r){return i(),f("div",{class:C(["fromGroup relative",`${t.error?"has-error":""}  ${t.horizontal?"flex":""}  ${t.validate?"is-valid":""} `])},[t.label?(i(),f("label",{key:0,class:C(`${t.classLabel} inline-block input-label `),for:t.name},M(t.label),11,gn)):v("",!0),s("div",vn,[s("select",{name:t.name,class:C(`${t.classInput} input-control block w-full focus:outline-none min-h-[40px] `),value:t.modelValue,onInput:l[0]||(l[0]=o=>e.$emit("update:modelValue",o.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate,formatter:t.formatter,size:t.size,multiple:t.multiple},[s("option",bn,M(t.placeholder),1),!e.$slots.default&&t.options?(i(!0),f(Q,{key:0},ce(t.options,(o,u)=>(i(),f("option",{value:o.value,key:u},M(o.label),9,yn))),128)):v("",!0),e.$slots.default?ge(e.$slots,"default",{key:1},void 0,!0):v("",!0)],42,_n)]),t.error?(i(),f("span",{key:1,class:C(["mt-2",t.msgTooltip?" inline-block bg-danger-500 text-white text-[10px] px-2 py-1 rounded":" text-danger-500 block text-sm"])},M(t.error),3)):v("",!0),t.validate?(i(),f("span",{key:2,class:C(["mt-2",t.msgTooltip?" inline-block bg-success-500 text-white text-[10px] px-2 py-1 rounded":" text-success-500 block text-sm"])},M(t.validate),3)):v("",!0),t.description?(i(),f("span",kn,M(t.description),1)):v("",!0)],2)}const Lt=z(hn,[["render",xn],["__scopeId","data-v-da55253b"]]);const Sn=xt({name:"Pagination",components:{Icon:ve,Select:Lt},props:{options:{type:Array,default:()=>[{}]},enableText:{type:Boolean,default:!1},enableInput:{type:Boolean,default:!1},enableSelect:{type:Boolean,default:!1},enableSearch:{type:Boolean,default:!1},pageChanged:{type:Function},perPageChanged:{type:Function},current:{type:Number,default:1},total:{type:Number,default:0},perPage:{type:Number,default:10},pageRange:{type:Number,default:2},textBeforeInput:{type:String,default:"Go to page"},textAfterInput:{type:String,default:"Go"},paginationClass:{type:String,default:"default"},searchClasss:{type:String,default:"default"},wrapperClass:{type:String,default:"justify-between"}},data(){return{input:"",input2:null}},methods:{hasFirst:function(){return this.rangeStart!==1},hasLast:function(){return this.rangeEnd<this.totalPages},hasPrev:function(){return this.current>1},hasNext:function(){return this.current<this.totalPages},changePage:function(e){e>0&&e<=this.totalPages&&this.$emit("page-changed",e),this.pageChanged&&this.pageChanged({currentPage:e})},customPerPageChange(e){this.perPageChanged({currentPerPage:e})}},computed:{pages:function(){for(var e=[],l=this.rangeStart;l<=this.rangeEnd;l++)e.push(l);return e},rangeStart:function(){var e=this.current-this.pageRange;return e>0?e:1},rangeEnd:function(){var e=this.current+this.pageRange;return e<this.totalPages?e:this.totalPages},totalPages:function(){return Math.ceil(this.total/this.perPage)},nextPage:function(){return this.current+1},prevPage:function(){return this.current-1}}}),wn={key:0,class:"flex items-center space-x-2 rtl:space-x-reverse"},Cn={key:1,class:"flex items-center"},Vn={class:"text-sm text-slate-500 inline-block ltr:ml-2 rtl:mr-2"},Fn={class:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180"},Mn=["disabled"],In={key:1,class:"text-sm inline-block rtl:-rotate-180"},An={key:0,class:""},En={key:1,class:"text-slate-600 dark:text-slate-300"},Pn=["onClick"],Bn={class:""},On={key:2,class:"text-slate-600 dark:text-slate-300"},Nn={key:3,class:""},jn={class:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180"},Tn=["disabled"],Rn={key:1,class:"text-sm rtl:-rotate-180 inline-block"};function Ln(e,l,t,n,a,r){const o=k("Select"),u=k("Icon");return i(),f("div",{class:C(["md:flex md:space-y-0 space-y-5",e.wrapperClass])},[e.enableSearch?(i(),f("div",{key:0,class:C(["flex items-center space-x-4 rtl:space-x-reverse",e.searchClasss])},[e.enableSearch&&e.enableInput?(i(),f("div",wn,[ze(s("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>e.input=c),class:"form-control w-9 overflow-auto h-9",type:"text",placeholder:"0"},null,512),[[Jt,e.input,void 0,{number:!0}]]),s("div",{onClick:l[1]||(l[1]=oe(c=>e.changePage(e.input),["prevent"])),class:"flex-0 cursor-pointer text-sm h-9 w-9 bg-slate-900 text-white flex items-center justify-center rounded"}," Go ")])):v("",!0),e.enableSearch&&e.enableSelect?(i(),f("div",Cn,[y(o,{modelValue:e.input2,"onUpdate:modelValue":l[2]||(l[2]=c=>e.input2=c),modelModifiers:{number:!0},onChange:l[3]||(l[3]=c=>e.changePage(e.input2)),placeholder:"Go",classInput:" w-[60px] h-9 ",options:e.options},null,8,["modelValue","options"]),s("span",Vn," of "+M(e.perPage)+" entries",1)])):v("",!0)],2)):v("",!0),s("ul",{class:C(["pagination",e.paginationClass])},[s("li",Fn,[s("button",{onClick:l[4]||(l[4]=oe(c=>e.changePage(e.prevPage),["prevent"])),disabled:e.current===1,class:C(e.current===1?" opacity-50 cursor-not-allowed":"")},[e.enableText?v("",!0):(i(),G(u,{key:0,icon:"heroicons-outline:chevron-left"})),e.enableText?(i(),f("span",In,"Previous")):v("",!0)],10,Mn)]),e.hasFirst()?(i(),f("li",An,[s("button",{onClick:l[5]||(l[5]=oe(c=>e.changePage(1),["prevent"]))},l[8]||(l[8]=[s("div",null,[s("span",null," 1 ")],-1)]))])):v("",!0),e.hasFirst()?(i(),f("li",En,"...")):v("",!0),(i(!0),f(Q,null,ce(e.pages,(c,g)=>(i(),f("li",{class:"",key:g},[s("button",{onClick:oe(b=>e.changePage(c),["prevent"])},[s("div",{class:C([{active:e.current===c},""])},[s("span",Bn,M(c),1)],2)],8,Pn)]))),128)),e.hasLast()?(i(),f("li",On,"...")):v("",!0),e.hasLast()?(i(),f("li",Nn,[s("button",{onClick:l[6]||(l[6]=oe(c=>e.changePage(e.totalPages),["prevent"]))},[s("div",null,[s("span",null,M(e.totalPages),1)])])])):v("",!0),s("li",jn,[s("button",{onClick:l[7]||(l[7]=oe(c=>e.changePage(e.nextPage),["prevent"])),disabled:e.current===e.totalPages,class:C(e.current===e.totalPages?" opacity-50 cursor-not-allowed":"")},[e.enableText?v("",!0):(i(),G(u,{key:0,icon:"heroicons-outline:chevron-right"})),e.enableText?(i(),f("span",Rn,"Next")):v("",!0)],10,Tn)])],2)],2)}const Un=z(Sn,[["render",Ln],["__scopeId","data-v-fdaa0b10"]]);const zn={props:{title:{type:String,default:"Tooltip on top"},content:{type:String,default:"Tooltip on top!"},btnClass:{type:String,default:"btn-outline-dark"},placement:{type:String,default:"top"},arrow:{type:Boolean,default:!1},theme:{type:String,default:""},animation:{type:String,default:"scale"},trigger:{type:String,default:"mouseenter"},interactive:{type:Boolean,default:!1},delay:{type:Number,default:0},duration:{type:Number,default:200},allowHTML:{type:Boolean,default:!1},maxWidth:{type:String,default:""},distance:{type:String,default:"1rem"},offset:{type:Array,default:()=>[0,0]}}},Dn=["content"],qn={key:1,class:"inline-block"};function Gn(e,l,t,n,a,r){const o=k("tippy"),u=Xt("tippy");return i(),f(Q,null,[e.$slots.default?v("",!0):ze((i(),f("button",{key:0,content:t.content,class:C(["btn",t.btnClass])},[Re(M(t.title),1)],10,Dn)),[[u,{placement:t.placement,arrow:t.arrow,theme:t.theme,animation:t.animation,trigger:t.trigger,interactive:t.interactive,delay:t.delay,duration:t.duration,allowHTML:t.allowHTML,distance:t.distance,offset:t.offset,maxWidth:t.maxWidth}]]),e.$slots.default?(i(),G(o,{key:1,placement:t.placement,arrow:t.arrow,theme:t.theme,animation:t.animation,trigger:t.trigger,interactive:t.interactive,delay:t.delay,duration:t.duration,allowHTML:t.allowHTML,maxWidth:t.maxWidth,distance:t.distance,offset:t.offset},{content:A(()=>[ge(e.$slots,"default")]),default:A(()=>[e.$slots.button?v("",!0):(i(),f("button",{key:0,class:C(["btn",t.btnClass])},M(t.title),3)),e.$slots.button?(i(),f("button",qn,[ge(e.$slots,"button")])):v("",!0)]),_:3},8,["placement","arrow","theme","animation","trigger","interactive","delay","duration","allowHTML","maxWidth","distance","offset"])):v("",!0)],64)}const Hn=z(zn,[["render",Gn]]);it();const He=St("list",{state:()=>({loading:!1,list:[],total:0,current:1,per_page:0,filter_data:[],fields:[{field:"",value:""}]}),actions:{async List(e){try{this.loading=!0,this.list=[];const t=(await this.axios.get(e+"?page="+this.current,{params:{filter:this.filter_data}})).data;this.list=t.data,this.total=t.meta.total,this.current=t.meta.current_page,this.per_page=t.meta.per_page,this.loading=!1}catch{}},async Delete(e,l){try{this.loading=!0,(await this.axios.delete(e+"/"+l)).data.status==200&&this.List(e)}catch{}}}}),je={incidents:[{label:"No.",field:"incident_no",name:"incident_no"},{label:"Date of incident",field:"date_of_incident",name:"date_of_incident"},{label:"Incident type",field:"incident_types.label",name:"incident_types_picklist"},{label:"Incident status",field:"incident_statuses.label",name:"incident_statuses_picklist"},{label:"Action",field:"action"}],resources:[{label:"Resources Name",field:"resources_name",name:"resources_name"},{label:"Resources Type",field:"resources_types.label",name:"resources_types_picklist"},{label:"Action",field:"action"}],preplans:[{label:"Pre Plan Name",field:"pre_plan_name",name:"pre_plan_name"},{label:"Action",field:"action"}],contacts:[{label:"First Name",field:"firstname",name:"firstname"},{label:"Last Name",field:"lastname",name:"lastname"},{label:"Action",field:"action"}],agencies:[{label:"Agency Name",field:"agency_name",name:"agency_name"},{label:"Action",field:"action"}],responders:[{label:"Firstname",field:"firstname",name:"firstname"},{label:"Action",field:"action"}],call_logs:[{label:"Date and Time",field:"date_and_time",name:"date_and_time"},{label:"Action",field:"action"}],users:[{label:"Name",field:"name",name:"name"},{label:"Email",field:"email",name:"email"},{label:"Role",field:"roles.label",name:"roles_picklist"},{label:"Action",field:"action"}]};const me=He(),Wn={components:{Card:Ee,Pagination:Un,Swal:Le,Tooltip:Hn,Icon:ve},created(){this.$watch(()=>this.$route.params.module,e=>{me.filter_data=[],me.List(e),this.Columns(e)})},mounted(){me.List(this.$route.params.module),this.Columns(this.$route.params.module)},data(){return{modules:"",listStore:me,columns:[]}},methods:{rowStyleClassFn(e){return"VGT-row"},onRowClick(e){if(e.column.field!="action"){const l=e.row.id;this.$router.push({name:"detail",params:{id:l}})}},changePage(e){me.current=e,me.List(this.$route.params.module)},Columns(e){this.columns=je[e]},del(e){Le.fire({title:"Do you want to delete this "+this.$route.params.module+" ?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(l=>{l.isConfirmed&&me.Delete(this.$route.params.module,e)})}}},Yn={key:0},$n={class:"flex space-x-3 justify-center rtl:space-x-reverse"},Zn={class:"action-btn"},Kn={class:"action-btn"},Jn=["onClick"],Xn={class:"py-4 px-3 flex justify-center"};function Qn(e,l,t,n,a,r){const o=k("Icon"),u=k("router-link"),c=k("Tooltip"),g=k("Pagination"),b=k("vue-good-table"),m=k("Card");return i(),f("div",null,[y(m,null,{default:A(()=>[y(b,{isLoading:a.listStore.loading,columns:a.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:a.listStore.list,"pagination-options":{enabled:!0,perPage:15},onCellClick:r.onRowClick,"row-style-class":r.rowStyleClassFn,"max-height":"600px","select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":A(p=>[p.column.field=="action"?(i(),f("span",Yn,[s("div",$n,[y(c,{placement:"top",arrow:"",theme:"dark"},{button:A(()=>[y(u,{to:`${this.$route.params.module}/detail/${p.row.id}`},{default:A(()=>[s("div",Zn,[y(o,{icon:"heroicons:eye"})])]),_:2},1032,["to"])]),default:A(()=>[l[0]||(l[0]=s("span",null," View",-1))]),_:2},1024),y(c,{placement:"top",arrow:"",theme:"dark"},{button:A(()=>[y(u,{to:`${this.$route.params.module}/edit/${p.row.id}`},{default:A(()=>[s("div",Kn,[y(o,{icon:"heroicons:pencil-square"})])]),_:2},1032,["to"])]),default:A(()=>[l[1]||(l[1]=s("span",null," Edit",-1))]),_:2},1024),y(c,{placement:"top",arrow:"",theme:"danger-500"},{button:A(()=>[s("div",{class:"action-btn text-red-500",onClick:I=>r.del(p.row.id)},[y(o,{icon:"heroicons:trash"})],8,Jn)]),default:A(()=>[l[2]||(l[2]=s("span",null,"Delete",-1))]),_:2},1024)])])):v("",!0)]),"pagination-bottom":A(p=>[s("div",Xn,[y(g,{total:a.listStore.total,current:a.listStore.current,"per-page":a.listStore.per_page,onPageChanged:r.changePage,perPageChanged:p.perPageChanged},null,8,["total","current","per-page","onPageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","rows","onCellClick","row-style-class"])]),_:1})])}const ea=z(Wn,[["render",Qn],["__scopeId","data-v-18e5dc4c"]]),ta={components:{Icon:ve,TransitionRoot:fl,TransitionChild:ml,Dialog:pl,DialogPanel:hl},props:{centered:{type:Boolean,default:!1},title:{type:String,default:"Basic Modal"},label:{type:String,default:"Basic Modal"},disableBackdrop:{type:Boolean,default:!1},noFade:{type:Boolean,default:!1},themeClass:{type:String,default:"bg-slate-900 dark:bg-slate-800 dark:border-b dark:border-slate-700"},sizeClass:{type:String,default:"max-w-xl"},scrollContent:{type:Boolean,default:!1},activeModal:{type:Boolean,default:!1}},setup(e,{emit:l}){return{close:()=>{l("close")}}}},la={key:0,class:"fixed inset-0 bg-slate-900/50 backdrop-filter backdrop-blur-sm"},na={class:"fixed inset-0 overflow-y-auto"},aa={key:0,class:"capitalize leading-6 tracking-wider font-medium text-base text-white"},ra={key:0,class:"px-4 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function oa(e,l,t,n,a,r){const o=k("TransitionChild"),u=k("Icon"),c=k("DialogPanel"),g=k("Dialog"),b=k("TransitionRoot");return i(),G(b,{show:t.activeModal,as:"template"},{default:A(()=>[y(g,{as:"div",class:"relative z-[99999]"},{default:A(()=>[y(o,{enter:t.noFade?"":"duration-300 ease-out","enter-from":t.noFade?"":"opacity-0","enter-to":t.noFade?"":"opacity-100",leave:t.noFade?"":"duration-200 ease-in","leave-from":t.noFade?"":"opacity-100","leave-to":t.noFade?"":"opacity-0"},{default:A(()=>[t.disableBackdrop===!1?(i(),f("div",la)):v("",!0)]),_:1},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"]),s("div",na,[s("div",{class:C(["flex min-h-full justify-center text-center p-6",t.centered?"items-center":"items-start "])},[y(o,{as:"template",enter:t.noFade?"":"duration-300  ease-out","enter-from":t.noFade?"":"opacity-0 scale-95","enter-to":t.noFade?"":"opacity-100 scale-100",leave:t.noFade?"":"duration-200 ease-in","leave-from":t.noFade?"":"opacity-100 scale-100","leave-to":t.noFade?"":"opacity-0 scale-95"},{default:A(()=>[y(c,{class:C(["w-full transform overflow-hidden rounded-md bg-white dark:bg-slate-800 text-left align-middle shadow-xl transition-all",t.sizeClass])},{default:A(()=>[s("div",{class:C(["relative overflow-hidden py-4 px-5 text-white flex justify-between",t.themeClass])},[t.title?(i(),f("h2",aa,M(t.title),1)):v("",!0),s("button",{onClick:l[0]||(l[0]=(...m)=>n.close&&n.close(...m)),class:"text-[22px]"},[y(u,{icon:"heroicons-outline:x"})])],2),s("div",{class:C(["px-6 py-8",t.scrollContent?"overflow-y-auto max-h-[400px]":""])},[ge(e.$slots,"default")],2),e.$slots.footer?(i(),f("div",ra,[ge(e.$slots,"footer")])):v("",!0)]),_:3},8,["class"])]),_:3},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"])],2)])]),_:3})]),_:3},8,["show"])}const Ut=z(ta,[["render",oa]]);const pt=He(),Xe=ll(),pe=T([{field:"",value:""}]),Ne=T(["text"]),ht=T([]),sa={components:{Modal:Ut,Button:De,InputGroup:ut,Textinput:ot,Icon:ve,Select:Ft},data(){return{fields:pe,field_type:Ne,picklist_option:ht}},props:{openFilterModal:{type:Boolean,default:!1}},mounted(){this.load_picklist()},created(){this.$watch(()=>this.$route.params.module,e=>{this.ClearFilter()})},methods:{picklist_event(e,l){const t=e.value;console.log(this.picklist_fields),pe.value[l].value="";const n=this.fields_computed.find(a=>a.name==t);Ne.value[l]=n.type,n.type=="picklist"&&(ht.value[l]=this.ModuleStore[e.value])},closeModal(){this.$emit("closeFilterModal",!1)},addCondition(){pe.value.length<3&&(Ne.value.push("text"),pe.value.push({field:"",value:""}))},removeCondition(e){pe.value.splice(e,1)},ClearFilter(){pe.value=[{field:"",value:""}],Ne.value=["text"]},SaveFilter(){pt.filter_data=pe.value,pt.List(this.$route.params.module),this.ClearFilter(),this.$emit("closeFilterModal",!1)},load_picklist(){const e=this.$route.params.module;e=="incidents"?(this.ModuleStore.incident_statuses_picklist.length==0&&this.ModuleStore.get_incident_status(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type(),this.ModuleStore.incident_priorities_picklist.length==0&&this.ModuleStore.get_incident_priority()):e=="resources"?(this.ModuleStore.resources_types_picklist.length==0&&this.ModuleStore.get_resources_type(),this.ModuleStore.resources_statuses_picklist.length==0&&this.ModuleStore.get_resources_status(),this.ModuleStore.conditions_picklist.length==0&&this.ModuleStore.get_resources_condition(),this.ModuleStore.dispatchers_picklist.length==0&&this.ModuleStore.get_resources_dispatch()):e=="contacts"?(this.ModuleStore.caller_types_picklist.length==0&&this.ModuleStore.get_caller_types(),this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="agencies"?(this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="responders"?this.ModuleStore.responder_types_picklist.length==0&&this.ModuleStore.get_responder_type():e=="preplans"?(this.ModuleStore.pre_plan_classifications_picklist.length==0&&this.ModuleStore.get_preplan_classification(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type()):e=="users"&&this.ModuleStore.roles_picklist.length==0&&this.ModuleStore.get_role(),Xe.assigned_to.length==0&&Xe.get_assigned_to()}},computed:{picklist_fields(){let e=[];return console.log(je[this.$route.params.module]),je[this.$route.params.module].map(l=>{if(l.field!="action"){let t={};t.label=l.label,t.value=l.name,e.push(t)}}),e},ModuleStore(){const e=this.$route.params.module;let l;switch(e){case"incidents":l=vl();break;case"resources":l=il();break;case"contacts":l=sl();break;case"agencies":l=ol();break;case"responders":l=rl();break;case"preplans":l=al();break;case"call_logs":l=nl();break;case"users":l=Xe;break}return l},fields_computed(){let e;const l=this.$route.params.module;switch(l){case"incidents":e=nt;break;case"resources":e=lt;break;case"contacts":e=tt;break;case"agencies":e=Vt;break;case"responders":e=Ct;break;case"preplans":e=wt;break;case"call_logs":e=ul;break;case"users":e=dl;break}const t=[];return e.map(n=>{n.fields.map(a=>{je[l].filter(r=>{a.name==r.name&&t.push(a)})})}),t}}},ia={class:"text-base text-slate-600 dark:text-slate-300"},da={class:"fromGroup relative"},ua={class:"flex justify-between items-end space-x-5"},ca={class:"flex-1"},fa={class:"flex-none relative w-14"},ma=["onClick"],pa={class:"flex justify-end"},ha={class:"w-full px-3 flex justify-between"};function ga(e,l,t,n,a,r){const o=k("Select"),u=k("Textinput"),c=k("flat-pickr"),g=k("Icon"),b=k("Button"),m=k("Modal");return i(),f("div",null,[y(m,{activeModal:t.openFilterModal,onClose:r.closeModal,title:"Filter",sizeClass:"max-w-5xl",style:{overflow:"none"}},{footer:A(()=>[s("div",ha,[y(b,{text:"Close",btnClass:"btn-dark",onClick:l[0]||(l[0]=p=>r.closeModal())}),y(b,{text:"Save Filter",btnClass:"btn-danger",onClick:l[1]||(l[1]=p=>r.SaveFilter())})])]),default:A(()=>[s("div",ia,[(i(!0),f(Q,null,ce(a.fields,(p,I)=>(i(),f("div",{key:I,class:"lg:grid-cols-2 md:grid-cols-2 grid-cols-1 grid gap-5 mb-5 last:mb-0"},[s("div",da,[l[2]||(l[2]=s("label",{class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},"Select Field",-1)),y(o,{"onOption:selected":F=>r.picklist_event(F,I),reduce:F=>F.value,placeholder:"Select an option",class:"p-1",options:r.picklist_fields,modelValue:p.field,"onUpdate:modelValue":F=>p.field=F},null,8,["onOption:selected","reduce","options","modelValue","onUpdate:modelValue"])]),s("div",ua,[s("div",ca,[a.field_type[I]=="text"||a.field_type[I]=="number"?(i(),G(u,{key:0,modelValue:p.value,"onUpdate:modelValue":F=>p.value=F,type:a.field_type,placeholder:"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","type"])):v("",!0),a.field_type[I]=="picklist"?(i(),G(o,{key:1,options:a.picklist_option[I],reduce:F=>F.id,modelValue:p.value,"onUpdate:modelValue":F=>p.value=F,placeholder:"Select an option",class:"p-1"},null,8,["options","reduce","modelValue","onUpdate:modelValue"])):v("",!0),a.field_type[I]=="time"?(i(),G(c,{key:2,modelValue:p.value,"onUpdate:modelValue":F=>p.value=F,class:"form-control",placeholder:"HH:mm",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),a.field_type[I]=="date"?(i(),G(c,{key:3,modelValue:p.value,"onUpdate:modelValue":F=>p.value=F,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)]),s("div",fa,[I!==0?(i(),f("button",{key:0,type:"button",class:"inline-flex items-center justify-center h-10 w-10 bg-danger-500 text-lg border rounded border-danger-500 text-white",onClick:F=>r.removeCondition(I)},[y(g,{icon:"heroicons-outline:trash"})],8,ma)):v("",!0)])])]))),128)),s("div",pa,[y(b,{icon:"heroicons-outline:plus",text:"Add Condition",btnClass:"btn-outline-light btn-sm bg-secondary text-slate-900 shadow-base2",onClick:r.addCondition},null,8,["onClick"])])])]),_:1},8,["activeModal","onClose"])])}const va=z(sa,[["render",ga]]),_a={components:{Button:De,Icon:ve,Textinput:ot,InputGroup:ut,Textarea:gl},setup(){let e=[{id:1,title:"Account Details"},{id:2,title:"Personal info-500"},{id:3,title:"Address"},{id:4,title:"Social Links"}];const l=it();let t=T(0),n=Oe().shape({username:K().required(" User name is required"),fullname:K().required("Full name is required"),email:K().email("Email is not valid").required("Email is required"),phone:K().required("Phone number is required").matches(/^[0-9]{12}$/,"Phone number is not valid"),password:K().required("Password is required").min(8,"Password must be at least 8 characters"),confirmpass:K().required("Confirm Password is required").oneOf([_l("password"),null],"Passwords must match")}),a=Oe().shape({fname:K().required(" First name is required"),lname:K().required(" Last name is required")}),r=Oe().shape({address:K().required(" Address is required")});const o=/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_-]+(\.[a-zA-Z]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)?$/gm;let u=Oe().shape({fburl:K().required("Facebook url is required").matches(o,"Facebook url is not valid")}),c=j(()=>{switch(t.value){case 0:return n;case 1:return a;case 2:return r;case 3:return u;default:return n}});const{handleSubmit:g}=Zl({validationSchema:c,keepValuesOnUnmount:!0}),{value:b,errorMessage:m}=J("email"),{value:p,errorMessage:I}=J("username"),{value:F,errorMessage:P}=J("fullname"),{value:se,errorMessage:O}=J("phone"),{value:ee,errorMessage:_e}=J("password"),{value:be,errorMessage:te}=J("confirmpass"),{value:D,errorMessage:le}=J("fname"),{value:q,errorMessage:W}=J("lname"),{value:$,errorMessage:ne}=J("address"),{value:ie,errorMessage:H}=J("fburl"),ae=g(()=>{let re=e.length;t.value===re-1?(t=re-1,l.success-500("Form Submited",{timeout:2e3})):t.value++});return{fullname:F,fullnameError:P,phone:se,phoneError:O,password:ee,passwordError:_e,confirmpass:be,confirmpassError:te,fname:D,fnameError:le,lname:q,lnameError:W,address:$,addressError:ne,email:b,emailError:m,username:p,usernameError:I,submit:ae,steps:e,stepNumber:t,prev:()=>{t.value--},fburl:ie,fbError:H}}},ba={class:"flex z-[5] items-center relative justify-center md:mx-8"},ya={key:0},ka={key:1,class:"text-3xl"},xa={class:"w-max"},Sa={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},wa={key:0},Ca={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},Va={key:1},Fa={class:"grid md:grid-cols-2 grid-cols-1 gap-5"},Ma={key:2},Ia={class:"grid grid-cols-1 gap-5"},Aa={key:3},Ea={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"};function Pa(e,l,t,n,a,r){const o=k("Icon"),u=k("Textinput"),c=k("InputGroup"),g=k("Textarea"),b=k("Button");return i(),f("div",null,[s("div",ba,[(i(!0),f(Q,null,ce(n.steps,(m,p)=>(i(),f("div",{class:"relative z-[1] items-center item flex flex-start flex-1 last:flex-none group",key:p},[s("div",{class:C([`   ${n.stepNumber>=p?"bg-slate-900 text-white ring-slate-900 ring-offset-2 dark:ring-offset-slate-500 dark:bg-slate-900 dark:ring-slate-900":"bg-white ring-slate-900 ring-opacity-70  text-slate-900 dark:text-slate-300 dark:bg-slate-600 dark:ring-slate-600 text-opacity-70"}`,"transition duration-150 icon-box md:h-12 md:w-12 h-7 w-7 rounded-full flex flex-col items-center justify-center relative z-[66] ring-1 md:text-lg text-base font-medium"])},[n.stepNumber<=p?(i(),f("span",ya,M(p+1),1)):(i(),f("span",ka,[y(o,{icon:"bx:check-double"})]))],2),s("div",{class:C(["absolute top-1/2 h-[2px] w-full",n.stepNumber>=p?"bg-slate-900 dark:bg-slate-900":"bg-[#E0EAFF] dark:bg-slate-700"])},null,2),s("div",{class:C(["absolute top-full text-base md:leading-6 mt-3 transition duration-150 md:opacity-100 opacity-0 group-hover:opacity-100",n.stepNumber>=p?" text-slate-900 dark:text-slate-300":"text-slate-500 dark:text-slate-300 dark:text-opacity-40"])},[s("span",xa,M(m.title),1)],2)]))),128))]),s("div",Sa,[s("form",{onSubmit:l[11]||(l[11]=oe((...m)=>n.submit&&n.submit(...m),["prevent"]))},[n.stepNumber===0?(i(),f("div",wa,[s("div",Ca,[l[12]||(l[12]=s("div",{class:"lg:col-span-3 md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Account Details ")],-1)),y(u,{label:"Username",type:"text",placeholder:"Type your User Name",name:"userName",modelValue:n.username,"onUpdate:modelValue":l[0]||(l[0]=m=>n.username=m),error:n.usernameError},null,8,["modelValue","error"]),y(u,{label:"Full name",type:"text",placeholder:"Full name",name:"fullname",modelValue:n.fullname,"onUpdate:modelValue":l[1]||(l[1]=m=>n.fullname=m),error:n.fullnameError},null,8,["modelValue","error"]),y(u,{label:"Email",type:"email",placeholder:"Type your email",name:"emil",modelValue:n.email,"onUpdate:modelValue":l[2]||(l[2]=m=>n.email=m),error:n.emailError},null,8,["modelValue","error"]),y(c,{label:"Phone Number",type:"text",prepend:"MY (+6)",placeholder:"Phone Number",name:"phoneNumber",modelValue:n.phone,"onUpdate:modelValue":l[3]||(l[3]=m=>n.phone=m),error:n.phoneError},null,8,["modelValue","error"]),y(u,{label:"Password",type:"password",placeholder:"8+ characters, 1 capitat letter ",name:"multi_password",modelValue:n.password,"onUpdate:modelValue":l[4]||(l[4]=m=>n.password=m),error:n.passwordError,hasicon:""},null,8,["modelValue","error"]),y(u,{label:"Confirm Password",type:"password",placeholder:"Password",name:"multi_password2",modelValue:n.confirmpass,"onUpdate:modelValue":l[5]||(l[5]=m=>n.confirmpass=m),error:n.confirmpassError,hasicon:""},null,8,["modelValue","error"])])])):v("",!0),n.stepNumber===1?(i(),f("div",Va,[s("div",Fa,[l[13]||(l[13]=s("div",{class:"md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Personal info-500 ")],-1)),y(u,{label:"First name",type:"text",placeholder:"First name",name:"firstname",modelValue:n.fname,"onUpdate:modelValue":l[6]||(l[6]=m=>n.fname=m),error:n.fnameError},null,8,["modelValue","error"]),y(u,{label:"Last name",type:"text",placeholder:"Last name",name:"lasttname",modelValue:n.lname,"onUpdate:modelValue":l[7]||(l[7]=m=>n.lname=m),error:n.lnameError},null,8,["modelValue","error"])])])):v("",!0),n.stepNumber===2?(i(),f("div",Ma,[s("div",Ia,[l[14]||(l[14]=s("div",{class:""},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Address ")],-1)),y(g,{label:"Address",type:"text",placeholder:"Write Address",name:"address",modelValue:n.address,"onUpdate:modelValue":l[8]||(l[8]=m=>n.address=m),error:n.addressError},null,8,["modelValue","error"])])])):v("",!0),n.stepNumber===3?(i(),f("div",Aa,[s("div",Ea,[l[15]||(l[15]=s("div",{class:"lg:col-span-3 md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Address ")],-1)),y(u,{label:"Facebook",type:"text",placeholder:"https://www.facebook.com/profile",name:"fburl",modelValue:n.fburl,"onUpdate:modelValue":l[9]||(l[9]=m=>n.fburl=m),error:n.fbError},null,8,["modelValue","error"])])])):v("",!0),s("div",{class:C(["mt-10",n.stepNumber>0?"flex justify-between":" text-right"])},[this.stepNumber!==0?(i(),G(b,{key:0,onClick:l[10]||(l[10]=oe(m=>n.prev(),["prevent"])),text:"prev",btnClass:"btn-dark"})):v("",!0),y(b,{text:n.stepNumber!==this.steps.length-1?"next":"submit",btnClass:"btn-dark"},null,8,["text"])],2)],32)])])}const Ba=z(_a,[["render",Pa]]);const Oa={name:"Fileinput",props:{name:{type:String,default:"name"},accept:{type:String,default:""},multiple:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},placeholder:{type:String,default:"Choose a file or drop it here..."},label:{type:String,default:"Browse"},classInput:{type:String,default:""},filenametag:{type:Boolean,default:!1}},data(){return{selectedFile:null,url:null,multipleFiles:[],multipleurls:[]}},methods:{onChange(e){this.selectedFile=e.target.files[0],this.url=URL.createObjectURL(this.selectedFile),this.multipleFiles=Array.from(e.target.files),this.multipleFiles.forEach(l=>{this.multipleurls.push(URL.createObjectURL(l))}),this.$emit("input",this.selectedFile)}}},Na={class:"filegroup"},ja=["for"],Ta=["id","name","multiple","preview","placeholder","label","accept"],Ra={key:0,class:"flex-1 overflow-hidden text-ellipsis whitespace-nowrap"},La={key:1,class:"text-slate-400"},Ua={key:1,class:"flex-1 overflow-hidden text-ellipsis whitespace-nowrap"},za={key:1,class:"text-slate-400"},Da={class:"file-name flex-none cursor-pointer border-l px-4 border-slate-200 dark:border-slate-700 h-full inline-flex items-center bg-slate-100 dark:bg-slate-900 text-slate-600 dark:text-slate-400 text-base rounded-tr rounded-br font-normal"},qa={key:0,class:"w-[200px] h-[200px] mx-auto mt-6"},Ga=["src","alt"],Ha={key:1,class:"flex flex-wrap space-x-5 rtl:space-x-reverse"},Wa=["src","alt"];function Ya(e,l,t,n,a,r){var o,u,c,g;return i(),f("div",null,[s("div",Na,[s("label",{for:t.name},[s("input",{type:"file",onChange:l[0]||(l[0]=(...b)=>r.onChange&&r.onChange(...b)),class:"bg-red-400 w-full hidden",id:t.name,name:t.name,multiple:t.multiple,preview:t.preview,placeholder:t.placeholder,label:t.label,accept:t.accept},null,40,Ta),s("div",{class:C(["w-full h-[40px] file-control flex items-center",`  ${t.classInput}`])},[t.multiple?v("",!0):(i(),f("span",Ra,[(o=a.selectedFile)!=null&&o.name?(i(),f("span",{key:0,class:C(t.filenametag?" badge-title":"text-slate-900 dark:text-white")},M((u=a.selectedFile)==null?void 0:u.name),3)):v("",!0),(c=a.selectedFile)!=null&&c.name?v("",!0):(i(),f("span",La,M(t.placeholder),1))])),t.multiple?(i(),f("span",Ua,[a.multipleurls.length>0?(i(),f("span",{key:0,class:C(t.filenametag?" badge-title":"text-slate-900 dark:text-white")},M(a.multipleurls.length>0?a.multipleurls.length+" files selected":""),3)):v("",!0),t.placeholder&&a.multipleurls.length===0?(i(),f("span",za,M(t.placeholder),1)):v("",!0)])):v("",!0),s("span",Da,M(t.label),1)],2),a.url&&!t.multiple&&t.preview?(i(),f("div",qa,[s("img",{src:a.url,class:"w-full object-cover h-full block rounded",alt:(g=a.selectedFile)==null?void 0:g.name},null,8,Ga)])):v("",!0),a.multipleurls.length>0&&t.multiple&&t.preview?(i(),f("div",Ha,[(i(!0),f(Q,null,ce(a.multipleurls,(b,m)=>{var p;return i(),f("div",{key:m,class:"xl:w-1/5 md:w-1/3 w-1/2 rounded mt-6"},[s("img",{src:b,class:"object-cover w-full h-full rounded",alt:(p=a.selectedFile)==null?void 0:p.name},null,8,Wa)])}),128))])):v("",!0)],8,ja)])])}const $a=z(Oa,[["render",Ya]]),Za=xt({name:"Checkbox",inheritAttrs:!1,props:{label:{type:String},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:"checkbox"},activeClass:{type:String,default:" ring-black-500  bg-slate-900 dark:bg-slate-700 dark:ring-slate-700 "},value:{type:null},modelValue:{type:null}},emits:{"update:modelValue":e=>({modelValue:e})},setup(e,l){const t=T(e.checked),n=()=>{t.value=!t.value};return{localValue:j({get:()=>e.modelValue,set:r=>l.emit("update:modelValue",r)}),ck:t,onChange:n}}}),Ka=["disabled","name","value"],Ja={key:0,src:bl,alt:"",class:"h-[10px] w-[10px] block m-auto"},Xa={key:0,class:"text-slate-500 dark:text-slate-400 text-sm leading-6"};function Qa(e,l,t,n,a,r){return i(),f("div",null,[s("label",{class:C(["flex items-center",e.disabled?" cursor-not-allowed opacity-50":"cursor-pointer"])},[ze(s("input",el({type:"checkbox",class:"hidden",disabled:e.disabled,name:e.name,onChange:l[0]||(l[0]=(...o)=>e.onChange&&e.onChange(...o)),value:e.value,"onUpdate:modelValue":l[1]||(l[1]=o=>e.localValue=o)},e.$attrs),null,16,Ka),[[Qt,e.localValue]]),s("span",{class:C(["h-4 w-4 border flex-none border-slate-100 dark:border-slate-800 rounded inline-flex ltr:mr-3 rtl:ml-3 relative transition-all duration-150",e.ck?e.activeClass+" ring-2 ring-offset-2 dark:ring-offset-slate-800 ":"bg-slate-100 dark:bg-slate-600 dark:border-slate-600"])},[e.ck?(i(),f("img",Ja)):v("",!0)],2),e.label?(i(),f("span",Xa,M(e.label),1)):v("",!0)],2)])}const er=z(Za,[["render",Qa]]),tr={components:{Card:Ee,Fileinput:$a,Checkbox:er},data(){return{hasheader:0}},methods:{uploadFile(e){this.$emit("uploadFile",e.target.files)},hasheaderevent(e){this.$emit("hasHeader",this.hasheader)}}},lr={class:"lg:grid lg:grid-cols-1"},nr={class:"fromGroup relative"};function ar(e,l,t,n,a,r){const o=k("Fileinput"),u=k("Checkbox"),c=k("Card");return i(),f("div",null,[y(c,{title:"Import from csv file",class:"shadow"},{default:A(()=>[l[3]||(l[3]=s("br",null,null,-1)),s("div",lr,[s("div",nr,[l[1]||(l[1]=s("label",{for:"",class:"inline-block input-label"},"Select csv file",-1)),y(o,{accept:".csv",placeholder:"Choose a file here...",onChange:r.uploadFile},null,8,["onChange"])]),l[2]||(l[2]=s("br",null,null,-1)),y(u,{modelValue:a.hasheader,"onUpdate:modelValue":l[0]||(l[0]=g=>a.hasheader=g),onChange:r.hasheaderevent,label:"Has header"},null,8,["modelValue","onChange"])])]),_:1})])}const rr=z(tr,[["render",ar]]);it();const We=St("import",{state:()=>({loading:!0,stepNumber:0,duplicate_handling_option:1,get_single_row:[],import_result:[]}),getters:{getRecordCreated(e){return e.import_result.filter(l=>l.status==1)},getSkipResult(e){return e.import_result.filter(l=>l.status==2)},getUpdateResult(e){return e.import_result.filter(l=>l.status==3)}},actions:{async getImport(e){try{this.loading=!0;const l=await this.axios.post("import/get_single_data",e,{headers:{"Content-type":"multipart/form-data"}});this.get_single_row=l.data,this.stepNumber++,this.loading=!1,console.log(l)}catch{}},async saveImport(e){try{this.loading=!0;const l=await this.axios.post("import/save_import",e,{headers:{"Content-type":"multipart/form-data"}});this.stepNumber++,this.loading=!1,this.import_result=l.data.data}catch{}}},persist:!0}),gt=We(),or=[{value:1,label:"Skip this step"},{value:2,label:"Skip"},{value:3,label:"Update"}],sr={props:{modulefields:{type:Array}},components:{Card:Ee,Select:Lt},data(){return{options:or,duplicate_handling_field:[],select:[],ImportStore:gt}},created(){this.formSelect(this.modulefields)},methods:{formSelect(e){return e.map(l=>{l.duplicate_handling&&this.select.push({label:l.label,value:l.name})}),this.select},duplicate_handling_event(){this.$emit("duplicate_handling_option",gt.duplicate_handling_option)},duplicate_handling_field_event(){this.$emit("duplicate_handling_field",this.duplicate_handling_field)}}},ir={class:"fromGroup relative mt-5"},dr={key:0,class:"fromGroup relative"},ur=["value"];function cr(e,l,t,n,a,r){const o=k("Select"),u=k("Card");return i(),f("div",null,[y(u,{title:"Duplicate record handling",class:"shadow"},{default:A(()=>[s("div",ir,[l[3]||(l[3]=s("label",{for:"",class:"inline-block input-label"},"Select how duplicate records should be handled",-1)),y(o,{placeholder:"Select an option",modelValue:a.ImportStore.duplicate_handling_option,"onUpdate:modelValue":l[0]||(l[0]=c=>a.ImportStore.duplicate_handling_option=c),onChange:r.duplicate_handling_event,options:a.options},null,8,["modelValue","onChange","options"])]),a.ImportStore.duplicate_handling_option!=1?(i(),f("div",dr,[l[5]||(l[5]=s("p",{class:"mt-5"},"Select the matching fields to find duplicate records",-1)),l[6]||(l[6]=s("label",{for:"",class:"inline-block input-label"},"Available fields",-1)),ze(s("select",{onChange:l[1]||(l[1]=(...c)=>r.duplicate_handling_field_event&&r.duplicate_handling_field_event(...c)),"onUpdate:modelValue":l[2]||(l[2]=c=>a.duplicate_handling_field=c),class:"text-sm",multiple:"",style:{width:"100%",border:"1px solid #ccc",height:"200px"}},[l[4]||(l[4]=s("option",{value:"",selected:"",disabled:""},"Select an option",-1)),(i(!0),f(Q,null,ce(a.select,(c,g)=>(i(),f("option",{value:c.value,key:g},M(c.label),9,ur))),128))],544),[[tl,a.duplicate_handling_field]])])):v("",!0)]),_:1})])}const fr=z(sr,[["render",cr]]),vt=We(),mr={props:{modulefields:{type:Array}},components:{Card:Ee,Select:Ft},data(){return{ImportStore:vt,test:"",columns:[{label:"Row 1",field:"row_1"},{label:"Crm fields",field:"crm_fields"}]}},computed:{get_single_data(){const e=[];return vt.get_single_row.map(l=>{e.push({row_1:l})}),e},crm_fields(){const e=[];return this.modulefields.map(l=>{e.push({label:l.label,value:l.name,required:l.required,type:l.type})}),console.log(e),e}},methods:{get_crm_fields_value:function(){console.log("test")}}},pr={key:0},hr={class:"w-full import-crm-fields",style:{border:"1px solid #ccc",padding:"5px","border-radius":"5px",outline:"none"}},gr=["value","data-required","data-type"],vr={key:0,class:"text-red-500"};function _r(e,l,t,n,a,r){const o=k("vue-good-table"),u=k("Card");return i(),G(u,{bodyClass:"p-0 shadow-md"},{default:A(()=>[l[1]||(l[1]=s("header",{class:"px-4 pt-4 pb-3 mb-3"},[s("h5",{class:"card-title mb-0"},"Map the columns to CRM fields")],-1)),y(o,{"max-height":"450px",columns:a.columns,rows:r.get_single_data,"fixed-header":!0,styleClass:" vgt-table table-head","sort-options":{enabled:!1}},{"table-row":A(c=>[c.column.field=="crm_fields"?(i(),f("div",pr,[s("select",hr,[l[0]||(l[0]=s("option",{value:"",disabled:"",selected:""},"Select an option",-1)),(i(!0),f(Q,null,ce(r.crm_fields,(g,b)=>(i(),f("option",{key:b,value:g.value,"data-required":g.required,"data-type":g.type},[Re(M(g.label),1),g.required?(i(),f("span",vr,"*")):v("",!0)],8,gr))),128))])])):v("",!0)]),_:1},8,["columns","rows"])]),_:1})}const br=z(mr,[["render",_r]]),yr=We(),kr={components:{Card:Ee},data(){return{ImportStore:yr}}},xr={class:"lg:grid grid-cols-3 mt-3"},Sr={class:"col-span-2"},wr={class:"lg:grid grid-cols-3 mt-3"},Cr={class:"col-span-2"},Vr={class:"lg:grid grid-cols-3 mt-3"},Fr={class:"col-span-2"};function Mr(e,l,t,n,a,r){const o=k("Card");return i(),f("div",null,[y(o,{title:"Import result"},{default:A(()=>[s("div",xr,[l[0]||(l[0]=s("div",null,"Records Created",-1)),s("div",Sr,M(a.ImportStore.getRecordCreated.length),1)]),s("div",wr,[l[1]||(l[1]=s("div",null,"Records Skip",-1)),s("div",Cr,M(a.ImportStore.getSkipResult.length),1)]),s("div",Vr,[l[2]||(l[2]=s("div",null,"Records update",-1)),s("div",Fr,M(a.ImportStore.getUpdateResult.length),1)])]),_:1})])}const Ir=z(kr,[["render",Mr]]);const N=We(),Ar=He(),Qe=T(!1),ye=T(),_t=T([]),Er={components:{Button:De,Modal:Ut,VerticallyWizard:Ba,Step1:rr,Step2:fr,Step3:br,Step4:Ir},props:{openModal:{type:Boolean,default:!1}},data(){return{ImportStore:N,modules:"",files:ye,incidents_field:nt,resources_field:lt,contacts_field:tt,steps:[{id:1,title:"Upload csv file"},{id:2,title:"Duplicate handling"},{id:3,title:"Field mapping"},{id:4,title:"Result"}]}},created(){N.loading=!1,N.stepNumber=0,N.duplicate_handling_option=1},methods:{closeModal(){this.$emit("closeModal",!1),ye.value=void 0,setTimeout(()=>{N.stepNumber=0,N.duplicate_handling_option=1},500),N.stepNumber==3&&Ar.List(this.$route.params.module)},prev(){N.stepNumber++},next(){if(N.stepNumber==0&&ye.value===void 0)return Le.fire({icon:"error",title:"Something wrong",text:"Select csv file to proceed in the next step"}),!1;if(N.stepNumber==1){const e=new FormData;e.append("files",ye.value[0]),e.append("hasheader",Qe.value),N.getImport(e)}else N.stepNumber==2?this.saveImport():N.stepNumber==3?this.closeModal():N.stepNumber++},uploadFile(e){ye.value=e},hasHeader(e){Qe.value=e},saveImport(){const e=document.getElementsByClassName("import-crm-fields"),l=[],{required_fields:t,fields:n}=this.getFieldRequired(),a=[];for(var r=0;r<e.length;r++)if(e[r].value!=""){const m=e[r].value,p=l[m];if(p===void 0)l[m]=1;else{var o=0;o=p,o++,l[m]=o}a.push({fields:m,position:r,type:e[r].selectedOptions[0].getAttribute("data-type")})}var u="";const c=Object.keys(l);c.map(m=>{l[m]>1&&(u+=`<p class="text-red-500">Field mapped more than once <b>${n[m].label}</b></p>`)});const g=t.filter(m=>!c.includes(m));if(g.length>0&&g.map(m=>{u+=`<p class="text-red-500">Please map mandatory fields <b>${n[m].label}</b> </p>`}),u!="")return Le.fire({icon:"error",title:"Something wrong",html:u}),!1;const b=new FormData;b.append("files",ye.value[0]),b.append("fields",JSON.stringify(a)),b.append("module",this.$route.params.module),b.append("duplicate_fields",JSON.stringify(this.duplicate_field)),b.append("duplicate_option",N.duplicate_handling_option),b.append("hasheader",Qe.value),N.saveImport(b)},getFieldRequired(){const e=[],l=[];return this.module_fields.map(t=>{t.required&&e.push(t.name),l[t.name]=t}),{required_fields:e,fields:l}},duplicate_handling_option(e){N.duplicate_handling_option=e},duplicate_handling_field(e){_t.value=e},getImport(e){console.log(e)}},computed:{Modules(){return this.modules=this.$route.params.module},module_fields(){var e;switch(this.Modules){case"incidents":e=nt;break;case"resources":e=lt;break;case"contacts":e=tt;break;case"agencies":e=Vt;break;case"responders":e=Ct;break;case"preplans":e=wt;break}const l=[];return e.map(t=>{t.fields.map(n=>{l.push(n)})}),l},duplicate_field(){const{fields:e}=this.getFieldRequired(),l=[];return _t.value.map(t=>{l.push(e[t].name)}),l}}},Pr={class:"flex z-[5] items-center relative justify-center md:mx-8"},Br={key:0},Or={key:1,class:"text-3xl"},Nr={class:"w-max"},jr={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},Tr={key:0},Rr={key:1},Lr={key:2},Ur={key:3};function zr(e,l,t,n,a,r){const o=k("Loading"),u=k("Icon"),c=k("Step1"),g=k("Step2"),b=k("Step3"),m=k("Step4"),p=k("Button"),I=k("Modal");return i(),f(Q,null,[y(o,{active:a.ImportStore.loading,"onUpdate:active":l[0]||(l[0]=F=>a.ImportStore.loading=F)},null,8,["active"]),y(I,{activeModal:t.openModal,onClose:r.closeModal,title:`Import ${r.Modules}`,sizeClass:"w-3/6"},{default:A(()=>[s("div",Pr,[(i(!0),f(Q,null,ce(a.steps,(F,P)=>(i(),f("div",{class:"relative z-[1] items-center item flex flex-start flex-1 last:flex-none group",key:P},[s("div",{class:C([`   ${a.ImportStore.stepNumber>=P?"bg-slate-900 text-white ring-slate-900 ring-offset-2 dark:ring-offset-slate-500 dark:bg-slate-900 dark:ring-slate-900":"bg-white ring-slate-900 ring-opacity-70  text-slate-900 dark:text-slate-300 dark:bg-slate-600 dark:ring-slate-600 text-opacity-70"}`,"transition duration-150 icon-box md:h-12 md:w-12 h-7 w-7 rounded-full flex flex-col items-center justify-center relative z-[66] ring-1 md:text-lg text-base font-medium"])},[a.ImportStore.stepNumber<=P?(i(),f("span",Br,M(P+1),1)):(i(),f("span",Or,[y(u,{icon:"bx:check-double"})]))],2),s("div",{class:C(["absolute top-1/2 h-[2px] w-full",a.ImportStore.stepNumber>=P?"bg-slate-900 dark:bg-slate-900":"bg-[#E0EAFF] dark:bg-slate-700"])},null,2),s("div",{class:C(["absolute top-full text-base md:leading-6 mt-3 transition duration-150 md:opacity-100 opacity-0 group-hover:opacity-100",a.ImportStore.stepNumber>=P?" text-slate-900 dark:text-slate-300":"text-slate-500 dark:text-slate-300 dark:text-opacity-40"])},[s("span",Nr,M(F.title),1)],2)]))),128))]),s("div",jr,[a.ImportStore.stepNumber==0?(i(),f("div",Tr,[y(c,{onUploadFile:r.uploadFile,onHasHeader:r.hasHeader},null,8,["onUploadFile","onHasHeader"])])):v("",!0),a.ImportStore.stepNumber==1?(i(),f("div",Rr,[y(g,{modulefields:r.module_fields,onDuplicate_handling_option:r.duplicate_handling_option,onDuplicate_handling_field:r.duplicate_handling_field},null,8,["modulefields","onDuplicate_handling_option","onDuplicate_handling_field"])])):v("",!0),a.ImportStore.stepNumber===2?(i(),f("div",Lr,[y(b,{modulefields:r.module_fields},null,8,["modulefields"])])):v("",!0),a.ImportStore.stepNumber===3?(i(),f("div",Ur,[y(m)])):v("",!0),s("div",{class:C(["mt-10",a.ImportStore.stepNumber>0?"flex justify-end":" text-right"])},[y(p,{text:a.ImportStore.stepNumber!==this.steps.length-1?"next":"Close",onClick:l[1]||(l[1]=oe(F=>r.next(),["prevent"])),btnClass:"btn-dark"},null,8,["text"])],2)])]),_:1},8,["activeModal","onClose","title"])],64)}const Dr=z(Er,[["render",zr]]),et=He(),qr={components:{Breadcrumb:cl,Textinput:ot,Button:De,Icon:ve,InputGroup:ut,List:ea,Import:Dr,Filter_modal:va},data(){return{openModal:!1,openFilterModal:!1,list_store:et}},methods:{importModalbtn(){this.openModal=!0},closeModal(e){this.openModal=e},filterModalBtn(){this.openFilterModal=!0},closeFilterModal(e){this.openFilterModal=e},clearFilter(){et.filter_data=[],et.List(this.$route.params.module)}}},Gr={class:"lg:grid lg:grid-cols-2 mb-2"},Hr={class:"flex"},Wr={class:"lg:float-right"};function Yr(e,l,t,n,a,r){const o=k("Breadcrumb"),u=k("InputGroup"),c=k("Button"),g=k("router-link"),b=k("List"),m=k("Import"),p=k("Filter_modal");return i(),f("div",null,[y(o),s("div",Gr,[s("div",Hr,[y(u,{class:"w-3/5",type:"text",placeholder:"Search",prependIcon:"heroicons-outline:search",merged:""}),s("div",null,[y(c,{icon:"heroicons-outline:adjustments-horizontal",text:"Filters",btnClass:"btn-outline-dark ml-2 py-2",onClick:r.filterModalBtn},null,8,["onClick"]),a.list_store.filter_data.length>0?(i(),G(c,{key:0,icon:"heroicons-outline:x-mark",text:"Clear Filter",btnClass:"btn-outline-danger ml-2 py-2",onClick:l[0]||(l[0]=I=>r.clearFilter())})):v("",!0)])]),s("div",null,[s("div",Wr,[y(g,{to:{name:"edit",params:{module:this.$route.params.module}}},{default:A(()=>[y(c,{icon:"heroicons-outline:plus",text:`New ${this.$route.params.module}`,btnClass:"btn-danger mr-2 py-2"},null,8,["text"])]),_:1},8,["to"]),y(c,{icon:"heroicons-outline:arrow-down-tray",text:"Import",btnClass:"btn-outline-danger py-2",onClick:r.importModalbtn},null,8,["onClick"])])])]),y(b),y(m,{openModal:a.openModal,onCloseModal:r.closeModal},null,8,["openModal","onCloseModal"]),y(p,{openFilterModal:a.openFilterModal,onCloseFilterModal:r.closeFilterModal},null,8,["openFilterModal","onCloseFilterModal"])])}const ro=z(qr,[["render",Yr]]);export{ro as default};

import{I as fe}from"./index-85f3daf5.js";import{C as qt,T as _t}from"./index-2e7229b2.js";import{e as S,p as T,o as bt,v as yt,H as Re,y as pe,S as xt,r as q,U as Qe,A as Ee,m as $t,V as Gt,B as Ht,W as Yt,_ as B,a as x,b as u,c as m,n as V,t as I,g as _,f as s,h as je,C as ae,D as he,d as h,X as Wt,I as De,w,F as oe,E as ge,q as kt,Y as Zt,i as re,Z as et,$ as wt,K as Kt,a0 as Jt,a1 as Xt}from"./index-33b8ebb1.js";import{i as at,r as ot,c as st,B as Qt}from"./contacts-f32b87e7.js";import{B as tt}from"./index-cad29c44.js";import{S as ce,T as en,C as tn}from"./vue-select.es-62afc272.js";import{C as Be}from"./index-77817f64.js";import{f as nn,o as ln,N as rn,_ as an}from"./transition-01fcba35.js";import{c as Te,a as Z,b as on,_ as sn}from"./object-e5335bab.js";import"./micro-task-e50096b0.js";/**
  * vee-validate v4.5.11
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function Se(e){return typeof e=="function"}function St(e){return e==null}const Ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ct(e){return Number(e)>=0}const dn={};function un(e){return dn[e]}const Oe=Symbol("vee-validate-form"),cn=Symbol("vee-validate-field-instance");function Je(e){return Se(e)&&!!e.__locatorRef}function Me(e){return!!e&&Se(e.validate)}function Vt(e){return e==="checkbox"||e==="radio"}function fn(e){return Ce(e)||Array.isArray(e)}function mn(e){return Array.isArray(e)?e.length===0:Ce(e)&&Object.keys(e).length===0}function ze(e){return/^\[.+\]$/i.test(e)}function pn(e){return Ft(e)&&e.multiple}function Ft(e){return e.tagName==="SELECT"}function hn(e){return It(e)&&e.target&&"submit"in e.target}function It(e){return e?!!(typeof Event<"u"&&Se(Event)&&e instanceof Event||e&&e.srcElement):!1}function nt(e){return ze(e)?e.replace(/\[|\]/gi,""):e}function J(e,n,t){return e?ze(n)?e[nt(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,a)=>fn(r)&&a in r?r[a]:t,e):t}function we(e,n,t){if(ze(n)){e[nt(n)]=t;return}const l=n.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<l.length;a++){if(a===l.length-1){r[l[a]]=t;return}(!(l[a]in r)||St(r[l[a]]))&&(r[l[a]]=Ct(l[a+1])?[]:{}),r=r[l[a]]}}function Ye(e,n){if(Array.isArray(e)&&Ct(n)){e.splice(Number(n),1);return}Ce(e)&&delete e[n]}function We(e,n){if(ze(n)){delete e[nt(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let a=0;a<t.length;a++){if(a===t.length-1){Ye(l,t[a]);break}if(!(t[a]in l)||St(l[t[a]]))break;l=l[t[a]]}const r=t.map((a,o)=>J(e,t.slice(0,o).join(".")));for(let a=r.length-1;a>=0;a--)if(mn(r[a])){if(a===0){Ye(e,t[0]);continue}Ye(r[a-1],t[a-1])}}function D(e){return Object.keys(e)}function Ue(e,n=void 0){const t=Gt();return(t==null?void 0:t.provides[e])||Ht(e,n)}function Xe(e,n,t){if(Array.isArray(e)){const l=[...e],r=l.indexOf(n);return r>=0?l.splice(r,1):l.push(n),l}return e===n?t:n}function gn(e,n=0){let t=null,l=[];return function(...r){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const a=e(...r);l.forEach(o=>o(a)),l=[]},n),new Promise(a=>l.push(a))}}function Ze(e){if(At(e))return e._value}function At(e){return"_value"in e}function Pt(e){if(!It(e))return e;const n=e.target;if(Vt(n.type)&&At(n))return Ze(n);if(n.type==="file"&&n.files)return Array.from(n.files);if(pn(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Ze);if(Ft(n)){const t=Array.from(n.options).find(l=>l.selected);return t?Ze(t):n.value}return n.value}function Et(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Ce(e)&&e._$$isNormalized?e:Ce(e)?Object.keys(e).reduce((t,l)=>{const r=vn(e[l]);return e[l]!==!1&&(t[l]=it(r)),t},n):typeof e!="string"?n:e.split("|").reduce((t,l)=>{const r=_n(l);return r.name&&(t[r.name]=it(r.params)),t},n):n}function vn(e){return e===!0?[]:Array.isArray(e)||Ce(e)?e:[e]}function it(e){const n=t=>typeof t=="string"&&t[0]==="@"?bn(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,l)=>(t[l]=n(e[l]),t),{})}const _n=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function bn(e){const n=t=>J(t,e)||t[e];return n.__locatorRef=e,n}function yn(e){return Array.isArray(e)?e.filter(Je):D(e).filter(n=>Je(e[n])).map(n=>e[n])}const xn={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let kn=Object.assign({},xn);const wn=()=>kn;async function Mt(e,n,t={}){const l=t==null?void 0:t.bails,r={name:(t==null?void 0:t.name)||"{field}",rules:n,bails:l??!0,formData:(t==null?void 0:t.values)||{}},o=(await Sn(r,e)).errors;return{errors:o,valid:!o.length}}async function Sn(e,n){if(Me(e.rules))return Cn(n,e.rules,{bails:e.bails});if(Se(e.rules)||Array.isArray(e.rules)){const o={field:e.name,form:e.formData,value:n},d=Array.isArray(e.rules)?e.rules:[e.rules],f=d.length,g=[];for(let y=0;y<f;y++){const c=d[y],v=await c(n,o);if(typeof v!="string"&&v)continue;const R=typeof v=="string"?v:Bt(o);if(g.push(R),e.bails)return{errors:g}}return{errors:g}}const t=Object.assign(Object.assign({},e),{rules:Et(e.rules)}),l=[],r=Object.keys(t.rules),a=r.length;for(let o=0;o<a;o++){const d=r[o],f=await Vn(t,n,{name:d,params:t.rules[d]});if(f.error&&(l.push(f.error),e.bails))return{errors:l}}return{errors:l}}async function Cn(e,n,t){var l;return{errors:await n.validate(e,{abortEarly:(l=t.bails)!==null&&l!==void 0?l:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function Vn(e,n,t){const l=un(t.name);if(!l)throw new Error(`No such validator '${t.name}' exists.`);const r=Fn(t.params,e.formData),a={field:e.name,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:r})},o=await l(n,r,a);return typeof o=="string"?{error:o}:{error:o?void 0:Bt(a)}}function Bt(e){const n=wn().generateMessage;return n?n(e):"Field is invalid"}function Fn(e,n){const t=l=>Je(l)?l(n):l;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((l,r)=>(l[r]=t(e[r]),l),{})}async function In(e,n){const t=await e.validate(n,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),l={},r={};for(const a of t){const o=a.errors;l[a.path]={valid:!o.length,errors:o},o.length&&(r[a.path]=o[0])}return{valid:!t.length,results:l,errors:r}}async function An(e,n,t){const r=D(e).map(async g=>{var y,c,v;const M=await Mt(J(n,g),e[g],{name:((y=t==null?void 0:t.names)===null||y===void 0?void 0:y[g])||g,values:n,bails:(v=(c=t==null?void 0:t.bailsMap)===null||c===void 0?void 0:c[g])!==null&&v!==void 0?v:!0});return Object.assign(Object.assign({},M),{path:g})});let a=!0;const o=await Promise.all(r),d={},f={};for(const g of o)d[g.path]={valid:g.valid,errors:g.errors},g.valid||(a=!1,f[g.path]=g.errors[0]);return{valid:a,results:d,errors:f}}function dt(e,n,t){typeof t.value=="object"&&(t.value=E(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function E(e){if(typeof e!="object")return e;var n=0,t,l,r,a=Object.prototype.toString.call(e);if(a==="[object Object]"?r=Object.create(e.__proto__||null):a==="[object Array]"?r=Array(e.length):a==="[object Set]"?(r=new Set,e.forEach(function(o){r.add(E(o))})):a==="[object Map]"?(r=new Map,e.forEach(function(o,d){r.set(E(d),E(o))})):a==="[object Date]"?r=new Date(+e):a==="[object RegExp]"?r=new RegExp(e.source,e.flags):a==="[object DataView]"?r=new e.constructor(E(e.buffer)):a==="[object ArrayBuffer]"?r=e.slice(0):a.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)dt(r,l[n],Object.getOwnPropertyDescriptor(e,l[n]));for(n=0,l=Object.getOwnPropertyNames(e);n<l.length;n++)Object.hasOwnProperty.call(r,t=l[n])&&r[t]===e[t]||dt(r,t,Object.getOwnPropertyDescriptor(e,t))}return r||e}var Le=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var l,r,a;if(Array.isArray(n)){if(l=n.length,l!=t.length)return!1;for(r=l;r--!==0;)if(!e(n[r],t[r]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;for(r of n.entries())if(!e(r[1],t.get(r[0])))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(l=n.length,l!=t.length)return!1;for(r=l;r--!==0;)if(n[r]!==t[r])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(a=Object.keys(n),l=a.length,l!==Object.keys(t).length)return!1;for(r=l;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=l;r--!==0;){var o=a[r];if(!e(n[o],t[o]))return!1}return!0}return n!==n&&t!==t};let ut=0;function Pn(e,n){const{value:t,initialValue:l,setInitialValue:r}=En(e,n.modelValue,!n.standalone),{errorMessage:a,errors:o,setErrors:d}=Bn(e,!n.standalone),f=Mn(t,l,o),g=ut>=Number.MAX_SAFE_INTEGER?0:++ut;function y(c){var v;"value"in c&&(t.value=c.value),"errors"in c&&d(c.errors),"touched"in c&&(f.touched=(v=c.touched)!==null&&v!==void 0?v:f.touched),"initialValue"in c&&r(c.initialValue)}return{id:g,path:e,value:t,initialValue:l,meta:f,errors:o,errorMessage:a,setState:y}}function En(e,n,t){const l=t?Ue(Oe,void 0):void 0,r=q(S(n));function a(){return l?J(l.meta.value.initialValues,S(e),S(r)):S(r)}function o(y){if(!l){r.value=y;return}l.setFieldInitialValue(S(e),y)}const d=T(a);if(!l)return{value:q(a()),initialValue:d,setInitialValue:o};const f=n?S(n):J(l.values,S(e),S(d));return l.stageInitialValue(S(e),f),{value:T({get(){return J(l.values,S(e))},set(y){l.setFieldValue(S(e),y)}}),initialValue:d,setInitialValue:o}}function Mn(e,n,t){const l=Qe({touched:!1,pending:!1,valid:!0,validated:!!S(t).length,initialValue:T(()=>S(n)),dirty:T(()=>!Le(S(e),S(n)))});return pe(t,r=>{l.valid=!r.length},{immediate:!0,flush:"sync"}),l}function Bn(e,n){const t=n?Ue(Oe,void 0):void 0;function l(a){return a?Array.isArray(a)?a:[a]:[]}if(!t){const a=q([]);return{errors:a,errorMessage:T(()=>a.value[0]),setErrors:o=>{a.value=l(o)}}}const r=T(()=>t.errorBag.value[S(e)]||[]);return{errors:r,errorMessage:T(()=>r.value[0]),setErrors:a=>{t.setFieldErrorBag(S(e),l(a))}}}function K(e,n,t){return Vt(t==null?void 0:t.type)?Tn(e,n,t):Ot(e,n,t)}function Ot(e,n,t){const{initialValue:l,validateOnMount:r,bails:a,type:o,checkedValue:d,label:f,validateOnValueUpdate:g,uncheckedValue:y,standalone:c}=On(S(e),t),v=c?void 0:Ue(Oe);let M=!1;const{id:R,value:P,initialValue:se,meta:O,setState:X,errors:ve,errorMessage:_e}=Pn(e,{modelValue:l,standalone:c}),Q=()=>{O.touched=!0},z=T(()=>{let b=S(n);const A=S(v==null?void 0:v.schema);return A&&!Me(A)&&(b=Nn(A,S(e))||b),Me(b)||Se(b)||Array.isArray(b)?b:Et(b)});async function ee(b){var A,j;return v!=null&&v.validateSchema?(A=(await v.validateSchema(b)).results[S(e)])!==null&&A!==void 0?A:{valid:!0,errors:[]}:Mt(P.value,z.value,{name:S(f)||S(e),values:(j=v==null?void 0:v.values)!==null&&j!==void 0?j:{},bails:a})}async function U(){O.pending=!0,O.validated=!0;const b=await ee("validated-only");return M&&(b.valid=!0,b.errors=[]),X({errors:b.errors}),O.pending=!1,b}async function G(){const b=await ee("silent");return M&&(b.valid=!0),O.valid=b.valid,b}function Y(b){return!(b!=null&&b.mode)||(b==null?void 0:b.mode)==="force"||(b==null?void 0:b.mode)==="validated-only"?U():G()}const te=(b,A=!0)=>{const j=Pt(b);P.value=j,!g&&A&&U()};bt(()=>{if(r)return U();(!v||!v.validateSchema)&&G()});function ie(b){O.touched=b}let $;function ne(){$=pe(P,g?U:G,{deep:!0})}ne();function W(b){var A;$==null||$();const j=b&&"value"in b?b.value:se.value;X({value:E(j),initialValue:E(j),touched:(A=b==null?void 0:b.touched)!==null&&A!==void 0?A:!1,errors:(b==null?void 0:b.errors)||[]}),O.pending=!1,O.validated=!1,G(),Ee(()=>{ne()})}function le(b){P.value=b}function Ve(b){X({errors:Array.isArray(b)?b:[b]})}const de={id:R,name:e,label:f,value:P,meta:O,errors:ve,errorMessage:_e,type:o,checkedValue:d,uncheckedValue:y,bails:a,resetField:W,handleReset:()=>W(),validate:Y,handleChange:te,handleBlur:Q,setState:X,setTouched:ie,setErrors:Ve,setValue:le};if(yt(cn,de),Re(n)&&typeof S(n)!="function"&&pe(n,(b,A)=>{Le(b,A)||(O.validated?U():G())},{deep:!0}),!v)return de;v.register(de),xt(()=>{M=!0,v.unregister(de)});const Ge=T(()=>{const b=z.value;return!b||Se(b)||Me(b)||Array.isArray(b)?{}:Object.keys(b).reduce((A,j)=>{const Fe=yn(b[j]).map(me=>me.__locatorRef).reduce((me,Ie)=>{const Ne=J(v.values,Ie)||v.values[Ie];return Ne!==void 0&&(me[Ie]=Ne),me},{});return Object.assign(A,Fe),A},{})});return pe(Ge,(b,A)=>{if(!Object.keys(b).length)return;!Le(b,A)&&(O.validated?U():G())}),de}function On(e,n){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1});if(!n)return t();const l="valueProp"in n?n.valueProp:n.checkedValue;return Object.assign(Object.assign(Object.assign({},t()),n||{}),{checkedValue:l})}function Nn(e,n){if(e)return e[n]}function Tn(e,n,t){const l=t!=null&&t.standalone?void 0:Ue(Oe),r=t==null?void 0:t.checkedValue,a=t==null?void 0:t.uncheckedValue;function o(d){const f=d.handleChange,g=T(()=>{const c=S(d.value),v=S(r);return Array.isArray(c)?c.includes(v):v===c});function y(c,v=!0){var M,R;if(g.value===((R=(M=c)===null||M===void 0?void 0:M.target)===null||R===void 0?void 0:R.checked))return;let P=Pt(c);l||(P=Xe(S(d.value),S(r),S(a))),f(P,v)}return xt(()=>{g.value&&y(S(r),!1)}),Object.assign(Object.assign({},d),{checked:g,checkedValue:r,uncheckedValue:a,handleChange:y})}return o(Ot(e,n,t))}let Rn=0;function jn(e){const n=Rn++;let t=!1;const l=q({}),r=q(!1),a=q(0),o={},d=Qe(E(S(e==null?void 0:e.initialValues)||{})),{errorBag:f,setErrorBag:g,setFieldErrorBag:y}=zn(e==null?void 0:e.initialErrors),c=T(()=>D(f.value).reduce((i,p)=>{const F=f.value[p];return F&&F.length&&(i[p]=F[0]),i},{}));function v(i){const p=l.value[i];return Array.isArray(p)?p[0]:p}function M(i){return!!l.value[i]}const R=T(()=>D(l.value).reduce((i,p)=>{const F=v(p);return F&&(i[p]=S(F.label||F.name)||""),i},{})),P=T(()=>D(l.value).reduce((i,p)=>{var F;const C=v(p);return C&&(i[p]=(F=C.bails)!==null&&F!==void 0?F:!0),i},{})),se=Object.assign({},(e==null?void 0:e.initialErrors)||{}),{initialValues:O,originalInitialValues:X,setInitialValues:ve}=Dn(l,d,e==null?void 0:e.initialValues),_e=Ln(l,d,O,c),Q=e==null?void 0:e.validationSchema,z={formId:n,fieldsByPath:l,values:d,errorBag:f,errors:c,schema:Q,submitCount:a,meta:_e,isSubmitting:r,fieldArraysLookup:o,validateSchema:S(Q)?Dt:void 0,validate:A,register:Ge,unregister:b,setFieldErrorBag:y,validateField:j,setFieldValue:ie,setValues:$,setErrors:te,setFieldError:Y,setFieldTouched:ne,setTouched:W,resetForm:le,handleSubmit:Fe,stageInitialValue:Ne,unsetInitialValue:Ie,setFieldInitialValue:me};function ee(i){return Array.isArray(i)}function U(i,p){return Array.isArray(i)?i.forEach(p):p(i)}function G(i){Object.values(l.value).forEach(p=>{p&&U(p,i)})}function Y(i,p){y(i,p)}function te(i){g(i)}function ie(i,p,{force:F}={force:!1}){var C;const k=l.value[i],L=E(p);if(!k){we(d,i,L);return}if(ee(k)&&((C=k[0])===null||C===void 0?void 0:C.type)==="checkbox"&&!Array.isArray(p)){const ue=E(Xe(J(d,i)||[],p,void 0));we(d,i,ue);return}let H=p;!ee(k)&&k.type==="checkbox"&&!F&&!t&&(H=E(Xe(J(d,i),p,S(k.uncheckedValue)))),we(d,i,H)}function $(i){D(d).forEach(p=>{delete d[p]}),D(i).forEach(p=>{ie(p,i[p])}),Object.values(o).forEach(p=>p&&p.reset())}function ne(i,p){const F=l.value[i];F&&U(F,C=>C.setTouched(p))}function W(i){D(i).forEach(p=>{ne(p,!!i[p])})}function le(i){t=!0,i!=null&&i.values?(ve(i.values),$(i==null?void 0:i.values)):(ve(X.value),$(X.value)),G(p=>p.resetField()),i!=null&&i.touched&&W(i.touched),te((i==null?void 0:i.errors)||{}),a.value=(i==null?void 0:i.submitCount)||0,Ee(()=>{t=!1})}function Ve(i,p){const F=Yt(i),C=p;if(!l.value[C]){l.value[C]=F;return}const k=l.value[C];k&&!Array.isArray(k)&&(l.value[C]=[k]),l.value[C]=[...l.value[C],F]}function de(i,p){const F=p,C=l.value[F];if(C){if(!ee(C)&&i.id===C.id){delete l.value[F];return}if(ee(C)){const k=C.findIndex(L=>L.id===i.id);if(k===-1)return;if(C.splice(k,1),C.length===1){l.value[F]=C[0];return}C.length||delete l.value[F]}}}function Ge(i){const p=S(i.name);Ve(i,p),Re(i.name)&&pe(i.name,async(C,k)=>{await Ee(),de(i,k),Ve(i,C),(c.value[k]||c.value[C])&&(Y(k,void 0),j(C)),await Ee(),M(k)||We(d,k)});const F=S(i.errorMessage);F&&(se==null?void 0:se[p])!==F&&j(p),delete se[p]}function b(i){const p=S(i.name);de(i,p),Ee(()=>{M(p)||(Y(p,void 0),We(d,p))})}async function A(i){if(G(k=>k.meta.validated=!0),z.validateSchema)return z.validateSchema((i==null?void 0:i.mode)||"force");const p=await Promise.all(Object.values(l.value).map(k=>{const L=Array.isArray(k)?k[0]:k;return L?L.validate(i).then(H=>({key:S(L.name),valid:H.valid,errors:H.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),F={},C={};for(const k of p)F[k.key]={valid:k.valid,errors:k.errors},k.errors.length&&(C[k.key]=k.errors[0]);return{valid:p.every(k=>k.valid),results:F,errors:C}}async function j(i){const p=l.value[i];return p?Array.isArray(p)?p.map(F=>F.validate())[0]:p.validate():Promise.resolve({errors:[],valid:!0})}function Fe(i,p){return function(C){return C instanceof Event&&(C.preventDefault(),C.stopPropagation()),W(D(l.value).reduce((k,L)=>(k[L]=!0,k),{})),r.value=!0,a.value++,A().then(k=>{if(k.valid&&typeof i=="function")return i(E(d),{evt:C,setErrors:te,setFieldError:Y,setTouched:W,setFieldTouched:ne,setValues:$,setFieldValue:ie,resetForm:le});!k.valid&&typeof p=="function"&&p({values:E(d),evt:C,errors:k.errors,results:k.results})}).then(k=>(r.value=!1,k),k=>{throw r.value=!1,k})}}function me(i,p){we(O.value,i,E(p))}function Ie(i){We(O.value,i)}function Ne(i,p){we(d,i,p),me(i,p)}async function jt(){const i=S(Q);return i?Me(i)?await In(i,d):await An(i,d,{names:R.value,bailsMap:P.value}):{valid:!0,results:{},errors:{}}}const Lt=gn(jt,5);async function Dt(i){const p=await Lt(),F=z.fieldsByPath.value||{},C=D(z.errorBag.value);return[...new Set([...D(p.results),...D(F),...C])].reduce((L,H)=>{const ue=F[H],He=(p.results[H]||{errors:[]}).errors,Ae={errors:He,valid:!He.length};if(L.results[H]=Ae,Ae.valid||(L.errors[H]=Ae.errors[0]),!ue)return Y(H,He),L;if(U(ue,Pe=>Pe.meta.valid=Ae.valid),i==="silent")return L;const Ut=Array.isArray(ue)?ue.some(Pe=>Pe.meta.validated):ue.meta.validated;return i==="validated-only"&&!Ut||U(ue,Pe=>Pe.setState({errors:Ae.errors})),L},{valid:p.valid,results:{},errors:{}})}const zt=Fe((i,{evt:p})=>{hn(p)&&p.target.submit()});return bt(()=>{if(e!=null&&e.initialErrors&&te(e.initialErrors),e!=null&&e.initialTouched&&W(e.initialTouched),e!=null&&e.validateOnMount){A();return}z.validateSchema&&z.validateSchema("silent")}),Re(Q)&&pe(Q,()=>{var i;(i=z.validateSchema)===null||i===void 0||i.call(z,"validated-only")}),yt(Oe,z),{errors:c,meta:_e,values:d,isSubmitting:r,submitCount:a,validate:A,validateField:j,handleReset:()=>le(),resetForm:le,handleSubmit:Fe,submitForm:zt,setFieldError:Y,setErrors:te,setFieldValue:ie,setValues:$,setFieldTouched:ne,setTouched:W}}function Ln(e,n,t,l){const r={touched:"some",pending:"some",valid:"every"},a=T(()=>!Le(n,S(t)));function o(){const f=Object.values(e.value).flat(1).filter(Boolean);return D(r).reduce((g,y)=>{const c=r[y];return g[y]=f[c](v=>v.meta[y]),g},{})}const d=Qe(o());return $t(()=>{const f=o();d.touched=f.touched,d.valid=f.valid,d.pending=f.pending}),T(()=>Object.assign(Object.assign({initialValues:S(t)},d),{valid:d.valid&&!D(l.value).length,dirty:a.value}))}function Dn(e,n,t){const l=q(E(S(t))||{}),r=q(E(S(t))||{});function a(o,d=!1){l.value=E(o),r.value=E(o),d&&D(e.value).forEach(f=>{const g=e.value[f],y=Array.isArray(g)?g.some(v=>v.meta.touched):g==null?void 0:g.meta.touched;if(!g||y)return;const c=J(l.value,f);we(n,f,E(c))})}return Re(t)&&pe(t,o=>{a(o,!0)},{deep:!0}),{initialValues:l,originalInitialValues:r,setInitialValues:a}}function zn(e){const n=q({});function t(a){return Array.isArray(a)?a:a?[a]:[]}function l(a,o){if(!o){delete n.value[a];return}n.value[a]=t(o)}function r(a){n.value=D(a).reduce((o,d)=>{const f=a[d];return f&&(o[d]=t(f)),o},{})}return e&&r(e),{errorBag:n,setErrorBag:r,setFieldErrorBag:l}}const Un={components:{Icon:fe,Cleave:qt},props:{prepend:{type:String},append:{type:String},placeholder:{type:String,default:"Search"},label:{type:String},classLabel:{type:String,default:" "},classInput:{type:String,default:"classinput"},type:{type:String,default:"text"},name:{type:String},modelValue:{type:String,default:""},error:{type:String},hasicon:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1},validate:{type:String},msgTooltip:{type:Boolean,default:!1},description:{type:String},prependIcon:{type:String},appendIcon:{type:String},merged:{type:Boolean,default:!1},isMask:{type:Boolean,default:!1},options:{type:Object,default:()=>({creditCard:!0,delimiter:"-"})}},data(){return{types:this.type}},methods:{toggleType(){this.types=this.types==="text"?"password":"text"}}},qn=["for"],$n={key:0,class:"flex-none input-group-addon"},Gn={key:0,class:"input-group-text inline-block h-full"},Hn={key:1,class:"inline-block h-full prepend-slot"},Yn={class:"flex-1"},Wn=["type","name","placeholder","value","error","id","readonly","disabled","validate"],Zn={key:2,class:"flex text-xl absolute ltr:right-[14px] rtl:left-[14px] top-1/2 -translate-y-1/2"},Kn={key:0,class:"text-danger-500"},Jn={key:1,class:"text-success-500"},Xn={key:1,class:"flex-none input-group-addon right"},Qn={key:0,class:"input-group-text inline-block h-full"},el={key:1,class:"inline-block h-full append-slot"},tl={key:3,class:"block text-slate-400 font-light leading-4 text-xs mt-2"};function nl(e,n,t,l,r,a){const o=x("Icon"),d=x("cleave");return u(),m("div",{class:V(`${t.horizontal?"flex":""}  ${t.merged?"merged":""}`)},[t.label?(u(),m("label",{key:0,class:V(`${t.classLabel} ${t.horizontal?"flex-0 mr-6 md:w-[100px] w-[60px] break-words":""}  ltr:inline-block rtl:block  input-label `),for:t.name},I(t.label),11,qn)):_("",!0),s("div",{class:V(["flex items-stretch inputGroup",`
    
    ${t.append||t.appendIcon?"has-append":""}
    ${t.prepend||t.prependIcon?"has-prepend":""}

    ${t.error?"is-invalid":""}  ${t.validate?"is-valid":""}
    
    ${e.$slots.prepend?"has-prepend-slot":""}
    ${e.$slots.append?"has-append-slot":""}
    ${t.horizontal?"flex-1":""}
    `])},[t.prepend||t.prependIcon||e.$slots.prepend?(u(),m("span",$n,[t.prepend||t.prependIcon?(u(),m("span",Gn,[je(I(t.prepend)+" ",1),t.prependIcon?(u(),ae(o,{key:0,icon:t.prependIcon},null,8,["icon"])):_("",!0)])):_("",!0),e.$slots.prepend?(u(),m("span",Hn,[he(e.$slots,"prepend")])):_("",!0)])):_("",!0),s("div",Yn,[s("div",{class:V(["relative fromGroup2",`${t.error?"has-error":""}  ${t.validate?"is-valid":""}`])},[t.isMask?_("",!0):(u(),m("input",{key:0,type:r.types,name:t.name,placeholder:t.placeholder,class:V(`${t.classInput} input-group-control block w-full focus:outline-none h-[40px] `),value:t.modelValue,onInput:n[0]||(n[0]=f=>e.$emit("update:modelValue",f.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate},null,42,Wn)),t.isMask?(u(),ae(d,{key:1,class:V(`${t.classInput} cleave input-group-control block w-full focus:outline-none h-[40px] `),name:t.name,placeholder:t.placeholder,value:t.modelValue,onInput:n[1]||(n[1]=f=>e.$emit("update:modelValue",f.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate,options:t.options,modelValue:"modelValue"},null,8,["class","name","placeholder","value","error","id","readonly","disabled","validate","options"])):_("",!0),t.error||t.validate?(u(),m("div",Zn,[t.error?(u(),m("span",Kn,[h(o,{icon:"heroicons-outline:information-circle"})])):_("",!0),t.validate?(u(),m("span",Jn,[h(o,{icon:"bi:check-lg"})])):_("",!0)])):_("",!0)],2)]),t.append||t.appendIcon||e.$slots.append?(u(),m("span",Xn,[t.append||t.appendIcon?(u(),m("span",Qn,[je(I(t.append)+" ",1),t.appendIcon?(u(),ae(o,{key:0,icon:t.appendIcon},null,8,["icon"])):_("",!0)])):_("",!0),e.$slots.append?(u(),m("span",el,[he(e.$slots,"append")])):_("",!0)])):_("",!0)],2),t.error?(u(),m("span",{key:1,class:V(["mt-2",t.msgTooltip?" inline-block bg-danger-500 text-white text-[10px] px-2 py-1 rounded":" text-danger-500 block text-sm"])},I(t.error),3)):_("",!0),t.validate?(u(),m("span",{key:2,class:V(["mt-2",t.msgTooltip?" inline-block bg-success-500 text-white text-[10px] px-2 py-1 rounded":" text-success-500 block text-sm"])},I(t.validate),3)):_("",!0),t.description?(u(),m("span",tl,I(t.description),1)):_("",!0)],2)}const Nt=B(Un,[["render",nl]]);const ll={props:{title:{type:String,default:"Tooltip on top"},content:{type:String,default:"Tooltip on top!"},btnClass:{type:String,default:"btn-outline-dark"},placement:{type:String,default:"top"},arrow:{type:Boolean,default:!1},theme:{type:String,default:""},animation:{type:String,default:"scale"},trigger:{type:String,default:"mouseenter"},interactive:{type:Boolean,default:!1},delay:{type:Number,default:0},duration:{type:Number,default:200},allowHTML:{type:Boolean,default:!1},maxWidth:{type:String,default:""},distance:{type:String,default:"1rem"},offset:{type:Array,default:()=>[0,0]}}},rl=["content"],al={key:1,class:"inline-block"};function ol(e,n,t,l,r,a){const o=x("tippy"),d=Wt("tippy");return u(),m(oe,null,[e.$slots.default?_("",!0):De((u(),m("button",{key:0,content:t.content,class:V(["btn",t.btnClass])},[je(I(t.title),1)],10,rl)),[[d,{placement:t.placement,arrow:t.arrow,theme:t.theme,animation:t.animation,trigger:t.trigger,interactive:t.interactive,delay:t.delay,duration:t.duration,allowHTML:t.allowHTML,distance:t.distance,offset:t.offset,maxWidth:t.maxWidth}]]),e.$slots.default?(u(),ae(o,{key:1,placement:t.placement,arrow:t.arrow,theme:t.theme,animation:t.animation,trigger:t.trigger,interactive:t.interactive,delay:t.delay,duration:t.duration,allowHTML:t.allowHTML,maxWidth:t.maxWidth,distance:t.distance,offset:t.offset},{content:w(()=>[he(e.$slots,"default")]),default:w(()=>[e.$slots.button?_("",!0):(u(),m("button",{key:0,class:V(["btn",t.btnClass])},I(t.title),3)),e.$slots.button?(u(),m("button",al,[he(e.$slots,"button")])):_("",!0)]),_:3},8,["placement","arrow","theme","animation","trigger","interactive","delay","duration","allowHTML","maxWidth","distance","offset"])):_("",!0)],64)}const lt=B(ll,[["render",ol]]);const sl={props:{placeholder:{type:String,default:"Select Option"},label:{type:String},classLabel:{type:String,default:" "},classInput:{type:String,default:"classinput"},name:{type:String},modelValue:{default:""},error:{type:String},isReadonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1},validate:{type:String},msgTooltip:{type:Boolean,default:!1},formatter:{type:Function,default:e=>e},description:{type:String},size:{type:String},multiple:{type:Boolean,default:!1},options:{type:Array,default:()=>[{value:"",label:"Select Option"},{value:"",label:"Select Option2"}]}}},il=["for"],dl={class:"relative"},ul=["name","value","error","id","readonly","disabled","validate","formatter","size","multiple"],cl={value:"",disabled:"",selected:""},fl=["value"],ml={key:3,class:"block text-secondary-500 font-light leading-4 text-xs mt-2"};function pl(e,n,t,l,r,a){return u(),m("div",{class:V(["fromGroup relative",`${t.error?"has-error":""}  ${t.horizontal?"flex":""}  ${t.validate?"is-valid":""} `])},[t.label?(u(),m("label",{key:0,class:V(`${t.classLabel} inline-block input-label `),for:t.name},I(t.label),11,il)):_("",!0),s("div",dl,[s("select",{name:t.name,class:V(`${t.classInput} input-control block w-full focus:outline-none min-h-[40px] `),value:t.modelValue,onInput:n[0]||(n[0]=o=>e.$emit("update:modelValue",o.target.value)),error:t.error,id:t.name,readonly:t.isReadonly,disabled:t.disabled,validate:t.validate,formatter:t.formatter,size:t.size,multiple:t.multiple},[s("option",cl,I(t.placeholder),1),!e.$slots.default&&t.options?(u(!0),m(oe,{key:0},ge(t.options,(o,d)=>(u(),m("option",{value:o.value,key:d},I(o.label),9,fl))),128)):_("",!0),e.$slots.default?he(e.$slots,"default",{key:1},void 0,!0):_("",!0)],42,ul)]),t.error?(u(),m("span",{key:1,class:V(["mt-2",t.msgTooltip?" inline-block bg-danger-500 text-white text-[10px] px-2 py-1 rounded":" text-danger-500 block text-sm"])},I(t.error),3)):_("",!0),t.validate?(u(),m("span",{key:2,class:V(["mt-2",t.msgTooltip?" inline-block bg-success-500 text-white text-[10px] px-2 py-1 rounded":" text-success-500 block text-sm"])},I(t.validate),3)):_("",!0),t.description?(u(),m("span",ml,I(t.description),1)):_("",!0)],2)}const Tt=B(sl,[["render",pl],["__scopeId","data-v-33d05f57"]]);const hl=kt({name:"Pagination",components:{Icon:fe,Select:Tt},props:{options:{type:Array,default:()=>[{}]},enableText:{type:Boolean,default:!1},enableInput:{type:Boolean,default:!1},enableSelect:{type:Boolean,default:!1},enableSearch:{type:Boolean,default:!1},pageChanged:{type:Function},perPageChanged:{type:Function},current:{type:Number,default:1},total:{type:Number,default:0},perPage:{type:Number,default:10},pageRange:{type:Number,default:2},textBeforeInput:{type:String,default:"Go to page"},textAfterInput:{type:String,default:"Go"},paginationClass:{type:String,default:"default"},searchClasss:{type:String,default:"default"},wrapperClass:{type:String,default:"justify-between"}},data(){return{input:"",input2:null}},methods:{hasFirst:function(){return this.rangeStart!==1},hasLast:function(){return this.rangeEnd<this.totalPages},hasPrev:function(){return this.current>1},hasNext:function(){return this.current<this.totalPages},changePage:function(e){e>0&&e<=this.totalPages&&this.$emit("page-changed",e),this.pageChanged&&this.pageChanged({currentPage:e})},customPerPageChange(e){this.perPageChanged({currentPerPage:e})}},computed:{pages:function(){for(var e=[],n=this.rangeStart;n<=this.rangeEnd;n++)e.push(n);return e},rangeStart:function(){var e=this.current-this.pageRange;return e>0?e:1},rangeEnd:function(){var e=this.current+this.pageRange;return e<this.totalPages?e:this.totalPages},totalPages:function(){return Math.ceil(this.total/this.perPage)},nextPage:function(){return this.current+1},prevPage:function(){return this.current-1}}}),gl={key:0,class:"flex items-center space-x-2 rtl:space-x-reverse"},vl={key:1,class:"flex items-center"},_l={class:"text-sm text-slate-500 inline-block ltr:ml-2 rtl:mr-2"},bl={class:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180"},yl=["disabled"],xl={key:1,class:"text-sm inline-block rtl:-rotate-180"},kl={key:0,class:""},wl={key:1,class:"text-slate-600 dark:text-slate-300"},Sl=["onClick"],Cl={class:""},Vl={key:2,class:"text-slate-600 dark:text-slate-300"},Fl={key:3,class:""},Il={class:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180"},Al=["disabled"],Pl={key:1,class:"text-sm rtl:-rotate-180 inline-block"};function El(e,n,t,l,r,a){const o=x("Select"),d=x("Icon");return u(),m("div",{class:V(["md:flex md:space-y-0 space-y-5",e.wrapperClass])},[e.enableSearch?(u(),m("div",{key:0,class:V(["flex items-center space-x-4 rtl:space-x-reverse",e.searchClasss])},[e.enableSearch&&e.enableInput?(u(),m("div",gl,[De(s("input",{"onUpdate:modelValue":n[0]||(n[0]=f=>e.input=f),class:"form-control w-9 overflow-auto h-9",type:"text",placeholder:"0"},null,512),[[Zt,e.input,void 0,{number:!0}]]),s("div",{onClick:n[1]||(n[1]=re(f=>e.changePage(e.input),["prevent"])),class:"flex-0 cursor-pointer text-sm h-9 w-9 bg-slate-900 text-white flex items-center justify-center rounded"}," Go ")])):_("",!0),e.enableSearch&&e.enableSelect?(u(),m("div",vl,[h(o,{modelValue:e.input2,"onUpdate:modelValue":n[2]||(n[2]=f=>e.input2=f),modelModifiers:{number:!0},onChange:n[3]||(n[3]=f=>e.changePage(e.input2)),placeholder:"Go",classInput:" w-[60px] h-9 ",options:e.options},null,8,["modelValue","options"]),s("span",_l," of "+I(e.perPage)+" entries",1)])):_("",!0)],2)):_("",!0),s("ul",{class:V(["pagination",e.paginationClass])},[s("li",bl,[s("button",{onClick:n[4]||(n[4]=re(f=>e.changePage(e.prevPage),["prevent"])),disabled:e.current===1,class:V(e.current===1?" opacity-50 cursor-not-allowed":"")},[e.enableText?_("",!0):(u(),ae(d,{key:0,icon:"heroicons-outline:chevron-left"})),e.enableText?(u(),m("span",xl,"Previous")):_("",!0)],10,yl)]),e.hasFirst()?(u(),m("li",kl,[s("button",{onClick:n[5]||(n[5]=re(f=>e.changePage(1),["prevent"]))},n[8]||(n[8]=[s("div",null,[s("span",null," 1 ")],-1)]))])):_("",!0),e.hasFirst()?(u(),m("li",wl,"...")):_("",!0),(u(!0),m(oe,null,ge(e.pages,(f,g)=>(u(),m("li",{class:"",key:g},[s("button",{onClick:re(y=>e.changePage(f),["prevent"])},[s("div",{class:V([{active:e.current===f},""])},[s("span",Cl,I(f),1)],2)],8,Sl)]))),128)),e.hasLast()?(u(),m("li",Vl,"...")):_("",!0),e.hasLast()?(u(),m("li",Fl,[s("button",{onClick:n[6]||(n[6]=re(f=>e.changePage(e.totalPages),["prevent"]))},[s("div",null,[s("span",null,I(e.totalPages),1)])])])):_("",!0),s("li",Il,[s("button",{onClick:n[7]||(n[7]=re(f=>e.changePage(e.nextPage),["prevent"])),disabled:e.current===e.totalPages,class:V(e.current===e.totalPages?" opacity-50 cursor-not-allowed":"")},[e.enableText?_("",!0):(u(),ae(d,{key:0,icon:"heroicons-outline:chevron-right"})),e.enableText?(u(),m("span",Pl,"Next")):_("",!0)],10,Al)])],2)],2)}const rt=B(hl,[["render",El],["__scopeId","data-v-39e5551c"]]);et();const qe=wt("list",{state:()=>({loading:!1,list:[],total:0,current:1,per_page:0}),actions:{async List(e){try{this.loading=!0,this.list=[];const t=(await this.axios.get(e+"?page="+this.current)).data;this.list=t.data,this.total=t.meta.total,this.current=t.meta.current_page,this.per_page=t.meta.per_page,this.loading=!1}catch{}},async Delete(e,n){try{this.loading=!0,(await this.axios.delete(e+"/"+n)).data.status==200&&this.List(e)}catch{}}}});const be=qe(),Ml={components:{Pagination:rt,Icon:fe,Tooltip:lt,Swal:ce},created(){be.List(this.modules)},methods:{changePage(e){be.current!=e.currentPage&&(be.current=e.currentPage,be.List(this.modules))},del(e){ce.fire({title:"Do you want to delete this "+this.$route.params.module+" ?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&be.Delete(this.modules,e)})}},data(){return{modules:this.$route.params.module,listStore:be,columns:[{label:"No.",field:"incident_no"},{label:"Incident type",field:"incident_type.name"},{label:"Incident status",field:"incident_status.name"},{label:"Created time",field:"created_at"},{label:"SLA status",field:"quantity"},{label:"Dispatch to",field:"amount"},{label:"User",field:"status"},{label:"Action",field:"action"}]}}},Bl={key:0},Ol={class:"flex space-x-3 justify-center rtl:space-x-reverse"},Nl={class:"action-btn"},Tl={class:"action-btn"},Rl=["onClick"],jl={class:"py-4 px-3 flex justify-center"};function Ll(e,n,t,l,r,a){const o=x("Icon"),d=x("router-link"),f=x("Tooltip"),g=x("Pagination"),y=x("vue-good-table");return u(),m("div",null,[h(y,{isLoading:r.listStore.loading,columns:r.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:r.listStore.list,"pagination-options":{enabled:!0,perPage:e.perpage},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":w(c=>[c.column.field=="action"?(u(),m("span",Bl,[s("div",Ol,[h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/detail/${c.row.id}`},{default:w(()=>[s("div",Nl,[h(o,{icon:"heroicons:eye"})])]),_:2},1032,["to"])]),default:w(()=>[n[0]||(n[0]=s("span",null," View",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/edit/${c.row.id}`},{default:w(()=>[s("div",Tl,[h(o,{icon:"heroicons:pencil-square"})])]),_:2},1032,["to"])]),default:w(()=>[n[1]||(n[1]=s("span",null," Edit",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"danger-500"},{button:w(()=>[s("div",{class:"action-btn text-red-500",onClick:v=>a.del(c.row.id)},[h(o,{icon:"heroicons:trash"})],8,Rl)]),default:w(()=>[n[2]||(n[2]=s("span",null,"Delete",-1))]),_:2},1024)])])):_("",!0)]),"pagination-bottom":w(c=>[s("div",jl,[h(g,{total:r.listStore.total,current:r.listStore.current,"per-page":r.listStore.per_page,pageRange:e.pageRange,pageChanged:a.changePage,perPageChanged:c.perPageChanged},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","rows","pagination-options"])])}const Dl=B(Ml,[["render",Ll],["__scopeId","data-v-714d3211"]]);const ye=qe(),zl={components:{Pagination:rt,Icon:fe,Tooltip:lt,Swal:ce},created(){ye.List(this.modules)},methods:{changePage(e){ye.current!=e.currentPage&&(ye.current=e.currentPage,ye.List(this.modules))},del(e){ce.fire({title:"Do you want to delete this "+this.$route.params.module+" ?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&ye.Delete(this.modules,e)})}},data(){return{modules:this.$route.params.module,listStore:ye,columns:[{label:"Resources Name",field:"resources_name"},{label:"Resources Type",field:"resources_type.name"},{label:"Action",field:"action"}]}}},Ul={key:0},ql={class:"flex space-x-3 justify-center rtl:space-x-reverse"},$l={class:"action-btn"},Gl={class:"action-btn"},Hl=["onClick"],Yl={class:"py-4 px-3 flex justify-center"};function Wl(e,n,t,l,r,a){const o=x("Icon"),d=x("router-link"),f=x("Tooltip"),g=x("Pagination"),y=x("vue-good-table");return u(),m("div",null,[h(y,{isLoading:r.listStore.loading,columns:r.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:r.listStore.list,"pagination-options":{enabled:!0,perPage:e.perpage},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":w(c=>[c.column.field=="action"?(u(),m("span",Ul,[s("div",ql,[h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/detail/${c.row.id}`},{default:w(()=>[s("div",$l,[h(o,{icon:"heroicons:eye"})])]),_:2},1032,["to"])]),default:w(()=>[n[0]||(n[0]=s("span",null," View",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/edit/${c.row.id}`},{default:w(()=>[s("div",Gl,[h(o,{icon:"heroicons:pencil-square"})])]),_:2},1032,["to"])]),default:w(()=>[n[1]||(n[1]=s("span",null," Edit",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"danger-500"},{button:w(()=>[s("div",{class:"action-btn text-red-500",onClick:v=>a.del(c.row.id)},[h(o,{icon:"heroicons:trash"})],8,Hl)]),default:w(()=>[n[2]||(n[2]=s("span",null,"Delete",-1))]),_:2},1024)])])):_("",!0)]),"pagination-bottom":w(c=>[s("div",Yl,[h(g,{total:r.listStore.total,current:r.listStore.current,"per-page":r.listStore.per_page,pageRange:e.pageRange,pageChanged:a.changePage,perPageChanged:c.perPageChanged},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","rows","pagination-options"])])}const Zl=B(zl,[["render",Wl],["__scopeId","data-v-7e4bb64b"]]),ct=[{label:"No.",field:"incident_no"},{label:"Incident type",field:"incident_types.label"},{label:"Incident status",field:"incident_statuses.label"},{label:"Created time",field:"created_at"},{label:"SLA status",field:"quantity"},{label:"Dispatch to",field:"amount"},{label:"User",field:"status"},{label:"Action",field:"action"}],ft=[{label:"Resources Name",field:"resources_name"},{label:"Resources Type",field:"resources_types.label"},{label:"Action",field:"action"}],mt=[{label:"First Name",field:"firstname"},{label:"Last Name",field:"lastname"},{label:"Action",field:"action"}],Kl=[{label:"Agency Name",field:"agency_name"},{label:"Action",field:"action"}],Jl=[{label:"Firstname",field:"firstname"},{label:"Action",field:"action"}],pt=[{label:"Pre Plan Name",field:"pre_plan_name"},{label:"Action",field:"action"}];const xe=qe(),Xl={components:{Incident:Dl,Resources:Zl,Card:Be,Pagination:rt,Swal:ce,Tooltip:lt,Icon:fe},created(){console.log(this.$route),this.$watch(()=>this.$route.params.module,e=>{xe.List(e),this.Columns(e)})},mounted(){xe.List(this.$route.params.module),this.Columns(this.$route.params.module)},data(){return{modules:"",listStore:xe,columns:[],incident_column:ct,resources_column:ft,contacts_column:mt,preplan_column:pt}},computed:{Modules(){switch(this.$route.params.module){case"incidents":this.modules="Incident";break;case"resources":this.modules="Resources";break;case"contacts":this.modules="Contacts";break;case"agencies":this.modules="Agency";break;case"responders":this.modules="Responder";break;case"pre-plans":this.modules="PrePlan";break}return this.modules}},methods:{changePage(e){xe.current=e,xe.List(this.$route.params.module)},Columns(e){switch(e){case"incidents":this.columns=ct;break;case"resources":this.columns=ft;break;case"contacts":this.columns=mt;break;case"agencies":this.columns=Kl;break;case"responders":this.columns=Jl;break;case"pre-plans":this.columns=pt;break}},del(e){ce.fire({title:"Do you want to delete this "+this.$route.params.module+" ?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&xe.Delete(this.$route.params.module,e)})}}},Ql={key:0},er={class:"flex space-x-3 justify-center rtl:space-x-reverse"},tr={class:"action-btn"},nr={class:"action-btn"},lr=["onClick"],rr={class:"py-4 px-3 flex justify-center"};function ar(e,n,t,l,r,a){const o=x("Icon"),d=x("router-link"),f=x("Tooltip"),g=x("Pagination"),y=x("vue-good-table"),c=x("Card");return u(),m("div",null,[h(c,null,{default:w(()=>[h(y,{isLoading:r.listStore.loading,columns:r.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:r.listStore.list,"pagination-options":{enabled:!0},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":w(v=>[v.column.field=="action"?(u(),m("span",Ql,[s("div",er,[h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/detail/${v.row.id}`},{default:w(()=>[s("div",tr,[h(o,{icon:"heroicons:eye"})])]),_:2},1032,["to"])]),default:w(()=>[n[0]||(n[0]=s("span",null," View",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"dark"},{button:w(()=>[h(d,{to:`${this.$route.params.module}/edit/${v.row.id}`},{default:w(()=>[s("div",nr,[h(o,{icon:"heroicons:pencil-square"})])]),_:2},1032,["to"])]),default:w(()=>[n[1]||(n[1]=s("span",null," Edit",-1))]),_:2},1024),h(f,{placement:"top",arrow:"",theme:"danger-500"},{button:w(()=>[s("div",{class:"action-btn text-red-500",onClick:M=>a.del(v.row.id)},[h(o,{icon:"heroicons:trash"})],8,lr)]),default:w(()=>[n[2]||(n[2]=s("span",null,"Delete",-1))]),_:2},1024)])])):_("",!0)]),"pagination-bottom":w(v=>[s("div",rr,[h(g,{total:r.listStore.total,current:r.listStore.current,"per-page":r.listStore.per_page,onPageChanged:a.changePage,perPageChanged:v.perPageChanged},null,8,["total","current","per-page","onPageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","rows"])]),_:1})])}const or=B(Xl,[["render",ar],["__scopeId","data-v-f6d66408"]]),sr={components:{Icon:fe,TransitionRoot:nn,TransitionChild:ln,Dialog:rn,DialogPanel:an},props:{centered:{type:Boolean,default:!1},title:{type:String,default:"Basic Modal"},label:{type:String,default:"Basic Modal"},disableBackdrop:{type:Boolean,default:!1},noFade:{type:Boolean,default:!1},themeClass:{type:String,default:"bg-slate-900 dark:bg-slate-800 dark:border-b dark:border-slate-700"},sizeClass:{type:String,default:"max-w-xl"},scrollContent:{type:Boolean,default:!1},activeModal:{type:Boolean,default:!1}},setup(e,{emit:n}){return{close:()=>{n("close")}}}},ir={key:0,class:"fixed inset-0 bg-slate-900/50 backdrop-filter backdrop-blur-sm"},dr={class:"fixed inset-0 overflow-y-auto"},ur={key:0,class:"capitalize leading-6 tracking-wider font-medium text-base text-white"},cr={key:0,class:"px-4 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function fr(e,n,t,l,r,a){const o=x("TransitionChild"),d=x("Icon"),f=x("DialogPanel"),g=x("Dialog"),y=x("TransitionRoot");return u(),ae(y,{show:t.activeModal,as:"template"},{default:w(()=>[h(g,{as:"div",class:"relative z-[99999]"},{default:w(()=>[h(o,{enter:t.noFade?"":"duration-300 ease-out","enter-from":t.noFade?"":"opacity-0","enter-to":t.noFade?"":"opacity-100",leave:t.noFade?"":"duration-200 ease-in","leave-from":t.noFade?"":"opacity-100","leave-to":t.noFade?"":"opacity-0"},{default:w(()=>[t.disableBackdrop===!1?(u(),m("div",ir)):_("",!0)]),_:1},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"]),s("div",dr,[s("div",{class:V(["flex min-h-full justify-center text-center p-6",t.centered?"items-center":"items-start "])},[h(o,{as:"template",enter:t.noFade?"":"duration-300  ease-out","enter-from":t.noFade?"":"opacity-0 scale-95","enter-to":t.noFade?"":"opacity-100 scale-100",leave:t.noFade?"":"duration-200 ease-in","leave-from":t.noFade?"":"opacity-100 scale-100","leave-to":t.noFade?"":"opacity-0 scale-95"},{default:w(()=>[h(f,{class:V(["w-full transform overflow-hidden rounded-md bg-white dark:bg-slate-800 text-left align-middle shadow-xl transition-all",t.sizeClass])},{default:w(()=>[s("div",{class:V(["relative overflow-hidden py-4 px-5 text-white flex justify-between",t.themeClass])},[t.title?(u(),m("h2",ur,I(t.title),1)):_("",!0),s("button",{onClick:n[0]||(n[0]=(...c)=>l.close&&l.close(...c)),class:"text-[22px]"},[h(d,{icon:"heroicons-outline:x"})])],2),s("div",{class:V(["px-6 py-8",t.scrollContent?"overflow-y-auto max-h-[400px]":""])},[he(e.$slots,"default")],2),e.$slots.footer?(u(),m("div",cr,[he(e.$slots,"footer")])):_("",!0)]),_:3},8,["class"])]),_:3},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"])],2)])]),_:3})]),_:3},8,["show"])}const Rt=B(sr,[["render",fr]]),mr={components:{Modal:Rt},props:{openFilterModal:{type:Boolean,default:!1}},methods:{closeModal(){this.$emit("closeFilterModal",!1)}}};function pr(e,n,t,l,r,a){const o=x("Modal");return u(),m("div",null,[h(o,{activeModal:t.openFilterModal,onClose:a.closeModal,title:"Filter"},null,8,["activeModal","onClose"])])}const hr=B(mr,[["render",pr]]),gr={components:{Button:tt,Icon:fe,Textinput:_t,InputGroup:Nt,Textarea:en},setup(){let e=[{id:1,title:"Account Details"},{id:2,title:"Personal info-500"},{id:3,title:"Address"},{id:4,title:"Social Links"}];const n=et();let t=q(0),l=Te().shape({username:Z().required(" User name is required"),fullname:Z().required("Full name is required"),email:Z().email("Email is not valid").required("Email is required"),phone:Z().required("Phone number is required").matches(/^[0-9]{12}$/,"Phone number is not valid"),password:Z().required("Password is required").min(8,"Password must be at least 8 characters"),confirmpass:Z().required("Confirm Password is required").oneOf([on("password"),null],"Passwords must match")}),r=Te().shape({fname:Z().required(" First name is required"),lname:Z().required(" Last name is required")}),a=Te().shape({address:Z().required(" Address is required")});const o=/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_-]+(\.[a-zA-Z]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)?$/gm;let d=Te().shape({fburl:Z().required("Facebook url is required").matches(o,"Facebook url is not valid")}),f=T(()=>{switch(t.value){case 0:return l;case 1:return r;case 2:return a;case 3:return d;default:return l}});const{handleSubmit:g}=jn({validationSchema:f,keepValuesOnUnmount:!0}),{value:y,errorMessage:c}=K("email"),{value:v,errorMessage:M}=K("username"),{value:R,errorMessage:P}=K("fullname"),{value:se,errorMessage:O}=K("phone"),{value:X,errorMessage:ve}=K("password"),{value:_e,errorMessage:Q}=K("confirmpass"),{value:z,errorMessage:ee}=K("fname"),{value:U,errorMessage:G}=K("lname"),{value:Y,errorMessage:te}=K("address"),{value:ie,errorMessage:$}=K("fburl"),ne=g(()=>{let le=e.length;t.value===le-1?(t=le-1,n.success-500("Form Submited",{timeout:2e3})):t.value++});return{fullname:R,fullnameError:P,phone:se,phoneError:O,password:X,passwordError:ve,confirmpass:_e,confirmpassError:Q,fname:z,fnameError:ee,lname:U,lnameError:G,address:Y,addressError:te,email:y,emailError:c,username:v,usernameError:M,submit:ne,steps:e,stepNumber:t,prev:()=>{t.value--},fburl:ie,fbError:$}}},vr={class:"flex z-[5] items-center relative justify-center md:mx-8"},_r={key:0},br={key:1,class:"text-3xl"},yr={class:"w-max"},xr={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},kr={key:0},wr={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},Sr={key:1},Cr={class:"grid md:grid-cols-2 grid-cols-1 gap-5"},Vr={key:2},Fr={class:"grid grid-cols-1 gap-5"},Ir={key:3},Ar={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"};function Pr(e,n,t,l,r,a){const o=x("Icon"),d=x("Textinput"),f=x("InputGroup"),g=x("Textarea"),y=x("Button");return u(),m("div",null,[s("div",vr,[(u(!0),m(oe,null,ge(l.steps,(c,v)=>(u(),m("div",{class:"relative z-[1] items-center item flex flex-start flex-1 last:flex-none group",key:v},[s("div",{class:V([`   ${l.stepNumber>=v?"bg-slate-900 text-white ring-slate-900 ring-offset-2 dark:ring-offset-slate-500 dark:bg-slate-900 dark:ring-slate-900":"bg-white ring-slate-900 ring-opacity-70  text-slate-900 dark:text-slate-300 dark:bg-slate-600 dark:ring-slate-600 text-opacity-70"}`,"transition duration-150 icon-box md:h-12 md:w-12 h-7 w-7 rounded-full flex flex-col items-center justify-center relative z-[66] ring-1 md:text-lg text-base font-medium"])},[l.stepNumber<=v?(u(),m("span",_r,I(v+1),1)):(u(),m("span",br,[h(o,{icon:"bx:check-double"})]))],2),s("div",{class:V(["absolute top-1/2 h-[2px] w-full",l.stepNumber>=v?"bg-slate-900 dark:bg-slate-900":"bg-[#E0EAFF] dark:bg-slate-700"])},null,2),s("div",{class:V(["absolute top-full text-base md:leading-6 mt-3 transition duration-150 md:opacity-100 opacity-0 group-hover:opacity-100",l.stepNumber>=v?" text-slate-900 dark:text-slate-300":"text-slate-500 dark:text-slate-300 dark:text-opacity-40"])},[s("span",yr,I(c.title),1)],2)]))),128))]),s("div",xr,[s("form",{onSubmit:n[11]||(n[11]=re((...c)=>l.submit&&l.submit(...c),["prevent"]))},[l.stepNumber===0?(u(),m("div",kr,[s("div",wr,[n[12]||(n[12]=s("div",{class:"lg:col-span-3 md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Account Details ")],-1)),h(d,{label:"Username",type:"text",placeholder:"Type your User Name",name:"userName",modelValue:l.username,"onUpdate:modelValue":n[0]||(n[0]=c=>l.username=c),error:l.usernameError},null,8,["modelValue","error"]),h(d,{label:"Full name",type:"text",placeholder:"Full name",name:"fullname",modelValue:l.fullname,"onUpdate:modelValue":n[1]||(n[1]=c=>l.fullname=c),error:l.fullnameError},null,8,["modelValue","error"]),h(d,{label:"Email",type:"email",placeholder:"Type your email",name:"emil",modelValue:l.email,"onUpdate:modelValue":n[2]||(n[2]=c=>l.email=c),error:l.emailError},null,8,["modelValue","error"]),h(f,{label:"Phone Number",type:"text",prepend:"MY (+6)",placeholder:"Phone Number",name:"phoneNumber",modelValue:l.phone,"onUpdate:modelValue":n[3]||(n[3]=c=>l.phone=c),error:l.phoneError},null,8,["modelValue","error"]),h(d,{label:"Password",type:"password",placeholder:"8+ characters, 1 capitat letter ",name:"multi_password",modelValue:l.password,"onUpdate:modelValue":n[4]||(n[4]=c=>l.password=c),error:l.passwordError,hasicon:""},null,8,["modelValue","error"]),h(d,{label:"Confirm Password",type:"password",placeholder:"Password",name:"multi_password2",modelValue:l.confirmpass,"onUpdate:modelValue":n[5]||(n[5]=c=>l.confirmpass=c),error:l.confirmpassError,hasicon:""},null,8,["modelValue","error"])])])):_("",!0),l.stepNumber===1?(u(),m("div",Sr,[s("div",Cr,[n[13]||(n[13]=s("div",{class:"md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Personal info-500 ")],-1)),h(d,{label:"First name",type:"text",placeholder:"First name",name:"firstname",modelValue:l.fname,"onUpdate:modelValue":n[6]||(n[6]=c=>l.fname=c),error:l.fnameError},null,8,["modelValue","error"]),h(d,{label:"Last name",type:"text",placeholder:"Last name",name:"lasttname",modelValue:l.lname,"onUpdate:modelValue":n[7]||(n[7]=c=>l.lname=c),error:l.lnameError},null,8,["modelValue","error"])])])):_("",!0),l.stepNumber===2?(u(),m("div",Vr,[s("div",Fr,[n[14]||(n[14]=s("div",{class:""},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Address ")],-1)),h(g,{label:"Address",type:"text",placeholder:"Write Address",name:"address",modelValue:l.address,"onUpdate:modelValue":n[8]||(n[8]=c=>l.address=c),error:l.addressError},null,8,["modelValue","error"])])])):_("",!0),l.stepNumber===3?(u(),m("div",Ir,[s("div",Ar,[n[15]||(n[15]=s("div",{class:"lg:col-span-3 md:col-span-2 col-span-1"},[s("h4",{class:"text-base text-slate-800 dark:text-slate-300 mb-6"}," Enter Your Address ")],-1)),h(d,{label:"Facebook",type:"text",placeholder:"https://www.facebook.com/profile",name:"fburl",modelValue:l.fburl,"onUpdate:modelValue":n[9]||(n[9]=c=>l.fburl=c),error:l.fbError},null,8,["modelValue","error"])])])):_("",!0),s("div",{class:V(["mt-10",l.stepNumber>0?"flex justify-between":" text-right"])},[this.stepNumber!==0?(u(),ae(y,{key:0,onClick:n[10]||(n[10]=re(c=>l.prev(),["prevent"])),text:"prev",btnClass:"btn-dark"})):_("",!0),h(y,{text:l.stepNumber!==this.steps.length-1?"next":"submit",btnClass:"btn-dark"},null,8,["text"])],2)],32)])])}const Er=B(gr,[["render",Pr]]);const Mr={name:"Fileinput",props:{name:{type:String,default:"name"},accept:{type:String,default:""},multiple:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},placeholder:{type:String,default:"Choose a file or drop it here..."},label:{type:String,default:"Browse"},classInput:{type:String,default:""},filenametag:{type:Boolean,default:!1}},data(){return{selectedFile:null,url:null,multipleFiles:[],multipleurls:[]}},methods:{onChange(e){this.selectedFile=e.target.files[0],this.url=URL.createObjectURL(this.selectedFile),this.multipleFiles=Array.from(e.target.files),this.multipleFiles.forEach(n=>{this.multipleurls.push(URL.createObjectURL(n))}),this.$emit("input",this.selectedFile)}}},Br={class:"filegroup"},Or=["for"],Nr=["id","name","multiple","preview","placeholder","label","accept"],Tr={key:0,class:"flex-1 overflow-hidden text-ellipsis whitespace-nowrap"},Rr={key:1,class:"text-slate-400"},jr={key:1,class:"flex-1 overflow-hidden text-ellipsis whitespace-nowrap"},Lr={key:1,class:"text-slate-400"},Dr={class:"file-name flex-none cursor-pointer border-l px-4 border-slate-200 dark:border-slate-700 h-full inline-flex items-center bg-slate-100 dark:bg-slate-900 text-slate-600 dark:text-slate-400 text-base rounded-tr rounded-br font-normal"},zr={key:0,class:"w-[200px] h-[200px] mx-auto mt-6"},Ur=["src","alt"],qr={key:1,class:"flex flex-wrap space-x-5 rtl:space-x-reverse"},$r=["src","alt"];function Gr(e,n,t,l,r,a){var o,d,f,g;return u(),m("div",null,[s("div",Br,[s("label",{for:t.name},[s("input",{type:"file",onChange:n[0]||(n[0]=(...y)=>a.onChange&&a.onChange(...y)),class:"bg-red-400 w-full hidden",id:t.name,name:t.name,multiple:t.multiple,preview:t.preview,placeholder:t.placeholder,label:t.label,accept:t.accept},null,40,Nr),s("div",{class:V(["w-full h-[40px] file-control flex items-center",`  ${t.classInput}`])},[t.multiple?_("",!0):(u(),m("span",Tr,[(o=r.selectedFile)!=null&&o.name?(u(),m("span",{key:0,class:V(t.filenametag?" badge-title":"text-slate-900 dark:text-white")},I((d=r.selectedFile)==null?void 0:d.name),3)):_("",!0),(f=r.selectedFile)!=null&&f.name?_("",!0):(u(),m("span",Rr,I(t.placeholder),1))])),t.multiple?(u(),m("span",jr,[r.multipleurls.length>0?(u(),m("span",{key:0,class:V(t.filenametag?" badge-title":"text-slate-900 dark:text-white")},I(r.multipleurls.length>0?r.multipleurls.length+" files selected":""),3)):_("",!0),t.placeholder&&r.multipleurls.length===0?(u(),m("span",Lr,I(t.placeholder),1)):_("",!0)])):_("",!0),s("span",Dr,I(t.label),1)],2),r.url&&!t.multiple&&t.preview?(u(),m("div",zr,[s("img",{src:r.url,class:"w-full object-cover h-full block rounded",alt:(g=r.selectedFile)==null?void 0:g.name},null,8,Ur)])):_("",!0),r.multipleurls.length>0&&t.multiple&&t.preview?(u(),m("div",qr,[(u(!0),m(oe,null,ge(r.multipleurls,(y,c)=>{var v;return u(),m("div",{key:c,class:"xl:w-1/5 md:w-1/3 w-1/2 rounded mt-6"},[s("img",{src:y,class:"object-cover w-full h-full rounded",alt:(v=r.selectedFile)==null?void 0:v.name},null,8,$r)])}),128))])):_("",!0)],8,Or)])])}const Hr=B(Mr,[["render",Gr]]),Yr=kt({name:"Checkbox",inheritAttrs:!1,props:{label:{type:String},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:"checkbox"},activeClass:{type:String,default:" ring-black-500  bg-slate-900 dark:bg-slate-700 dark:ring-slate-700 "},value:{type:null},modelValue:{type:null}},emits:{"update:modelValue":e=>({modelValue:e})},setup(e,n){const t=q(e.checked),l=()=>{t.value=!t.value};return{localValue:T({get:()=>e.modelValue,set:a=>n.emit("update:modelValue",a)}),ck:t,onChange:l}}}),Wr=["disabled","name","value"],Zr={key:0,src:sn,alt:"",class:"h-[10px] w-[10px] block m-auto"},Kr={key:0,class:"text-slate-500 dark:text-slate-400 text-sm leading-6"};function Jr(e,n,t,l,r,a){return u(),m("div",null,[s("label",{class:V(["flex items-center",e.disabled?" cursor-not-allowed opacity-50":"cursor-pointer"])},[De(s("input",Jt({type:"checkbox",class:"hidden",disabled:e.disabled,name:e.name,onChange:n[0]||(n[0]=(...o)=>e.onChange&&e.onChange(...o)),value:e.value,"onUpdate:modelValue":n[1]||(n[1]=o=>e.localValue=o)},e.$attrs),null,16,Wr),[[Kt,e.localValue]]),s("span",{class:V(["h-4 w-4 border flex-none border-slate-100 dark:border-slate-800 rounded inline-flex ltr:mr-3 rtl:ml-3 relative transition-all duration-150",e.ck?e.activeClass+" ring-2 ring-offset-2 dark:ring-offset-slate-800 ":"bg-slate-100 dark:bg-slate-600 dark:border-slate-600"])},[e.ck?(u(),m("img",Zr)):_("",!0)],2),e.label?(u(),m("span",Kr,I(e.label),1)):_("",!0)],2)])}const Xr=B(Yr,[["render",Jr]]),Qr={components:{Card:Be,Fileinput:Hr,Checkbox:Xr},data(){return{hasheader:0}},methods:{uploadFile(e){this.$emit("uploadFile",e.target.files)},hasheaderevent(e){this.$emit("hasHeader",this.hasheader)}}},ea={class:"lg:grid lg:grid-cols-1"},ta={class:"fromGroup relative"};function na(e,n,t,l,r,a){const o=x("Fileinput"),d=x("Checkbox"),f=x("Card");return u(),m("div",null,[h(f,{title:"Import from csv file",class:"shadow"},{default:w(()=>[n[3]||(n[3]=s("br",null,null,-1)),s("div",ea,[s("div",ta,[n[1]||(n[1]=s("label",{for:"",class:"inline-block input-label"},"Select csv file",-1)),h(o,{accept:".csv",placeholder:"Choose a file here...",onChange:a.uploadFile},null,8,["onChange"])]),n[2]||(n[2]=s("br",null,null,-1)),h(d,{modelValue:r.hasheader,"onUpdate:modelValue":n[0]||(n[0]=g=>r.hasheader=g),onChange:a.hasheaderevent,label:"Has header"},null,8,["modelValue","onChange"])])]),_:1})])}const la=B(Qr,[["render",na]]);et();const $e=wt("import",{state:()=>({loading:!0,stepNumber:0,duplicate_handling_option:1,get_single_row:[],import_result:[]}),getters:{getRecordCreated(e){return e.import_result.filter(n=>n.status==1)},getSkipResult(e){return e.import_result.filter(n=>n.status==2)},getUpdateResult(e){return e.import_result.filter(n=>n.status==3)}},actions:{async getImport(e){try{this.loading=!0;const n=await this.axios.post("import/get_single_data",e,{headers:{"Content-type":"multipart/form-data"}});this.get_single_row=n.data,this.stepNumber++,this.loading=!1,console.log(n)}catch{}},async saveImport(e){try{this.loading=!0;const n=await this.axios.post("import/save_import",e,{headers:{"Content-type":"multipart/form-data"}});this.stepNumber++,this.loading=!1,this.import_result=n.data.data}catch{}}},persist:!0}),ht=$e(),ra=[{value:1,label:"Skip this step"},{value:2,label:"Skip"},{value:3,label:"Update"}],aa={props:{modulefields:{type:Array}},components:{Card:Be,Select:Tt},data(){return{options:ra,duplicate_handling_field:[],select:[],ImportStore:ht}},created(){this.formSelect(this.modulefields)},methods:{formSelect(e){return e.map(n=>{n.duplicate_handling&&this.select.push({label:n.label,value:n.name})}),this.select},duplicate_handling_event(){this.$emit("duplicate_handling_option",ht.duplicate_handling_option)},duplicate_handling_field_event(){this.$emit("duplicate_handling_field",this.duplicate_handling_field)}}},oa={class:"fromGroup relative mt-5"},sa={key:0,class:"fromGroup relative"},ia=["value"];function da(e,n,t,l,r,a){const o=x("Select"),d=x("Card");return u(),m("div",null,[h(d,{title:"Duplicate record handling",class:"shadow"},{default:w(()=>[s("div",oa,[n[3]||(n[3]=s("label",{for:"",class:"inline-block input-label"},"Select how duplicate records should be handled",-1)),h(o,{placeholder:"Select an option",modelValue:r.ImportStore.duplicate_handling_option,"onUpdate:modelValue":n[0]||(n[0]=f=>r.ImportStore.duplicate_handling_option=f),onChange:a.duplicate_handling_event,options:r.options},null,8,["modelValue","onChange","options"])]),r.ImportStore.duplicate_handling_option!=1?(u(),m("div",sa,[n[5]||(n[5]=s("p",{class:"mt-5"},"Select the matching fields to find duplicate records",-1)),n[6]||(n[6]=s("label",{for:"",class:"inline-block input-label"},"Available fields",-1)),De(s("select",{onChange:n[1]||(n[1]=(...f)=>a.duplicate_handling_field_event&&a.duplicate_handling_field_event(...f)),"onUpdate:modelValue":n[2]||(n[2]=f=>r.duplicate_handling_field=f),class:"text-sm",multiple:"",style:{width:"100%",border:"1px solid #ccc",height:"200px"}},[n[4]||(n[4]=s("option",{value:"",selected:"",disabled:""},"Select an option",-1)),(u(!0),m(oe,null,ge(r.select,(f,g)=>(u(),m("option",{value:f.value,key:g},I(f.label),9,ia))),128))],544),[[Xt,r.duplicate_handling_field]])])):_("",!0)]),_:1})])}const ua=B(aa,[["render",da]]),gt=$e(),ca={props:{modulefields:{type:Array}},components:{Card:Be,Select:tn},data(){return{ImportStore:gt,test:"",columns:[{label:"Row 1",field:"row_1"},{label:"Crm fields",field:"crm_fields"}]}},computed:{get_single_data(){const e=[];return gt.get_single_row.map(n=>{e.push({row_1:n})}),e},crm_fields(){const e=[];return this.modulefields.map(n=>{e.push({label:n.label,value:n.name,required:n.required,type:n.type})}),console.log(e),e}},methods:{get_crm_fields_value:function(){console.log("test")}}},fa={key:0},ma={class:"w-full import-crm-fields",style:{border:"1px solid #ccc",padding:"5px","border-radius":"5px",outline:"none"}},pa=["value","data-required","data-type"],ha={key:0,class:"text-red-500"};function ga(e,n,t,l,r,a){const o=x("vue-good-table"),d=x("Card");return u(),ae(d,{bodyClass:"p-0 shadow-md"},{default:w(()=>[n[1]||(n[1]=s("header",{class:"px-4 pt-4 pb-3 mb-3"},[s("h5",{class:"card-title mb-0"},"Map the columns to CRM fields")],-1)),h(o,{"max-height":"450px",columns:r.columns,rows:a.get_single_data,"fixed-header":!0,styleClass:" vgt-table table-head","sort-options":{enabled:!1}},{"table-row":w(f=>[f.column.field=="crm_fields"?(u(),m("div",fa,[s("select",ma,[n[0]||(n[0]=s("option",{value:"",disabled:"",selected:""},"Select an option",-1)),(u(!0),m(oe,null,ge(a.crm_fields,(g,y)=>(u(),m("option",{key:y,value:g.value,"data-required":g.required,"data-type":g.type},[je(I(g.label),1),g.required?(u(),m("span",ha,"*")):_("",!0)],8,pa))),128))])])):_("",!0)]),_:1},8,["columns","rows"])]),_:1})}const va=B(ca,[["render",ga]]),_a=$e(),ba={components:{Card:Be},data(){return{ImportStore:_a}}},ya={class:"lg:grid grid-cols-3 mt-3"},xa={class:"col-span-2"},ka={class:"lg:grid grid-cols-3 mt-3"},wa={class:"col-span-2"},Sa={class:"lg:grid grid-cols-3 mt-3"},Ca={class:"col-span-2"};function Va(e,n,t,l,r,a){const o=x("Card");return u(),m("div",null,[h(o,{title:"Import result"},{default:w(()=>[s("div",ya,[n[0]||(n[0]=s("div",null,"Records Created",-1)),s("div",xa,I(r.ImportStore.getRecordCreated.length),1)]),s("div",ka,[n[1]||(n[1]=s("div",null,"Records Skip",-1)),s("div",wa,I(r.ImportStore.getSkipResult.length),1)]),s("div",Sa,[n[2]||(n[2]=s("div",null,"Records update",-1)),s("div",Ca,I(r.ImportStore.getUpdateResult.length),1)])]),_:1})])}const Fa=B(ba,[["render",Va]]);const N=$e(),Ia=qe(),Ke=q(!1),ke=q(),vt=q([]),Aa={components:{Button:tt,Modal:Rt,VerticallyWizard:Er,Step1:la,Step2:ua,Step3:va,Step4:Fa},props:{openModal:{type:Boolean,default:!1}},data(){return{ImportStore:N,modules:"",files:ke,incidents_field:at,resources_field:ot,contacts_field:st,steps:[{id:1,title:"Upload csv file"},{id:2,title:"Duplicate handling"},{id:3,title:"Field mapping"},{id:4,title:"Result"}]}},created(){N.loading=!1,N.stepNumber=0,N.duplicate_handling_option=1},methods:{closeModal(){this.$emit("closeModal",!1),ke.value=void 0,setTimeout(()=>{N.stepNumber=0,N.duplicate_handling_option=1},500),N.stepNumber==3&&Ia.List(this.$route.params.module)},prev(){N.stepNumber++},next(){if(N.stepNumber==0&&ke.value===void 0)return ce.fire({icon:"error",title:"Something wrong",text:"Select csv file to proceed in the next step"}),!1;if(N.stepNumber==1){const e=new FormData;e.append("files",ke.value[0]),e.append("hasheader",Ke.value),N.getImport(e)}else N.stepNumber==2?this.saveImport():N.stepNumber==3?this.closeModal():N.stepNumber++},uploadFile(e){ke.value=e},hasHeader(e){Ke.value=e},saveImport(){const e=document.getElementsByClassName("import-crm-fields"),n=[],{required_fields:t,fields:l}=this.getFieldRequired(),r=[];for(var a=0;a<e.length;a++)if(e[a].value!=""){const c=e[a].value,v=n[c];if(v===void 0)n[c]=1;else{var o=0;o=v,o++,n[c]=o}r.push({fields:c,position:a,type:e[a].selectedOptions[0].getAttribute("data-type")})}var d="";const f=Object.keys(n);f.map(c=>{n[c]>1&&(d+=`<p class="text-red-500">Field mapped more than once <b>${l[c].label}</b></p>`)});const g=t.filter(c=>!f.includes(c));if(g.length>0&&g.map(c=>{d+=`<p class="text-red-500">Please map mandatory fields <b>${l[c].label}</b> </p>`}),d!="")return ce.fire({icon:"error",title:"Something wrong",html:d}),!1;const y=new FormData;y.append("files",ke.value[0]),y.append("fields",JSON.stringify(r)),y.append("module",this.$route.params.module),y.append("duplicate_fields",JSON.stringify(this.duplicate_field)),y.append("duplicate_option",N.duplicate_handling_option),y.append("hasheader",Ke.value),N.saveImport(y)},getFieldRequired(){const e=[],n=[];return this.module_fields.map(t=>{t.required&&e.push(t.name),n[t.name]=t}),{required_fields:e,fields:n}},duplicate_handling_option(e){N.duplicate_handling_option=e},duplicate_handling_field(e){vt.value=e},getImport(e){console.log(e)}},computed:{Modules(){return this.modules=this.$route.params.module},module_fields(){var e;switch(this.Modules){case"incidents":e=at;break;case"resources":e=ot;break;case"contacts":e=st;break}const n=[];return e.map(t=>{t.fields.map(l=>{n.push(l)})}),n},duplicate_field(){const{fields:e}=this.getFieldRequired(),n=[];return vt.value.map(t=>{n.push(e[t].name)}),n}}},Pa={class:"flex z-[5] items-center relative justify-center md:mx-8"},Ea={key:0},Ma={key:1,class:"text-3xl"},Ba={class:"w-max"},Oa={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},Na={key:0},Ta={key:1},Ra={key:2},ja={key:3};function La(e,n,t,l,r,a){const o=x("Loading"),d=x("Icon"),f=x("Step1"),g=x("Step2"),y=x("Step3"),c=x("Step4"),v=x("Button"),M=x("Modal");return u(),m(oe,null,[h(o,{active:r.ImportStore.loading,"onUpdate:active":n[0]||(n[0]=R=>r.ImportStore.loading=R)},null,8,["active"]),h(M,{activeModal:t.openModal,onClose:a.closeModal,title:`Import ${a.Modules}`,sizeClass:"w-3/6"},{default:w(()=>[s("div",Pa,[(u(!0),m(oe,null,ge(r.steps,(R,P)=>(u(),m("div",{class:"relative z-[1] items-center item flex flex-start flex-1 last:flex-none group",key:P},[s("div",{class:V([`   ${r.ImportStore.stepNumber>=P?"bg-slate-900 text-white ring-slate-900 ring-offset-2 dark:ring-offset-slate-500 dark:bg-slate-900 dark:ring-slate-900":"bg-white ring-slate-900 ring-opacity-70  text-slate-900 dark:text-slate-300 dark:bg-slate-600 dark:ring-slate-600 text-opacity-70"}`,"transition duration-150 icon-box md:h-12 md:w-12 h-7 w-7 rounded-full flex flex-col items-center justify-center relative z-[66] ring-1 md:text-lg text-base font-medium"])},[r.ImportStore.stepNumber<=P?(u(),m("span",Ea,I(P+1),1)):(u(),m("span",Ma,[h(d,{icon:"bx:check-double"})]))],2),s("div",{class:V(["absolute top-1/2 h-[2px] w-full",r.ImportStore.stepNumber>=P?"bg-slate-900 dark:bg-slate-900":"bg-[#E0EAFF] dark:bg-slate-700"])},null,2),s("div",{class:V(["absolute top-full text-base md:leading-6 mt-3 transition duration-150 md:opacity-100 opacity-0 group-hover:opacity-100",r.ImportStore.stepNumber>=P?" text-slate-900 dark:text-slate-300":"text-slate-500 dark:text-slate-300 dark:text-opacity-40"])},[s("span",Ba,I(R.title),1)],2)]))),128))]),s("div",Oa,[r.ImportStore.stepNumber==0?(u(),m("div",Na,[h(f,{onUploadFile:a.uploadFile,onHasHeader:a.hasHeader},null,8,["onUploadFile","onHasHeader"])])):_("",!0),r.ImportStore.stepNumber==1?(u(),m("div",Ta,[h(g,{modulefields:a.module_fields,onDuplicate_handling_option:a.duplicate_handling_option,onDuplicate_handling_field:a.duplicate_handling_field},null,8,["modulefields","onDuplicate_handling_option","onDuplicate_handling_field"])])):_("",!0),r.ImportStore.stepNumber===2?(u(),m("div",Ra,[h(y,{modulefields:a.module_fields},null,8,["modulefields"])])):_("",!0),r.ImportStore.stepNumber===3?(u(),m("div",ja,[h(c)])):_("",!0),s("div",{class:V(["mt-10",r.ImportStore.stepNumber>0?"flex justify-end":" text-right"])},[h(v,{text:r.ImportStore.stepNumber!==this.steps.length-1?"next":"Close",onClick:n[1]||(n[1]=re(R=>a.next(),["prevent"])),btnClass:"btn-dark"},null,8,["text"])],2)])]),_:1},8,["activeModal","onClose","title"])],64)}const Da=B(Aa,[["render",La]]),za={components:{Breadcrumb:Qt,Textinput:_t,Button:tt,Icon:fe,InputGroup:Nt,List:or,Import:Da,Filter_modal:hr},data(){return{openModal:!1,openFilterModal:!1}},methods:{importModalbtn(){this.openModal=!0},closeModal(e){this.openModal=e},filterModalBtn(){this.openFilterModal=!0},closeFilterModal(e){this.openFilterModal=e}}},Ua={class:"lg:grid lg:grid-cols-2 mb-2"},qa={class:"flex"},$a={class:"lg:float-right"};function Ga(e,n,t,l,r,a){const o=x("Breadcrumb"),d=x("InputGroup"),f=x("Button"),g=x("router-link"),y=x("List"),c=x("Import"),v=x("Filter_modal");return u(),m("div",null,[h(o),s("div",Ua,[s("div",qa,[h(d,{class:"w-4/5",type:"text",placeholder:"Search",prependIcon:"heroicons-outline:search",merged:""}),h(f,{icon:"heroicons-outline:adjustments-horizontal",text:"Filters",btnClass:"btn-outline-dark ml-2 py-2",onClick:a.filterModalBtn},null,8,["onClick"])]),s("div",null,[s("div",$a,[h(g,{to:{name:"edit",params:{module:this.$route.params.module}}},{default:w(()=>[h(f,{icon:"heroicons-outline:plus",text:`Add new ${this.$route.params.module}`,btnClass:"btn-danger mr-2 py-2"},null,8,["text"])]),_:1},8,["to"]),h(f,{icon:"heroicons-outline:arrow-down-tray",text:"Import",btnClass:"btn-outline-danger py-2",onClick:a.importModalbtn},null,8,["onClick"])])])]),h(y),h(c,{openModal:r.openModal,onCloseModal:a.closeModal},null,8,["openModal","onCloseModal"]),h(v,{openFilterModal:r.openFilterModal,onCloseFilterModal:a.closeFilterModal},null,8,["openFilterModal","onCloseFilterModal"])])}const no=B(za,[["render",Ga]]);export{no as default};

import{d as xt,M as Ct}from"./menu-767bf396.js";import{B as kt}from"./Breadcrum-b7890c5f.js";import{B as Dt}from"./index-a7fa4ad6.js";import{I as Je}from"./index-9e73ef5b.js";import{C as ke}from"./index-2412a5d3.js";import{u as De,M as Se,P as Ze,T as et}from"./index-9c92755b.js";import{B as G}from"./index-d37bd73e.js";import{I as K}from"./index-39bd4386.js";import{u as Z}from"./related-1bd9762f.js";import{S as tt,U as ot,W as we,_ as I,a as p,b as m,c as h,d as f,w as y,C as S,g as C,X as St,Y as Mt,p as Ft,r as L,f as d,t as O,n as z,Q as ce,F as q,h as Me,V as Ee,D as J,u as Fe,i as nt}from"./index-d9888335.js";import{S as rt}from"./sweetalert2.all-cbba3559.js";import $t from"./save-7f39e802.js";import{T as Pt}from"./index-94653a48.js";import{C as Tt,T as $e}from"./vue-select.es-a487208f.js";import{e as Bt,d as It,N as Rt,_ as jt}from"./transition-cb58c9ba.js";import{u as Et}from"./dropdown-387ba376.js";import{u as Ot}from"./module-3c9806cd.js";import"./edit_map-1ba6d2c2.js";import"./mapbox-gl-geocoder-ebca00b9.js";import"./index-eef0ab71.js";function oe(e,t,o,l){function n(r){return r instanceof o?r:new o(function(c){c(r)})}return new(o||(o=Promise))(function(r,c){function u(i){try{a(l.next(i))}catch(v){c(v)}}function _(i){try{a(l.throw(i))}catch(v){c(v)}}function a(i){i.done?r(i.value):n(i.value).then(u,_)}a((l=l.apply(e,t||[])).next())})}function ne(e,t){var o={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},l,n,r,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(a){return function(i){return _([a,i])}}function _(a){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(i){a=[6,i],n=0}finally{l=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function At(e,t){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var l=o.call(e),n,r=[],c;try{for(;(t===void 0||t-- >0)&&!(n=l.next()).done;)r.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(o=l.return)&&o.call(l)}finally{if(c)throw c.error}}return r}function zt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(At(arguments[t]));return e}const Lt=Z();De();tt();const re=ot("media",{state:()=>({loading:!1,modal:!1,title:"",id:"",total:0,current:1,per_page:0,form:{filetitle:"",assigned_to:"",note:"",files:[]},mediaList:[]}),actions:{async save(e){try{this.loading=!0;const t=await this.axios.post("media",e,{headers:{"Content-Type":"multipart/form-data"}}),o=we.currentRoute.value.params;Lt.get_column(o.id,o.module,o.related_module),this.loading=!1,this.clearFile()}catch{}},async del(e){try{this.loading=!0,(await this.axios.delete("media/"+e)).data.status==200&&this.list()}catch{}},async download(e,t,o){try{this.loading=!0;const l=await this.axios.get("media",{params:{filename:e,extension:t,path:o},responseType:"blob"}),n=URL.createObjectURL(l.data),r=document.createElement("a");r.href=n,r.setAttribute("download",e+"."+t),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),this.loading=!1}catch{}},clearFile(){this.form.files=[],this.form.assigned_to="",this.form.filetitle="",this.form.note="",this.modal=!1}}});const Oe=Z(),Vt={props:{title:{type:String,default:""},method:{type:String,default:"edit"}},components:{Modal:Se,Button:G,save:$t,detail:xt},data(){return{related_store:Oe}},methods:{closeModal(){Oe.modal=!1}}};function Nt(e,t,o,l,n,r){const c=p("save"),u=p("detail"),_=p("Modal",!0);return m(),h("div",null,[f(_,{title:o.title,activeModal:n.related_store.modal,onClose:r.closeModal,sizeClass:"max-w-7xl"},{default:y(()=>[n.related_store.method=="edit"?(m(),S(c,{key:0,props_module:this.$route.params.module,props_related_module:this.$route.params.related_module},null,8,["props_module","props_related_module"])):n.related_store.method=="view"?(m(),S(u,{key:1,props_module:n.related_store.related_module,props_id:n.related_store.id},null,8,["props_module","props_id"])):C("",!0)]),_:1},8,["title","activeModal","onClose"])])}const lt=I(Vt,[["render",Nt]]);var at={},Ut=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function _e(e,t){var o=Gt(e);if(typeof o.path!="string"){var l=e.webkitRelativePath;Object.defineProperty(o,"path",{value:typeof t=="string"?t:typeof l=="string"&&l.length>0?l:e.name,writable:!1,configurable:!1,enumerable:!0})}return o}function Gt(e){var t=e.name,o=t&&t.lastIndexOf(".")!==-1;if(o&&!e.type){var l=t.split(".").pop().toLowerCase(),n=Ut.get(l);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}var qt=[".DS_Store","Thumbs.db"];function Kt(e){return oe(this,void 0,void 0,function(){return ne(this,function(t){return[2,Wt(e)&&e.dataTransfer?Qt(e.dataTransfer,e.type):Yt(e)]})})}function Wt(e){return!!e.dataTransfer}function Yt(e){var t=Ht(e.target)?e.target.files?xe(e.target.files):[]:[];return t.map(function(o){return _e(o)})}function Ht(e){return e!==null}function Qt(e,t){return oe(this,void 0,void 0,function(){var o,l;return ne(this,function(n){switch(n.label){case 0:return e.items?(o=xe(e.items).filter(function(r){return r.kind==="file"}),t!=="drop"?[2,o]:[4,Promise.all(o.map(Xt))]):[3,2];case 1:return l=n.sent(),[2,Ae(st(l))];case 2:return[2,Ae(xe(e.files).map(function(r){return _e(r)}))]}})})}function Ae(e){return e.filter(function(t){return qt.indexOf(t.name)===-1})}function xe(e){for(var t=[],o=0;o<e.length;o++){var l=e[o];t.push(l)}return t}function Xt(e){if(typeof e.webkitGetAsEntry!="function")return ze(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?it(t):ze(e)}function st(e){return e.reduce(function(t,o){return zt(t,Array.isArray(o)?st(o):[o])},[])}function ze(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var o=_e(t);return Promise.resolve(o)}function Jt(e){return oe(this,void 0,void 0,function(){return ne(this,function(t){return[2,e.isDirectory?it(e):Zt(e)]})})}function it(e){var t=e.createReader();return new Promise(function(o,l){var n=[];function r(){var c=this;t.readEntries(function(u){return oe(c,void 0,void 0,function(){var _,a,i;return ne(this,function(v){switch(v.label){case 0:if(u.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return _=v.sent(),o(_),[3,4];case 3:return a=v.sent(),l(a),[3,4];case 4:return[3,6];case 5:i=Promise.all(u.map(Jt)),n.push(i),r(),v.label=6;case 6:return[2]}})})},function(u){l(u)})}r()})}function Zt(e){return oe(this,void 0,void 0,function(){return ne(this,function(t){return[2,new Promise(function(o,l){e.file(function(n){var r=_e(n,e.fullPath);o(r)},function(n){l(n)})})]})})}const eo=Object.freeze(Object.defineProperty({__proto__:null,fromEvent:Kt},Symbol.toStringTag,{value:"Module"})),to=St(eo);var Pe={};Pe.__esModule=!0;Pe.default=function(e,t){if(e&&t){var o=Array.isArray(t)?t:t.split(","),l=e.name||"",n=(e.type||"").toLowerCase(),r=n.replace(/\/.*$/,"");return o.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?l.toLowerCase().endsWith(u):u.endsWith("/*")?r===u.replace(/\/.*$/,""):n===u})}return!0};Object.defineProperty(at,"__esModule",{value:!0});var $=Mt,oo=to;function no(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ro=no(Pe),b=function(){return(b=Object.assign||function(e){for(var t,o=1,l=arguments.length;o<l;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function Le(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(o[l[n]]=e[l[n]])}return o}function lo(e,t,o,l){return new(o||(o=Promise))(function(n,r){function c(a){try{_(l.next(a))}catch(i){r(i)}}function u(a){try{_(l.throw(a))}catch(i){r(i)}}function _(a){var i;a.done?n(a.value):(i=a.value,i instanceof o?i:new o(function(v){v(i)})).then(c,u)}_((l=l.apply(e,t||[])).next())})}function ao(e,t){var o,l,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(_){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,l&&(n=2&i[0]?l.return:i[0]?l.throw||((n=l.return)&&n.call(l),0):l.next)&&!(n=n.call(l,i[1])).done)return n;switch(l=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,l=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!((n=n.length>0&&n[n.length-1])||i[0]!==6&&i[0]!==2)){c=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){c.label=i[1];break}if(i[0]===6&&c.label<n[1]){c.label=n[1],n=i;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(i);break}n[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(v){i=[6,v],l=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([_,a])}}}function Ce(e,t){for(var o=0,l=t.length,n=e.length;o<l;o++,n++)e[n]=t[o];return e}function Ve(e){e.preventDefault()}function de(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function pe(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():e.cancelBubble!==void 0&&e.cancelBubble}var so={code:"too-many-files",message:"Too many files"},io=function(e){return e=Array.isArray(e)&&e.length===1?e[0]:e,{code:"file-invalid-type",message:"File type must be "+(Array.isArray(e)?"one of "+e.join(", "):e)}};function te(e){return e!=null}function Ne(e,t){var o=e.type==="application/x-moz-file"||ro.default(e,t);return[o,o?null:io(t)]}var Ue=function(e){return{code:"file-too-large",message:"File is larger than "+e+" bytes"}},Ge=function(e){return{code:"file-too-small",message:"File is smaller than "+e+" bytes"}};function qe(e,t,o){if(te(e.size)&&e.size)if(te(t)&&te(o)){if(e.size>o)return[!1,Ue(o)];if(e.size<t)return[!1,Ge(t)]}else{if(te(t)&&e.size<t)return[!1,Ge(t)];if(te(o)&&e.size>o)return[!1,Ue(o)]}return[!0,null]}function N(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(o){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];return e.some(function(r){return!pe(o)&&r&&r.apply(void 0,Ce([o],l)),pe(o)})}}var co={disabled:!1,getFilesFromEvent:oo.fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};function uo(e,t){switch(t.type){case"focus":return b(b({},e),{isFocused:!0});case"blur":return b(b({},e),{isFocused:!1});case"openDialog":return b(b({},e),{isFileDialogActive:!0});case"closeDialog":return b(b({},e),{isFileDialogActive:!1});case"setDraggedFiles":var o=t.isDragActive,l=t.draggedFiles;return b(b({},e),{draggedFiles:l,isDragActive:o});case"setFiles":return b(b({},e),{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return b(b({},e),{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return e}}var mo=at.useDropzone=function(e){e===void 0&&(e={});var t=$.ref(b(b({},co),e));$.watch(function(){return b({},e)},function(s){t.value=b(b({},t.value),s)});var o=$.ref(),l=$.ref(),n=function(s,g,x){var D=$.reactive(g),F=function(R){var B=s($.toRaw(D),R);Object.keys(B).forEach(function(V){D[V]=B[V]})};return x!=null&&F(x),[D,F]}(uo,{isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]}),r=n[0],c=n[1],u=function(){l.value&&(c({type:"openDialog"}),l.value.value="",l.value.click())},_=function(){var s=t.value.onFileDialogCancel;r.isFileDialogActive&&setTimeout(function(){if(l.value){var g=l.value.files;g&&!g.length&&(c({type:"closeDialog"}),typeof s=="function"&&s())}},300)};function a(s){o.value&&(o.value.$el||o.value).isEqualNode(s.target)&&(s.keyCode!==32&&s.keyCode!==13||(s.preventDefault(),u()))}function i(){c({type:"focus"})}function v(){c({type:"blur"})}function M(){var s;t.value.noClick||(s===void 0&&(s=window.navigator.userAgent),function(g){return g.includes("MSIE")||g.includes("Trident/")}(s)||function(g){return g.includes("Edge/")}(s)?setTimeout(u,0):u())}var T=$.ref([]),le=function(s){o.value&&((o.value.$el||o.value).contains(s.target)||(s.preventDefault(),T.value=[]))};function k(s){t.value.noDragEventsBubbling&&s.stopPropagation()}function ee(s){return lo(this,void 0,void 0,function(){var g,x,D,F,R;return ao(this,function(B){switch(B.label){case 0:return g=t.value,x=g.getFilesFromEvent,D=g.noDragEventsBubbling,F=g.onDragEnter,s.preventDefault(),k(s),T.value=Ce(Ce([],T.value),[s.target]),de(s)?x?[4,x(s)]:[2]:[3,2];case 1:if((R=B.sent())||(R=[]),pe(s)&&!D)return[2];c({draggedFiles:R,isDragActive:!0,type:"setDraggedFiles"}),F&&F(s),B.label=2;case 2:return[2]}})})}function mt(s){var g=t.value.onDragOver;if(s.preventDefault(),k(s),s.dataTransfer)try{s.dataTransfer.dropEffect="copy"}catch{}return de(s)&&g&&g(s),!1}function ft(s){s.preventDefault(),k(s);var g=T.value.filter(function(F){return!!o.value&&(o.value.$el||o.value).contains(F)}),x=g.indexOf(s.target);if(x!==-1&&g.splice(x,1),T.value=g,!(g.length>0)){c({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]});var D=t.value.onDragLeave;de(s)&&D&&D(s)}}function Te(s){s.preventDefault(),k(s),T.value=[];var g=t.value,x=g.getFilesFromEvent,D=g.noDragEventsBubbling,F=g.accept,R=g.minSize,B=g.maxSize,V=g.multiple,Y=g.maxFiles,H=g.onDrop,se=g.onDropRejected,ie=g.onDropAccepted;if(de(s)){if(!x)return;Promise.resolve(x(s)).then(function(ge){if(!pe(s)||D){var U=[],Q=[];ge.forEach(function(X){var Re=Ne(X,F),vt=Re[0],gt=Re[1],je=qe(X,R,B),ht=je[0],yt=je[1];if(vt&&ht)U.push(X);else{var bt=[gt,yt].filter(function(wt){return wt});Q.push({file:X,errors:bt})}}),(!V&&U.length>1||V&&Y>=1&&U.length>Y)&&(U.forEach(function(X){Q.push({file:X,errors:[so]})}),U.splice(0)),c({acceptedFiles:U,fileRejections:Q,type:"setFiles"}),H&&H(U,Q,s),Q.length>0&&se&&se(Q,s),U.length>0&&ie&&ie(U,s)}})}c({type:"reset"})}$.onMounted(function(){window.addEventListener("focus",_,!1),t.value.preventDropOnDocument&&(document.addEventListener("dragover",Ve,!1),document.addEventListener("drop",le,!1))}),$.onUnmounted(function(){window.removeEventListener("focus",_,!1),t.value.preventDropOnDocument&&(document.removeEventListener("dragover",Ve),document.removeEventListener("drop",le))});var W=function(s){return t.value.disabled?void 0:s},ve=function(s){return t.value.noKeyboard?void 0:W(s)},ae=function(s){return t.value.noDrag?void 0:W(s)},pt=function(s){s.stopPropagation()},Be=$.computed(function(){return r.draggedFiles?r.draggedFiles.length:0}),Ie=$.computed(function(){return Be.value>0&&function(s){var g=s.files,x=s.accept,D=s.minSize,F=s.maxSize,R=s.multiple,B=s.maxFiles;return!(!R&&g.length>1||R&&B>=1&&g.length>B)&&g.every(function(V){var Y=Ne(V,x)[0],H=qe(V,D,F)[0];return Y&&H})}({files:r.draggedFiles,accept:t.value.accept,minSize:t.value.minSize,maxSize:t.value.maxSize,multiple:t.value.multiple,maxFiles:t.value.maxFiles})}),_t=$.computed(function(){return Be.value>0&&!Ie.value});return b(b({},$.toRefs(r)),{isDragAccept:Ie,isDragReject:_t,isFocused:$.computed(function(){return r.isFocused&&!t.value.disabled}),getRootProps:function(s){s===void 0&&(s={});var g=s.onKeyDown,x=s.onFocus,D=s.onBlur,F=s.onClick,R=s.onDragEnter,B=s.onDragenter,V=s.onDragOver,Y=s.onDragover,H=s.onDragLeave,se=s.onDragleave,ie=s.onDrop,ge=Le(s,["onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragenter","onDragOver","onDragover","onDragLeave","onDragleave","onDrop"]);return b(b({onKeyDown:ve(N(g,a)),onFocus:ve(N(x,i)),onBlur:ve(N(D,v)),onClick:W(N(F,M)),onDragenter:ae(N(R,B,ee)),onDragover:ae(N(V,Y,mt)),onDragleave:ae(N(H,se,ft)),onDrop:ae(N(ie,Te)),ref:o},t.value.disabled||t.value.noKeyboard?{}:{tabIndex:0}),ge)},getInputProps:function(s){s===void 0&&(s={});var g=s.onChange,x=s.onClick,D=Le(s,["onChange","onClick"]),F={accept:t.value.accept,multiple:t.value.multiple,style:"display: none",type:"file",onChange:W(N(g,Te)),onClick:W(N(x,pt)),autoComplete:"off",tabIndex:-1,ref:l};return b(b({},F),D)},rootRef:o,inputRef:l,open:W(u)})};const fo=Ft({components:{Icon:K,TransitionRoot:Bt,TransitionChild:It,Dialog:Rt,DialogPanel:jt},props:{labelClass:{type:String,default:"btn-primary"},centered:{type:Boolean,default:!1},title:{type:String,default:"Basic Modal"},label:{type:String,default:"Basic Modal"},disableBackdrop:{type:Boolean,default:!1},noFade:{type:Boolean,default:!1},themeClass:{type:String,default:"bg-slate-900 dark:bg-slate-800 dark:border-b dark:border-slate-700"},sizeClass:{type:String,default:"max-w-xl"},scrollContent:{type:Boolean,default:!1},activeModal:{type:Boolean,default:!1}},setup(e){const t=L(e.activeModal);return{closeModal:()=>{t.value=!1},openModal:()=>{t.value=!t.value},isOpen:t}}}),po={class:"fixed inset-0 overflow-y-auto"},_o={key:0,class:"capitalize leading-6 tracking-wider font-medium text-base text-white"},vo={key:0,class:"px-4 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"},go={class:"fixed inset-0 overflow-y-auto"},ho={key:0,class:"capitalize leading-6 tracking-wider font-medium text-base text-white"},yo={key:0,class:"px-4 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function bo(e,t,o,l,n,r){const c=p("TransitionChild"),u=p("Icon"),_=p("DialogPanel"),a=p("Dialog"),i=p("TransitionRoot");return m(),h(q,null,[d("button",{type:"button",onClick:t[0]||(t[0]=(...v)=>e.openModal&&e.openModal(...v)),class:z(["btn",e.labelClass])},O(e.label),3),f(i,{show:e.isOpen,as:"template"},{default:y(()=>[e.disableBackdrop===!1?(m(),S(a,{key:0,as:"div",onClose:e.closeModal,class:"relative z-[999]"},{default:y(()=>[f(c,{enter:e.noFade?"":"duration-300 ease-out","enter-from":e.noFade?"":"opacity-0","enter-to":e.noFade?"":"opacity-100",leave:e.noFade?"":"duration-300 ease-in","leave-from":e.noFade?"":"opacity-100","leave-to":e.noFade?"":"opacity-0"},{default:y(()=>t[3]||(t[3]=[d("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-filter backdrop-blur-sm"},null,-1)])),_:1},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"]),d("div",po,[d("div",{class:z(["flex min-h-full justify-center text-center p-6",e.centered?"items-center":"items-start "])},[f(c,{as:"template",enter:e.noFade?"":"duration-300  ease-out","enter-from":e.noFade?"":"opacity-0 scale-95","enter-to":e.noFade?"":"opacity-100 scale-100",leave:e.noFade?"":"duration-200 ease-in","leave-from":e.noFade?"":"opacity-100 scale-100","leave-to":e.noFade?"":"opacity-0 scale-95"},{default:y(()=>[f(_,{class:z(["w-full transform overflow-hidden rounded-md bg-white dark:bg-slate-800 text-left align-middle shadow-xl transition-all",e.sizeClass])},{default:y(()=>[d("div",{class:z(["relative overflow-hidden py-4 px-5 text-white flex justify-between",e.themeClass])},[e.title?(m(),h("h2",_o,O(e.title),1)):C("",!0),d("button",{onClick:t[1]||(t[1]=(...v)=>e.closeModal&&e.closeModal(...v)),class:"text-[22px]"},[f(u,{icon:"heroicons-outline:x"})])],2),d("div",{class:z(["px-6 py-8",e.scrollContent?"overflow-y-auto max-h-[400px]":""])},[ce(e.$slots,"default")],2),e.$slots.footer?(m(),h("div",vo,[ce(e.$slots,"footer")])):C("",!0)]),_:3},8,["class"])]),_:3},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"])],2)])]),_:3},8,["onClose"])):(m(),S(a,{key:1,as:"div",class:"relative z-[999]"},{default:y(()=>[d("div",go,[d("div",{class:z(["flex min-h-full justify-center text-center p-6",e.centered?"items-center":"items-start "])},[f(c,{as:"template",enter:e.noFade?"":"duration-300  ease-out","enter-from":e.noFade?"":"opacity-0 scale-95","enter-to":e.noFade?"":"opacity-100 scale-100",leave:e.noFade?"":"duration-200 ease-in","leave-from":e.noFade?"":"opacity-100 scale-100","leave-to":e.noFade?"":"opacity-0 scale-95"},{default:y(()=>[f(_,{class:z(["w-full transform overflow-hidden rounded-md bg-white dark:bg-slate-800 text-left align-middle shadow-xl transition-all",e.sizeClass])},{default:y(()=>[d("div",{class:z(["relative overflow-hidden py-4 px-5 text-white flex justify-between",e.themeClass])},[e.title?(m(),h("h2",ho,O(e.title),1)):C("",!0),d("button",{onClick:t[2]||(t[2]=(...v)=>e.closeModal&&e.closeModal(...v)),class:"text-[22px]"},[f(u,{icon:"heroicons-outline:x"})])],2),d("div",{class:z(["px-6 py-8",e.scrollContent?"overflow-y-auto max-h-[400px]":""])},[ce(e.$slots,"default")],2),e.$slots.footer?(m(),h("div",yo,[ce(e.$slots,"footer")])):C("",!0)]),_:3},8,["class"])]),_:3},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"])],2)])]),_:3}))]),_:3},8,["show"])],64)}const wo=I(fo,[["render",bo]]),Ke=Et(),xo={props:["assigned_to"],emits:["update:assigned_to"],components:{Select:Tt},data(){return{dropdown_store:Ke}},mounted(){Ke.get_assigned_to()},methods:{selected_assigned(e){this.$emit("update:assigned_to",e.value)}}},Co={class:"fromGroup relative"};function ko(e,t,o,l,n,r){const c=p("Select");return m(),h("div",null,[d("div",Co,[t[0]||(t[0]=d("label",{class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},[Me(" Assigned To "),d("span",{class:"text-red-500"},"*")],-1)),f(c,{placeholder:"Select an option","onOption:selected":r.selected_assigned,reduce:u=>u.id,options:n.dropdown_store.assigned_to},null,8,["onOption:selected","reduce","options"])])])}const Do=I(xo,[["render",ko]]),So="/assets/upload-7ea9ffeb.svg",Mo=Z(),Fo={setup(){const e=re();function t(a){a.map(i=>{e.form.files.push(i)})}function o(){e.form.files=[],e.modal=!1}function l(a){e.form.files.splice(a,1)}function n(a){console.log(a.target.files[0])}const r=()=>{var a="";if(e.form.files.length==0&&(a+='<span class="text-red-500"><b>File Upload</b> is required field</span><br>'),e.form.filetitle==""&&(a+='<span class="text-red-500"><b>File Title</b> is required field</span><br>'),e.form.assigned_to==""&&(a+='<span class="text-red-500"><b>Assgined To</b> is required field</span><br>'),a!="")return rt.fire({icon:"error",title:"Fill up the Required field",html:a}),!1;if(a==""){Mo.loading=!0;const v=we.currentRoute.value.params.id,M=we.currentRoute.value.params.module;var i=new FormData;e.id=v,i.append("id",v),i.append("module",M),i.append("filetitle",e.form.filetitle),i.append("note",e.form.note),i.append("assigned_to",e.form.assigned_to),e.form.files.map(T=>{i.append("files[]",T)}),e.save(i)}o()},{getRootProps:c,getInputProps:u,..._}=mo({onDrop:t});return{getRootProps:c,getInputProps:u,closeModal:o,removeFile:l,SaveMedia:r,changeFile:n,..._,media:e}},components:{Modal:wo,Icon:K,Button:G,Textarea:$e,Textinput:Pt,assigned_to:Do}},$o={class:"lg:grid lg:grid-cols-2 gap-4 mb-4"},Po={class:"fromGroup relative"},To={class:"mb-4"},Bo={class:"fromGroup relative"},Io={key:0,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Ro={key:1,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},jo={class:"list-item space-y-3 h-full overflow-x-auto mt-5"},Eo={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},Oo={class:"text-sm text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap"},Ao={class:"flex-1 ltr:text-right rtl:text-left"},zo={class:"text-sm font-light text-slate-400 dark:text-slate-400"},Lo={class:"w-full flex justify-between mt-5"};function Vo(e,t,o,l,n,r){const c=p("Textinput"),u=p("assigned_to"),_=p("Textarea"),a=p("Button");return m(),h("div",null,[d("div",$o,[d("div",Po,[t[5]||(t[5]=d("label",{class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},[Me(" File Title "),d("span",{class:"text-red-500"},"*")],-1)),f(c,{modelValue:l.media.form.filetitle,"onUpdate:modelValue":t[0]||(t[0]=i=>l.media.form.filetitle=i)},null,8,["modelValue"])]),f(u,{assigned_to:l.media.form.assigned_to,"onUpdate:assigned_to":t[1]||(t[1]=i=>l.media.form.assigned_to=i)},null,8,["assigned_to"])]),d("div",To,[d("div",Bo,[t[6]||(t[6]=d("label",{class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"}," Note ",-1)),f(_,{modelValue:l.media.form.note,"onUpdate:modelValue":t[2]||(t[2]=i=>l.media.form.note=i)},null,8,["modelValue"])])]),t[8]||(t[8]=d("br",null,null,-1)),d("div",Ee(l.getRootProps(),{class:"w-full text-center border-dashed border border-secondary-500 rounded-md py-[52px] flex flex-col justify-center items-center"}),[d("div",null,[d("input",Ee(l.getInputProps(),{class:"hidden"}),null,16),t[7]||(t[7]=d("img",{src:So,alt:"",class:"mx-auto mb-4"},null,-1)),e.isDragActive?(m(),h("p",Io," Drop the files here ... ")):(m(),h("p",Ro," Drop files here or click to upload. "))])],16),d("ul",jo,[(m(!0),h(q,null,J(l.media.form.files,(i,v)=>(m(),h("li",{class:"flex items-center space-x-3 rtl:space-x-reverse border-b border-slate-100 dark:border-slate-700 last:border-b-0 pb-3 last:pb-0",key:v},[d("div",Eo,[d("div",Oo,O(v+1)+". "+O(i.name),1)]),d("div",Ao,[d("div",zo,[f(a,{icon:"heroicons-outline:trash",btnClass:"inline-flex items-center justify-center h-10 w-10 bg-danger-500 text-lg border rounded border-danger-500 text-white",onClick:M=>l.removeFile(v)},null,8,["onClick"])])])]))),128))]),d("div",Lo,[f(a,{text:"Close",btnClass:"btn-dark",onClick:t[3]||(t[3]=i=>l.closeModal())}),f(a,{text:"Save Media",btnClass:"btn-danger",onClick:t[4]||(t[4]=i=>l.SaveMedia())})])])}const No=I(Fo,[["render",Vo]]);re();const Uo={props:{previewContent:{type:String,default:""}}},Go=["src"];function qo(e,t,o,l,n,r){return m(),h("div",null,[d("iframe",{src:o.previewContent.preview,style:{width:"100%","min-height":"500px"},frameborder:"0"},null,8,Go)])}const Ko=I(Uo,[["render",qo]]);const he=re();L("Media");const Wo={props:{previewContent:{default:"",type:String}},components:{Modal:Se,Button:G,Media:No,Preview:Ko},data(){return{media:he}},methods:{closeModal(){he.form.files=[],he.modal=!1}}};function Yo(e,t,o,l,n,r){const c=p("Media"),u=p("Preview"),_=p("Modal",!0);return m(),h("div",null,[f(_,{title:n.media.title,activeModal:n.media.modal,onClose:r.closeModal,sizeClass:"max-w-5xl"},{default:y(()=>[n.media.title=="Media"?(m(),S(c,{key:0})):C("",!0),n.media.title=="Preview"?(m(),S(u,{key:1,"preview-content":o.previewContent},null,8,["preview-content"])):C("",!0)]),_:1},8,["title","activeModal","onClose"])])}const ct=I(Wo,[["render",Yo]]),ue=L(!1),ye=L(""),j=Z(),Ho=Fe(),We=re(),Ye=L(""),Qo={props:{rows:Array,loading:{type:Boolean,default:!1},perPage:{type:Number,default:1},current:{type:Number,default:1},total:{type:Number,default:0},action:{type:Number,default:1},clearbutton:Boolean},components:{Card:ke,InputGroup:Je,Pagination:Ze,Tooltip:et,Button:G,Icon:K,RelatedModal:lt,MediaModal:ct},data(){return{related_store:j,is_search:ue,search:ye,preview_content_data:Ye}},computed:{columns(){return j.columns_header},modules_(){const e=this.$route.params.related_module;return Ho.module.find(o=>o.name==e)}},mounted(){ye.value="",ue.value=!1},methods:{selectionChanged(e){this.$emit("selectionChanged",e.selectedRows)},changePage(e){this.$emit("changePage",e)},searchBtn(){j.search!=""&&this.$emit("search")},clearSearch(){ye.value="",ue.value=!1,this.$emit("clearsearch",ue.value)},del(e,t){const o=this.modules_.label;rt.fire({title:"Unlink "+o+" ",text:"Are you sure you want to unlink this "+o+"? ",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Unlink",cancelButtonColor:"#3085d6",reverseButtons:!0}).then(l=>{l.isConfirmed&&j.delete(this.$route.params.module,this.$route.params.related_module,this.$route.params.id,e,t)})},view(e){j.method="view",j.id=e,j.related_module=this.$route.params.related_module,j.modal=!0},edit(e){j.method="edit",j.id=e,j.loading=!0,j.modal=!0},preview(e,t,o){Ye.value={name:e,preview:t,type:o},We.title="Preview",We.modal=!0}}},Xo={class:"grid grid-cols-1 md:grid-cols-3"},Jo={class:"flex mb-4"},Zo={key:0},en={class:"flex space-x-3 justify-center rtl:space-x-reverse"},tn=["onClick"],on={class:"action-btn"},nn=["onClick"],rn=["onClick"],ln=["onClick"],an={class:"py-4 px-3 flex justify-center"};function sn(e,t,o,l,n,r){const c=p("Button"),u=p("InputGroup"),_=p("Icon"),a=p("Tooltip"),i=p("Pagination"),v=p("vue-good-table"),M=p("Card"),T=p("RelatedModal"),le=p("MediaModal");return m(),h("div",null,[f(M,{class:"shadow-lg"},{default:y(()=>[d("div",Xo,[d("div",Jo,[f(u,{modelValue:n.related_store.search,"onUpdate:modelValue":t[0]||(t[0]=k=>n.related_store.search=k),class:"w-full",type:"text",placeholder:"Search..."},{append:y(()=>[f(c,{onClick:r.searchBtn,icon:"heroicons-outline:search",btnClass:"btn-outline-dark disabled:bg-slate-300 disabled:cursor-not-allowed"},null,8,["onClick"])]),_:1},8,["modelValue"]),o.clearbutton?(m(),S(c,{key:0,icon:"heroicons-outline:x-mark",text:"Clear Search",btnClass:"btn-outline-danger ml-2 py-2",onClick:r.clearSearch},null,8,["onClick"])):C("",!0)])]),f(v,{"fixed-header":!0,isLoading:o.loading,columns:r.columns,onSelectedRowsChange:r.selectionChanged,styleClass:" vgt-table  lesspadding2 centered ",rows:o.rows,"pagination-options":{enabled:!0,perPage:15},"max-height":"600px","select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":y(k=>[k.column.field=="action"&&o.action==1?(m(),h("span",Zo,[d("div",en,[k.row.view!=""&&this.$route.params.related_module=="media"?(m(),S(a,{key:0,placement:"top",arrow:"",theme:"dark"},{button:y(()=>[d("a",{onClick:ee=>r.preview(k.row.filename,k.row.path,k.row.filetype)},[d("div",on,[f(_,{icon:"heroicons:photo"})])],8,tn)]),default:y(()=>[t[1]||(t[1]=d("span",null,"Preview",-1))]),_:2},1024)):C("",!0),f(a,{placement:"top",arrow:"",theme:"dark"},{button:y(()=>[d("div",{class:"action-btn",onClick:ee=>r.view(k.row.id)},[f(_,{icon:"heroicons:eye"})],8,nn)]),default:y(()=>[t[2]||(t[2]=d("span",null," View",-1))]),_:2},1024),this.$route.params.related_module!="media"?(m(),S(a,{key:1,placement:"top",arrow:"",theme:"dark"},{button:y(()=>[d("div",{class:"action-btn",onClick:ee=>r.edit(k.row.id)},[f(_,{icon:"heroicons:pencil-square"})],8,rn)]),default:y(()=>[t[3]||(t[3]=d("span",null," Edit",-1))]),_:2},1024)):C("",!0),f(a,{placement:"top",arrow:"",theme:"danger-500"},{button:y(()=>[d("div",{class:"action-btn text-red-500",onClick:ee=>r.del(k.row.id,k.row.originalIndex)},[f(_,{icon:"heroicons:trash"})],8,ln)]),default:y(()=>[t[4]||(t[4]=d("span",null,"Delete",-1))]),_:2},1024)])])):C("",!0)]),"pagination-bottom":y(k=>[d("div",an,[f(i,{total:o.total,current:o.current,"per-page":o.perPage,onPageChanged:r.changePage,perPageChanged:k.perPageChanged},null,8,["total","current","per-page","onPageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","onSelectedRowsChange","rows"])]),_:1}),f(T,{title:r.modules_.label},null,8,["title"]),f(le,{"preview-content":n.preview_content_data},null,8,["preview-content"])])}const dt=I(Qo,[["render",sn]]),cn=De(),E=Z(),He=L([]),me=L(!1),dn={props:{module:String,related_module:String,module_id:Number},components:{Modal:Se,Button:G,Table:dt},data(){return{list_store:cn,related_store:E,clearbutton:me}},created(){this.$watch(()=>E.select_list_modal,e=>{e?(E.search="",E.page.current=1,E.get_related_list(this.module_id,this.module,this.related_module,1)):E.search!=""&&(E.search="",me.value=!1)})},methods:{closeModal(){E.select_list_modal=!1},SaveSelect(){const e={};e.selected_row=He.value,e.module=this.module,e.related_module=this.related_module,e.id=this.module_id,E.save_selected_row(e)},selectionChanged(e){He.value=e.map(t=>t.id)},changePage(e){E.page.current=e,this.load_table()},search(){me.value=!0,this.load_table()},clearsearch(e){e||(E.search="",me.value=!1,this.load_table())},load_table(){E.get_related_list(this.module_id,this.module,this.related_module,1)}}},un={class:"mt-12"},mn={class:"w-full flex justify-between mt-5"};function fn(e,t,o,l,n,r){const c=p("Loading"),u=p("Table"),_=p("Button"),a=p("Modal");return m(),h("div",null,[f(c,{active:n.related_store.loading,"onUpdate:active":t[0]||(t[0]=i=>n.related_store.loading=i)},null,8,["active"]),f(a,{title:`Select ${o.related_module}`,activeModal:n.related_store.select_list_modal,onClose:r.closeModal,sizeClass:"max-w-7xl"},{default:y(()=>[f(u,{onSelectionChanged:r.selectionChanged,loading:n.list_store.loading,rows:n.related_store.list_data_remove_relation,perPage:n.list_store.page.per_page,total:n.list_store.page.total,current:n.list_store.page.current,onChangePage:r.changePage,onSearch:r.search,onClearsearch:r.clearsearch,action:0,clearbutton:n.clearbutton},null,8,["onSelectionChanged","loading","rows","perPage","total","current","onChangePage","onSearch","onClearsearch","clearbutton"]),d("footer",un,[d("div",mn,[f(_,{text:"Close",btnClass:"btn-dark",onClick:t[1]||(t[1]=i=>r.closeModal())}),f(_,{text:`Save ${o.related_module}`,btnClass:"btn-danger",onClick:t[2]||(t[2]=i=>r.SaveSelect())},null,8,["text"])])])]),_:1},8,["title","activeModal","onClose"])])}const pn=I(dn,[["render",fn]]);const Qe=De(),_n=Fe(),w=Z(),vn=L(""),fe=L(!1),Xe=re(),gn=Ot(),hn={components:{Card:ke,InputGroup:Je,Pagination:Ze,Tooltip:et,Button:G,Icon:K,Modal:ct,RelatedModal:lt,Table:dt,SelectListModal:pn,Badge:Dt},data(){return{related_store:w,method:vn,clearbutton:fe,module_store:gn}},created(){this.clear(),this.$watch(()=>this.$route.params.related_module,e=>{this.set_initial()})},mounted(){this.set_initial()},computed:{modules_(){const e=this.$route.params.related_module;return _n.module.find(o=>o.name==e)},get_related_menu_action(){const e=this.modules_.id;return w.related_menu.find(o=>o.related_module==e).action.split(",")}},methods:{clear(){w.page.current=1,w.modal=!1,w.select_list_modal=!1,w.search="",w.blocks=[],fe.value=!1},set_initial(){const e=this.$route.params;w.module=this.$route.params.module,w.related_module=this.$route.params.related_module,w.get_column(e.id,e.module,e.related_module),w.get_related_block()},openMediaModal(){Xe.title="Media",Xe.modal=!0},changePage(e){w.page.current=e,w.get_related_list(this.$route.params.id,this.$route.params.module,this.$route.params.related_module)},search(e){fe.value=!0,w.get_related_list(this.$route.params.id,this.$route.params.module,this.$route.params.related_module)},clearsearch(e){e||(w.search="",fe.value=!1,w.get_related_list(this.$route.params.id,this.$route.params.module,this.$route.params.related_module))},openSaveRelatedModal(){w.method="edit",w.id="",w.modal=!0},openSelectRelatedModal(){Qe.columns=[],Qe.list_data=[],w.select_list_modal=!0}}},yn={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},bn={key:0,class:"fromGroup relative"},wn={key:1,class:"fromGroup relative"},xn={class:"flex justify-end"};function Cn(e,t,o,l,n,r){const c=p("Badge"),u=p("Card"),_=p("Button"),a=p("SelectListModal"),i=p("Table");return m(),h("div",null,[(m(!0),h(q,null,J(n.related_store.blocks,v=>(m(),h("div",{key:v.id,class:"mt-4"},[f(u,{title:v.blocks[0].block},{default:y(()=>[d("div",yn,[(m(!0),h(q,null,J(v.blocks[0].fields,(M,T)=>(m(),h("div",{key:T,class:z([`custom-grid-${T%2}`,"mt-4"])},[M.type=="checkbox"?(m(),h("div",bn,[d("label",null,O(M.label),1),n.module_store.form[M.name]?(m(),S(c,{key:0,label:"Active",badgeClass:"bg-success-500 text-white"})):C("",!0),n.module_store.form[M.name]?C("",!0):(m(),S(c,{key:1,label:"Inactive",badgeClass:"bg-danger-500 text-white"}))])):(m(),h("div",wn,[d("label",null,O(M.label),1),d("span",null,O(n.module_store.form[M.name]),1)]))],2))),128))])]),_:2},1032,["title"])]))),128)),f(u,{class:"mt-4",title:r.modules_.label},{default:y(()=>[t[1]||(t[1]=d("br",null,null,-1)),d("div",xn,[(m(!0),h(q,null,J(r.get_related_menu_action,v=>(m(),h("div",{key:v},[v=="add"?(m(),S(_,{key:0,icon:"heroicons-outline:plus",text:`New ${r.modules_.label}`,btnClass:"btn-danger mr-2 py-2",onClick:t[0]||(t[0]=M=>this.$route.params.related_module=="media"?r.openMediaModal():r.openSaveRelatedModal())},null,8,["text"])):C("",!0),v=="select"?(m(),S(_,{key:1,icon:"heroicons-outline:plus",text:`Select ${r.modules_.label}`,btnClass:"btn-danger mr-2 py-2",onClick:r.openSelectRelatedModal},null,8,["text","onClick"])):C("",!0)]))),128))]),f(a,{module_id:parseInt(this.$route.params.id),module:this.$route.params.module,related_module:this.$route.params.related_module},null,8,["module_id","module","related_module"]),t[2]||(t[2]=d("br",null,null,-1)),f(i,{loading:n.related_store.loading,rows:n.related_store.list_data,perPage:n.related_store.page.per_page,total:n.related_store.page.total,current:n.related_store.page.current,onChangePage:r.changePage,onSearch:r.search,onClearsearch:r.clearsearch,clearbutton:n.clearbutton},null,8,["loading","rows","perPage","total","current","onChangePage","onSearch","onClearsearch","clearbutton"])]),_:1},8,["title"])])}const kn=I(hn,[["render",Cn],["__scopeId","data-v-326a7e94"]]);tt();const ut=ot("comment",{state:()=>({loading:!1,comment_list:[],comment_reply_list:[],current_page:1,last_page:0,comment_reply_id:0,form:{module:"",module_id:0,comment:"",comment_id:0}}),getters:{},actions:{clear(){this.form.comment="",this.comment_reply_id=0},async get(){this.loading=!0;const e=await this.axios.get("comments/get_comments/"+this.form.module+"/"+this.form.module_id+"?page="+this.current_page);this.last_page=e.data.meta.last_page,this.comment_list.push(...e.data.data),this.loading=!1},async get_reply(e){this.loading=!0,await this.axios.get("comments/get_comment_replies/"+e),this.loading=!1},async save(e=""){try{this.loading=!0;const t=await this.axios.post("comments/save",this.form);if(e=="")this.comment_list.unshift(t.data.data);else{const o=e.reply_count+1;e.reply_count=o,e.reply.unshift(t.data.data)}this.clear(),this.loading=!1}catch{}}},persist:!0}),be=L(""),Dn={props:{commentTo:String},components:{Textarea:$e,Button:G,Icon:K},data(){return{comment_reply:be}},mounted(){be.value="",this.$refs.textarea.textarea_focus()},methods:{save_reply(){this.$emit("save_reply",be.value)}}},Sn={class:"mt-4"},Mn={class:"flex justify-start mt-2"};function Fn(e,t,o,l,n,r){const c=p("Textarea"),u=p("Button");return m(),h("div",Sn,[d("form",{onSubmit:t[1]||(t[1]=nt(_=>r.save_reply(),["prevent"]))},[f(c,{ref:"textarea",modelValue:n.comment_reply,"onUpdate:modelValue":t[0]||(t[0]=_=>n.comment_reply=_),placeholder:`Reply to ${o.commentTo}`},null,8,["modelValue","placeholder"]),d("div",Mn,[f(u,{text:"Reply",icon:"heroicons:chat-bubble-left-ellipsis",btnClass:"btn-success btn-sm"})])],32)])}const $n=I(Dn,[["render",Fn]]);const A=ut(),Pn={name:"comment",props:{commentItem:{type:Object,default:{}},commentClass:{type:String,default:""}},components:{Icon:K,commentReply:$n},data(){return{comment_store:A}},methods:{findcomment(e,t){for(let o of t){if(o.id==e)return o;{const l=this.findcomment(e,o.reply);if(l!=null)return l}}return null},reply(e){A.form.comment_id=e,A.comment_reply_id=e},save_reply(e){A.form.comment=e;const t=this.findcomment(A.form.comment_id,A.comment_list);A.save(t)},view_more_replies(e){this.show_replies(e,"view_more")},async show_replies(e,t=""){try{A.loading=!0,A.comment_reply_id=0;const o=this.findcomment(e,A.comment_list);let l;t=="view_more"?l=parseInt(o.current_page)+1:(o.reply=[],l=parseInt(o.current_page));const n=await this.$axios.get("comments/get_comment_replies/"+e+"?page="+l);o.current_page=l,o.reply.push(...n.data.data),A.loading=!1}catch{}}}},Tn={class:"flex justify-between commentItem.s-center mb-2"},Bn={class:"flex items-center"},In={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold"},Rn={class:"text-xs text-gray-600 dark:text-gray-400"},jn={class:"text-gray-500 dark:text-gray-400"},En={class:"flex items-center mt-3 space-x-4"},On={key:0};function An(e,t,o,l,n,r){const c=p("Icon"),u=p("comment",!0),_=p("commentReply");return m(),h("div",null,[d("article",{class:z([o.commentClass,o.commentItem.comment_id==0&&o.commentItem.reply.length>0?"comment_parent":""])},[d("footer",Tn,[d("div",Bn,[d("p",In,O(o.commentItem.comment_by),1),d("p",Rn,O(o.commentItem.timestamp),1)])]),d("p",jn,O(o.commentItem.comment),1),d("div",null,[d("div",En,[d("button",{onClick:t[0]||(t[0]=a=>r.reply(o.commentItem.id)),type:"button",class:"flex items-center text-xs text-gray-500 hover:underline dark:text-gray-400 font-medium"},[f(c,{icon:"heroicons-outline:chat-bubble-left-ellipsis",class:"mr-1"}),t[3]||(t[3]=Me(" Reply "))]),o.commentItem.reply_count!=0?(m(),h("button",{key:0,onClick:t[1]||(t[1]=a=>r.show_replies(o.commentItem.id)),type:"button",class:"flex items-center text-xs text-gray-500 hover:underline dark:text-gray-400 font-medium"},O(o.commentItem.reply_count)+" Replies ",1)):C("",!0)])]),o.commentItem.reply&&o.commentItem.reply.length>0?(m(),h("div",On,[(m(!0),h(q,null,J(o.commentItem.reply,(a,i)=>(m(),S(u,{key:a.id,commentClass:"comment","comment-item":a},null,8,["comment-item"]))),128))])):C("",!0),o.commentItem.reply.length!=0&&o.commentItem.reply.length<o.commentItem.reply_count?(m(),h("button",{key:1,onClick:t[2]||(t[2]=a=>r.view_more_replies(o.commentItem.id)),type:"button",class:"comment flex items-center text-xs text-gray-500 hover:underline dark:text-gray-400 font-medium"}," View more replies ")):C("",!0),d("div",null,[n.comment_store.comment_reply_id==o.commentItem.id?(m(),S(_,{key:0,onSave_reply:r.save_reply,"comment-to":o.commentItem.comment_by},null,8,["onSave_reply","comment-to"])):C("",!0)])],2)])}const zn=I(Pn,[["render",An]]);const P=ut(),Ln=L(""),Vn={components:{Card:ke,comment:zn,Button:G,Textarea:$e,Icon:K},created(){P.loading=!1,P.comment_list=[],P.comment_reply_list=[],P.current_page=1,P.form.comment_id=0},mounted(){P.clear(),P.form.module_id=this.$route.params.id,P.form.module=this.$route.params.module,P.get(),window.addEventListener("scroll",function(){const e=window.scrollY+document.body.clientHeight,t=document.body.scrollHeight;e==t&&P.current_page<P.last_page&&(P.current_page++,P.get())})},data(){return{comment_store:P,comment_reply:Ln}}},Nn={class:"mt-6"},Un={class:"flex justify-end mt-4"},Gn={key:0},qn={key:1};function Kn(e,t,o,l,n,r){const c=p("Loading"),u=p("Textarea"),_=p("Button"),a=p("Card"),i=p("comment");return m(),h("div",Nn,[f(c,{active:n.comment_store.loading,"onUpdate:active":t[0]||(t[0]=v=>n.comment_store.loading=v)},null,8,["active"]),d("div",null,[f(a,null,{default:y(()=>[d("form",{onSubmit:t[2]||(t[2]=nt(v=>n.comment_store.save(),["prevent"]))},[f(u,{modelValue:n.comment_store.form.comment,"onUpdate:modelValue":t[1]||(t[1]=v=>n.comment_store.form.comment=v),placeholder:"Write a comments...",rows:6},null,8,["modelValue"]),d("div",Un,[f(_,{text:"Comment",icon:"heroicons-outline:chat-bubble-bottom-center-text",btnClass:"btn-success btn-sm"})])],32)]),_:1}),f(a,{title:"Comments",class:"mt-4"},{default:y(()=>[n.comment_store.comment_list.length>0?(m(),h("div",Gn,[(m(!0),h(q,null,J(n.comment_store.comment_list,(v,M)=>(m(),h("div",{class:"comment-border-top p-3 text-base bg-white relative",key:M},[f(i,{"comment-item":v},null,8,["comment-item"])]))),128))])):(m(),h("div",qn,t[3]||(t[3]=[d("div",{class:"p-6 border rounded mt-4"},[d("p",{class:"text-center"},"No Comments")],-1)])))]),_:1})])])}const Wn=I(Vn,[["render",Kn]]),Yn=Fe(),Hn={components:{Menu:Ct,Breadcrum:kt,Relatedlist:kn,Comment:Wn},computed:{modules_(){const e=this.$route.params.related_module;return Yn.module.find(o=>o.name==e)}}};function Qn(e,t,o,l,n,r){const c=p("Breadcrum"),u=p("Menu"),_=p("Comment"),a=p("Relatedlist");return m(),h("div",null,[f(c,{mode:"view"}),f(u),d("div",null,[this.$route.params.related_module=="comments"?(m(),S(_,{key:0})):(m(),S(a,{key:1}))])])}const gr=I(Hn,[["render",Qn]]);export{gr as default};

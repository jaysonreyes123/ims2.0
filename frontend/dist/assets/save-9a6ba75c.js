import{B as I}from"./index-a82eb94e.js";import{I as M}from"./index-96abb035.js";import{I as L}from"./index-4dd669d9.js";import{T as O,C as j}from"./vue-select.es-b48464d0.js";import{T as q}from"./index-299ec2c2.js";import{C as A}from"./index-de911cd9.js";import{u as E}from"./dropdown-c7aa31e0.js";import{u as z}from"./report-4c7cd817.js";import{r as C,_ as D,a as u,b as i,C as m,w as y,d as a,f as l,c as p,D as T,n as k,t as x,F as B,h as b,g as v,i as G}from"./index-703ff788.js";import{S as H}from"./sweetalert2.all-43cb5b43.js";const g=E(),r=z();C("");C([]);const X=[{label:"Equal",value:"="},{label:"Not Equal",value:"<>"}];let c=C(0),Y=[{id:1,title:"Report Details"},{id:2,title:"Select Columns"},{id:3,title:"Filters"}];const J={components:{Button:I,Icon:M,Textinput:q,InputGroup:L,Textarea:O,Card:A,Select:j},mounted(){this.clear2(),c.value=0,r.id=this.$route.params.id,r.form.type="list",g.get_dropdown("modules"),r.module_list=g.dropdownlist.modules,r.id!=""&&r.id!==void 0&&r.get()},data(){return{steps:Y,stepNumber:c,dropdown_store:g,report:r,operator:X}},methods:{clear2(){r.loading=!1,r.form.report_name="",r.form.modules="",r.form.selected_column=[],r.relation_module=[],r.form.related_module=[],r.form.filter=[{field:"",operator:"",type:"text",value:""}]},clear(){r.form.selected_column=[],r.form.related_module=[],r.form.filter=[{field:"",operator:"",type:"text",value:""}]},andRemoveCondition(d){r.form.filter.splice(d,1)},andCondition(){r.form.filter.push({field:"",operator:"",type:"text",value:""})},filter_and_select_option(d,o){r.form.filter[o].type=d.type,r.form.filter[o].operator="=",d.type=="dropdown"&&(g.dropdownlist_data=[],g.get_dropdown_list(d.value))},SelectModule(d){this.clear(),r.module=d.name,r.get_relation_module()},prev(){c.value--},submit(){let d="";if(c.value==0)r.form.report_name==""&&(d+="<p class='text-red-500'>Report name is required</p>"),r.form.modules==""&&(d+="<p class='text-red-500'>Module is required</p>"),d==""&&r.get_fields();else if(c.value==1)r.form.selected_column.length==0&&(d="<p class='text-red-500'>Column is required</p>");else if(c.value===2)return r.save(),!1;if(d!="")return H.fire({icon:"error",title:"Something wrong",html:d}),!1;c.value++}}},K={class:"flex z-[5] items-center relative justify-center md:mx-8"},P={key:0},Q={key:1,class:"text-3xl"},W={class:"w-max"},Z={class:"conten-box mt-14 border-t border-slate-100 dark:border-slate-700 -mx-6 px-6 pt-6"},$={key:0,class:"px-5"},ee={class:"grid lg:grid-cols-4 grid-cols-2"},te={class:"grid lg:grid-cols-4 grid-cols-2"},oe={class:"grid lg:grid-cols-4 grid-cols-2"},le={key:1,class:"px-5"},re={class:"fromGroup relative mt-5"},se={key:0,class:"font-bold text-[18px] text-black"},ne={key:1,class:"text-[12px]"},ie={key:2,class:"px-5"},de={class:"col-start-1 col-span-3"},pe={key:0,class:"font-bold text-[18px] text-black"},ae={key:1,class:"text-[12px]"},ue={class:"col-start-4 col-span-2"},me={class:"col-start-6 col-span-3"},ce={class:"flex justify-center"},fe=["onClick"];function _e(d,o,xe,be,e,f){const R=u("Loading"),w=u("Icon"),V=u("Textinput"),_=u("Select"),F=u("Textarea"),S=u("flat-pickr"),h=u("Button"),U=u("Card");return i(),m(U,null,{default:y(()=>[a(R,{active:e.report.loading,"onUpdate:active":o[0]||(o[0]=s=>e.report.loading=s)},null,8,["active"]),l("div",K,[(i(!0),p(B,null,T(e.steps,(s,t)=>(i(),p("div",{class:"relative z-[1] items-center item flex flex-start flex-1 last:flex-none group",key:t},[l("div",{class:k([`   ${e.stepNumber>=t?"bg-slate-900 text-white ring-slate-900 ring-offset-2 dark:ring-offset-slate-500 dark:bg-slate-900 dark:ring-slate-900":"bg-white ring-slate-900 ring-opacity-70  text-slate-900 dark:text-slate-300 dark:bg-slate-600 dark:ring-slate-600 text-opacity-70"}`,"transition duration-150 icon-box md:h-12 md:w-12 h-7 w-7 rounded-full flex flex-col items-center justify-center relative z-[66] ring-1 md:text-lg text-base font-medium"])},[e.stepNumber<=t?(i(),p("span",P,x(t+1),1)):(i(),p("span",Q,[a(w,{icon:"bx:check-double"})]))],2),l("div",{class:k(["absolute top-1/2 h-[2px] w-full",e.stepNumber>=t?"bg-slate-900 dark:bg-slate-900":"bg-[#E0EAFF] dark:bg-slate-700"])},null,2),l("div",{class:k(["absolute top-full text-base md:leading-6 mt-3 transition duration-150 md:opacity-100 opacity-0 group-hover:opacity-100",e.stepNumber>=t?" text-slate-900 dark:text-slate-300":"text-slate-500 dark:text-slate-300 dark:text-opacity-40"])},[l("span",W,x(s.title),1)],2)]))),128))]),l("div",Z,[e.stepNumber===0?(i(),p("div",$,[o[9]||(o[9]=l("br",null,null,-1)),l("div",ee,[o[6]||(o[6]=l("span",null,[b("Report Name"),l("span",{class:"text-red-500"},"*")],-1)),l("div",null,[a(V,{placeholder:"Report Name",modelValue:e.report.form.report_name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.report.form.report_name=s)},null,8,["modelValue"])])]),o[10]||(o[10]=l("br",null,null,-1)),l("div",te,[o[7]||(o[7]=l("span",null,[b("Module"),l("span",{class:"text-red-500"},"*")],-1)),l("div",null,[a(_,{placeholder:"Select an option",options:e.dropdown_store.dropdownlist.modules,modelValue:e.report.form.modules,"onUpdate:modelValue":o[2]||(o[2]=s=>e.report.form.modules=s),"onOption:selected":f.SelectModule,reduce:s=>s.name},null,8,["options","modelValue","onOption:selected","reduce"])])]),o[11]||(o[11]=l("br",null,null,-1)),l("div",oe,[o[8]||(o[8]=l("span",null,[b("Relation Module ("),l("i",null,"Optional"),b(" )")],-1)),l("div",null,[a(_,{placeholder:"Select an option",options:e.report.relation_module,modelValue:e.report.form.related_module,"onUpdate:modelValue":o[3]||(o[3]=s=>e.report.form.related_module=s),reduce:s=>s.value,selectable:s=>e.report.form.related_module.length<2,multiple:""},null,8,["options","modelValue","reduce","selectable"])])])])):v("",!0),e.stepNumber===1?(i(),p("div",le,[l("div",re,[o[12]||(o[12]=l("label",{class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},[b("Select Columns(MAX 10)"),l("span",{class:"text-red-500"},"*")],-1)),a(_,{placeholder:"Select an option",options:e.report.fields_list,modelValue:e.report.form.selected_column,"onUpdate:modelValue":o[4]||(o[4]=s=>e.report.form.selected_column=s),closeOnSelect:!1,multiple:"",selectable:s=>!e.report.form.selected_column.includes(s.value)&&e.report.form.selected_column.length<15&&!s.header,reduce:s=>s.value},{option:y(({header:s,label:t})=>[s?(i(),p("h6",se,x(t),1)):(i(),p("span",ne,x(t),1))]),_:1},8,["options","modelValue","selectable","reduce"])])])):v("",!0),e.stepNumber===2?(i(),p("div",ie,[a(U,{title:"Choose List conditions"},{default:y(()=>[o[13]||(o[13]=l("br",null,null,-1)),o[14]||(o[14]=l("label",null,"All Conditions (All conditions must be met)",-1)),(i(!0),p(B,null,T(e.report.form.filter,(s,t)=>(i(),p("div",{class:"grid grid-cols-9 gap-8 mt-4",key:t},[l("div",de,[a(_,{"onOption:selected":n=>f.filter_and_select_option(n,t),placeholder:"Select an option",options:e.report.fields_list,modelValue:e.report.form.filter[t].field,"onUpdate:modelValue":n=>e.report.form.filter[t].field=n,reduce:n=>n.value,selectable:n=>!n.header},{option:y(({header:n,label:N})=>[n?(i(),p("h6",pe,x(N),1)):(i(),p("span",ae,x(N),1))]),_:2},1032,["onOption:selected","options","modelValue","onUpdate:modelValue","reduce","selectable"])]),l("div",ue,[a(_,{placeholder:"Select an option",options:e.operator,modelValue:e.report.form.filter[t].operator,"onUpdate:modelValue":n=>e.report.form.filter[t].operator=n,reduce:n=>n.value},null,8,["options","modelValue","onUpdate:modelValue","reduce"])]),l("div",me,[e.report.form.filter[t].type=="text"?(i(),m(V,{key:0,placeholder:"",modelValue:e.report.form.filter[t].value,"onUpdate:modelValue":n=>e.report.form.filter[t].value=n},null,8,["modelValue","onUpdate:modelValue"])):e.report.form.filter[t].type=="textarea"?(i(),m(F,{key:1,modelValue:e.report.form.filter[t].value,"onUpdate:modelValue":n=>e.report.form.filter[t].value=n},null,8,["modelValue","onUpdate:modelValue"])):e.report.form.filter[t].type=="date"?(i(),m(S,{key:2,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"},modelValue:e.report.form.filter[t].value,"onUpdate:modelValue":n=>e.report.form.filter[t].value=n},null,8,["modelValue","onUpdate:modelValue"])):e.report.form.filter[t].type=="time"?(i(),m(S,{key:3,class:"form-control",placeholder:"HH:mm:00",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1},modelValue:e.report.form.filter[t].value,"onUpdate:modelValue":n=>e.report.form.filter[t].value=n},null,8,["modelValue","onUpdate:modelValue"])):e.report.form.filter[t].type=="dropdown"?(i(),m(_,{key:4,placeholder:"Select an option",options:e.dropdown_store.dropdownlist_data},null,8,["options"])):(i(),m(V,{key:5,type:e.report.form.filter[t].type,placeholder:"",modelValue:e.report.form.filter[t].value,"onUpdate:modelValue":n=>e.report.form.filter[t].value=n},null,8,["type","modelValue","onUpdate:modelValue"]))]),l("div",ce,[t!==0?(i(),p("button",{key:0,type:"button",class:"inline-flex items-center justify-center h-10 w-10 bg-danger-500 text-lg border rounded border-danger-500 text-white",onClick:n=>f.andRemoveCondition(t)},[a(w,{icon:"heroicons-outline:trash"})],8,fe)):v("",!0)])]))),128)),a(h,{icon:"heroicons-outline:plus",text:"Add Condition",btnClass:"btn-success mr-2 py-2 mt-3",onClick:f.andCondition},null,8,["onClick"])]),_:1})])):v("",!0),l("div",{class:k(["mt-10",e.stepNumber>0?"flex justify-between":" text-right"])},[this.stepNumber!==0?(i(),m(h,{key:0,onClick:o[5]||(o[5]=G(s=>f.prev(),["prevent"])),text:"prev",btnClass:"btn-dark"})):v("",!0),a(h,{onClick:f.submit,text:e.stepNumber!==this.steps.length-1?"next":"Save and Generate",btnClass:"btn-danger"},null,8,["onClick","text"])],2)])]),_:1})}const Ne=D(J,[["render",_e]]);export{Ne as L};

import{T as K}from"./table-6500a8bf.js";import{M as Q}from"./index-0341d3cc.js";import{B as F}from"./index-a82eb94e.js";import{u as N}from"./list-108db02a.js";import{u as O,_ as G,a as d,b as l,c as s,d as i,w as U,r as x,f as m,i as X,F as C,D as R,C as y,n as Z,h,t as v,g as _,H as $,W as ee}from"./index-703ff788.js";import{I as oe}from"./index-4dd669d9.js";import{B as te}from"./Breadcrum-347cba3e.js";import{C as le}from"./index-de911cd9.js";import{T as re}from"./index-299ec2c2.js";import{T as se,C as ae}from"./vue-select.es-b48464d0.js";import{S as ne}from"./index-1af20386.js";import{S as me}from"./sweetalert2.all-43cb5b43.js";import{M as ue}from"./edit_map-3cc67126.js";import{u as de}from"./module-ee2e983e.js";import{u as ce}from"./dropdown-c7aa31e0.js";import{L as ie}from"./save-9a6ba75c.js";import"./Table-f62e2cbb.js";import"./index-99661389.js";import"./index-96abb035.js";import"./index-750830ed.js";import"./transition-a22e345f.js";import"./use-outside-click-40943b94.js";import"./mapbox-gl-6cf0b8b4.js";import"./index-3fa781ec.js";import"./report-4c7cd817.js";const _e=O(),b=N(),pe={props:{module_:{type:String,default:""}},components:{Modal:Q,Button:F,Table:K},data(){return{list_store:b}},computed:{modules_(){const o=this.module_;return _e.module.find(u=>u.name==o)},columns_(){return b.columns_header.filter(o=>o.field!="action")}},mounted(){console.log("Test"),b.module=this.module_,b.clear(),b.get_column()},methods:{closeModal(){b.modal=!1,b.page.current!=1&&this.pageChange(1)},related_selected_row(o,r){this.$emit("related_selected_row",this.module_,r)},pageChange(o){b.page.current=o,b.list_function(b.module)}}};function be(o,r,u,p,t,c){const g=d("Table"),V=d("Modal");return l(),s("div",null,[i(V,{title:`Select ${c.modules_.label}`,activeModal:t.list_store.modal,onClose:c.closeModal,sizeClass:"max-w-7xl"},{default:U(()=>[i(g,{checkbox:!1,actionHeader:!1,select_row:!0,loading:t.list_store.loading,rows:t.list_store.list_data,columns:c.columns_,total:t.list_store.page.total,perPage:t.list_store.page.per_page,current:t.list_store.page.current,onRelated_selected_row:c.related_selected_row,onPageChange:c.pageChange},null,8,["loading","rows","columns","total","perPage","current","onRelated_selected_row","onPageChange"])]),_:1},8,["title","activeModal","onClose"])])}const he=G(pe,[["render",be]]);const E=O(),n=de(),ve=ce(),H=N(),T=x(""),q=x(""),B=x(""),f=x([]),ye={components:{Card:le,Textinput:re,Button:F,Textarea:se,Select:ae,Map:ue,Switch:ne,Breadcrum:te,InputGroup:oe,popupList:he},data(){return{module_store:n,dropdown_store:ve,modules:T,related_module_active:B}},created(){H.modal=!1,T.value=this.$route.params.module},mounted(){const o=this.$route.params.id;f.value=[],n.module=T.value,n.get_edit_form(o),n.id=o},computed:{modules_(){const o=this.$route.params.module;return E.module.find(u=>u.name==o)}},methods:{emailvalidation(o,r){var u=n.form[o].match(/^\S+@\S+\.\S+$/);if(u)f.value=f.value.filter(p=>!Object.keys(p).includes(r));else if(f.value.find(p=>p[r])===void 0){let p={};p[r]="Must be valid email",f.value.push(p)}},phonevalidation(o){n.form[o]=n.form[o].replace(/[^0-9+]/g,"");let r=0;n.form[o].length>=4&&(n.form[o][0]==0&&n.form[o][1]==9?r=11:n.form[o][0]==6&&n.form[o][1]==3&&n.form[o][2]==9?r=12:n.form[o][0]=="+"&&n.form[o][1]==6&&n.form[o][2]==3&&n.form[o][3]==9?r=13:(r=0,n.form[o]=""),r!=0&&(n.form[o]=n.form[o].slice(0,r)))},moduleDetails(o){const r=o;return E.module.find(p=>p.id==r)},save(){var o="";if(Object.keys(n.required_field).map(u=>{n.form[u]==""&&(o+=`<span class="text-red-500"><b>${n.required_field[u]}</b> is required field</span><br>`)}),f.value.map(u=>{o+=`<span class="text-red-500"><b>${Object.keys(u)}</b> ${Object.values(u)}<br>`}),o!="")return me.fire({icon:"error",title:"Something Wrong",html:o}),!1;n.save()},updateCoordinates(o){const{lng:r,lat:u}=o;n.form.coordinates=r+","+u},popupListModal(o,r){H.modal=!0;const u=this.moduleDetails(r);B.value=u.name,q.value=o},related_selected_row(o,r){n.get_single_item(o,r,q.value),B.value="",q.value=""}}},ke={key:0},fe={class:"lg:grid lg:grid-cols-2 gap-12"},ge={key:1},Ve={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},xe={key:0},we={class:"fromGroup relative"},Se={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ce={key:0,class:"text-red-500"},Ue={key:1},Me={class:"fromGroup relative"},Re={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Te={key:0,class:"text-red-500"},qe={key:2},Be={class:"fromGroup relative"},Ge={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Le={key:0,class:"text-red-500"},De={key:3},Ie={class:"fromGroup relative"},Ee={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},He={key:0,class:"text-red-500"},je={key:4},Fe={class:"fromGroup relative"},Ne={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Oe={key:0,class:"text-red-500"},Pe={key:5,class:"fromGroup relative"},ze={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},We={key:0,class:"text-red-500"},Ae={key:6,class:"fromGroup relative"},Ye={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Je={key:0,class:"text-red-500"},Ke={key:7,class:"fromGroup relative"},Qe={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Xe={key:0,class:"text-red-500"},Ze=["onUpdate:modelValue"],$e={key:8},eo={class:"fromGroup relative"},oo={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},to={key:0,class:"text-red-500"};function lo(o,r,u,p,t,c){const g=d("Breadcrum"),V=d("Loading"),w=d("Textinput"),P=d("Map"),L=d("flat-pickr"),z=d("Textarea"),W=d("Select"),D=d("Switch"),M=d("Button"),A=d("InputGroup"),I=d("Card"),Y=d("popupList");return l(),s(C,null,[m("div",null,[i(g,{mode:"save"}),i(V,{active:t.module_store.loading,"onUpdate:active":r[0]||(r[0]=k=>t.module_store.loading=k)},null,8,["active"]),t.module_store.loading?_("",!0):(l(),s("form",{key:0,onSubmit:r[1]||(r[1]=X((...k)=>c.save&&c.save(...k),["prevent"]))},[(l(!0),s(C,null,R(t.module_store.data.blocks,(k,J)=>(l(),y(I,{key:J,title:k.block,class:"mb-4"},{default:U(()=>[k.block=="Location Details"?(l(),s("div",ke,[m("div",fe,[m("div",null,[(l(!0),s(C,null,R(k.fields,(e,S)=>(l(),y(w,{isReadonly:e.readonly==1,class:"mt-4",key:S,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,label:e.label,placeholder:`Enter ${e.label}`},null,8,["isReadonly","modelValue","onUpdate:modelValue","label","placeholder"]))),128))]),m("div",null,[i(P,{set_coordinates:t.module_store.form.coordinates,onUpdateCoordinate:c.updateCoordinates},null,8,["set_coordinates","onUpdateCoordinate"])])])])):(l(),s("div",ge,[m("div",Ve,[(l(!0),s(C,null,R(k.fields.filter(e=>e.display_type==1),(e,S)=>(l(),s("div",{key:S,class:Z([`custom-grid-${S%2}`,"mt-4"])},[e.type=="time"?(l(),s("div",xe,[m("div",we,[m("label",Se,[h(v(e.label)+" ",1),e.required?(l(),s("span",Ce,"*")):_("",!0)]),i(L,{modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,class:"form-control",placeholder:"HH:mm:00",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1}},null,8,["modelValue","onUpdate:modelValue"])])])):e.type=="date"?(l(),s("div",Ue,[m("div",Me,[m("label",Re,[h(v(e.label)+" ",1),e.required?(l(),s("span",Te,"*")):_("",!0)]),i(L,{modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"}},null,8,["modelValue","onUpdate:modelValue"])])])):e.type=="phone"?(l(),s("div",qe,[m("div",Be,[m("label",Ge,[h(v(e.label)+" ",1),e.required?(l(),s("span",Le,"*")):_("",!0)]),i(w,{onInput:a=>c.phonevalidation(e.name),isReadonly:e.readonly==1,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,placeholder:`Enter ${e.label}`},null,8,["onInput","isReadonly","modelValue","onUpdate:modelValue","placeholder"])])])):e.type=="email"?(l(),s("div",De,[m("div",Ie,[m("label",Ee,[h(v(e.label)+" ",1),e.required?(l(),s("span",He,"*")):_("",!0)]),i(w,{onInput:a=>c.emailvalidation(e.name,e.label),isReadonly:e.readonly==1,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,placeholder:`Enter ${e.label}`},null,8,["onInput","isReadonly","modelValue","onUpdate:modelValue","placeholder"])])])):e.type=="textarea"?(l(),s("div",je,[m("div",Fe,[m("label",Ne,[h(v(e.label)+" ",1),e.required?(l(),s("span",Oe,"*")):_("",!0)]),i(z,{isReadonly:e.readonly==1,placeholder:`Enter ${e.label}`,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a},null,8,["isReadonly","placeholder","modelValue","onUpdate:modelValue"])])])):e.type=="dropdown"?(l(),s("div",Pe,[m("label",ze,[h(v(e.label)+" ",1),e.required?(l(),s("span",We,"*")):_("",!0)]),i(W,{disabled:e.readonly==1,placeholder:"Select an option",reduce:a=>a.label,options:t.dropdown_store.dropdownlist[e.name],modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a},null,8,["disabled","reduce","options","modelValue","onUpdate:modelValue"])])):e.type=="checkbox"?(l(),s("div",Ae,[m("label",Ye,[h(v(e.label)+" ",1),e.required?(l(),s("span",Je,"*")):_("",!0)]),t.module_store.form[e.name]==1?(l(),y(D,{key:0,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,active:!0,class:"mb-5"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),t.module_store.form[e.name]==0?(l(),y(D,{key:1,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,active:!1,class:"mb-5"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0)])):e.type=="relation"?(l(),s("div",Ke,[m("label",Qe,[h(v(e.label)+" ",1),e.required?(l(),s("span",Xe,"*")):_("",!0)]),i(A,{type:"text",isReadonly:"",modelValue:t.module_store.relation_field[e.name],placeholder:""},{append:U(()=>[e.related_fields?(l(),y(M,{key:0,onClick:a=>c.popupListModal(e.name,e.related_fields.related_module),isDisabled:!1,type:"button",icon:"heroicons-outline:plus",btnClass:"btn-outline-dark disabled:bg-slate-300 disabled:cursor-not-allowed"},null,8,["onClick"])):(l(),y(M,{key:1,isDisabled:!0,type:"button",icon:"heroicons-outline:plus",btnClass:"btn-outline-dark disabled:bg-slate-300 disabled:cursor-not-allowed"}))]),_:2},1032,["modelValue"]),$(m("input",{type:"hidden","onUpdate:modelValue":a=>t.module_store.form[e.name]=a},null,8,Ze),[[ee,t.module_store.form[e.name]]])])):(l(),s("div",$e,[m("div",eo,[m("label",oo,[h(v(e.label)+" ",1),e.required?(l(),s("span",to,"*")):_("",!0)]),i(w,{isReadonly:e.readonly==1,modelValue:t.module_store.form[e.name],"onUpdate:modelValue":a=>t.module_store.form[e.name]=a,placeholder:`Enter ${e.label}`},null,8,["isReadonly","modelValue","onUpdate:modelValue","placeholder"])])]))],2))),128))])]))]),_:2},1032,["title"]))),128)),i(I,null,{default:U(()=>[i(M,{class:"w-full bg-emerald-500/100 hover:bg-emerald-600/100",text:`Save ${c.modules_.label}`},null,8,["text"])]),_:1})],32))]),t.related_module_active!=""?(l(),y(Y,{key:0,onRelated_selected_row:c.related_selected_row,module_:t.related_module_active},null,8,["onRelated_selected_row","module_"])):_("",!0)],64)}const ro=G(ye,[["render",lo]]),j=x(),so={components:{Save:ro,ReportSave:ie},created(){j.value=this.$route.params.module},data(){return{modules:j}}};function ao(o,r,u,p,t,c){const g=d("ReportSave"),V=d("Save");return l(),s("div",null,[t.modules=="reports"?(l(),y(g,{key:0})):(l(),y(V,{key:1}))])}const Go=G(so,[["render",ao]]);export{Go as default};

import{M as B,a as V,b as z,c as F,d as G}from"./mapbox-gl-6cf0b8b4.js";import{C as N}from"./index-de911cd9.js";import{r as f,_ as D,a as u,b as o,c as a,f as e,n as v,d as _,w as d,F as m,D as b,C as M,h as l,t as i,g as c}from"./index-703ff788.js";const w=f(),L=f([]),S=f([]),j={props:{legend:{type:Boolean,default:!0},classHeight:{type:String,default:"h-screen"}},components:{MapboxMap:B,MapboxMarker:V,MapboxGeocoder:z,MapboxImages:F,MapboxLayer:G,Card:N},data(){return{coordinates:[0,0],incident_map_:L,resources_map_:S,map:w}},mounted(){this.incident_map(),this.resources_map()},methods:{async incident_map(){try{const r=await this.$axios.get("map/incidents");this.incident_map_=r.data}catch(r){console.log(r)}},async resources_map(){try{const r=await this.$axios.get("map/resources");this.resources_map_=r.data}catch(r){console.log(r)}},flyto(r){w.value.flyTo({center:r})}}},H={class:"shadow-lg"},T={class:"lg:grid grid-cols-5 rounded-md"},Y={style:{width:"300px"}},E={class:"text-xs mt-1"},J={style:{width:"300px"}},R={class:"text-xs mt-1"},X={key:0,class:"bg-white p-5 h-screen overflow-x-auto"},Z={class:"list-item mt-1"},O=["onClick"],P={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},Q={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"},U={key:0},W={class:"list-item mt-1"},q=["onClick"],A={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},K={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"};function $(r,s,x,ee,n,g){const h=u("MapboxGeocoder"),y=u("router-link"),k=u("MapboxMarker"),C=u("MapboxMap");return o(),a("div",H,[e("div",T,[e("div",{class:v(x.legend?"col-span-4":"col-span-5")},[_(C,{class:v(x.classHeight),onMbCreated:s[0]||(s[0]=t=>n.map=t),"access-token":"pk.eyJ1IjoiamF5c29ucmV5ZXMyNiIsImEiOiJjbGd1aDViYXUwZzM2M3BsamlpdWtjbzBsIn0.DmYf96Yhwg7vip5Qpzghnw","map-style":"mapbox://styles/mapbox/satellite-streets-v12",center:[122.4902841093123,12.573067659271082],zoom:5},{default:d(()=>[_(h,{countries:"PH"}),n.incident_map_!==void 0?(o(!0),a(m,{key:0},b(n.incident_map_.features,(t,p)=>(o(),M(k,{key:p,"lng-lat":t.geometry.coordinates},{popup:d(()=>[e("div",Y,[s[3]||(s[3]=e("p",{class:"text-base"},[e("b",null,"Incident")],-1)),e("div",E,[_(y,{class:"text-blue-600",to:`/app/module/incidents/detail/${t.properties.id}`},{default:d(()=>[l(i(t.properties.incident_no),1)]),_:2},1032,["to"]),e("p",null,[s[1]||(s[1]=e("b",null,"Status: ",-1)),l(i(t.properties.status),1)]),e("p",null,[s[2]||(s[2]=e("b",null,"Location: ",-1)),l(i(t.properties.location),1)])])])]),default:d(()=>[s[4]||(s[4]=e("p",{class:"custom-marker"},[e("span",{class:"pulsing-dot-red"})],-1))]),_:2},1032,["lng-lat"]))),128)):c("",!0),n.resources_map_!==void 0?(o(!0),a(m,{key:1},b(n.resources_map_.features,(t,p)=>(o(),M(k,{key:p,"lng-lat":t.geometry.coordinates},{popup:d(()=>[e("div",J,[s[7]||(s[7]=e("p",{class:"text-base"},[e("b",null,"Resources")],-1)),e("div",R,[_(y,{class:"text-blue-600",to:`/app/module/resources/detail/${t.properties.id}`},{default:d(()=>[l(i(t.properties.name),1)]),_:2},1032,["to"]),e("p",null,[s[5]||(s[5]=e("b",null,"Type: ",-1)),l(i(t.properties.type),1)]),e("p",null,[s[6]||(s[6]=e("b",null,"Status: ",-1)),l(i(t.properties.status),1)])])])]),default:d(()=>[s[8]||(s[8]=e("p",{class:"custom-marker"},[e("span",{class:"pulsing-dot-black"})],-1))]),_:2},1032,["lng-lat"]))),128)):c("",!0)]),_:1},8,["class"])],2),x.legend?(o(),a("div",X,[e("div",null,[s[10]||(s[10]=e("p",{class:"text-sm font-bold"},"Current incidents",-1)),e("ul",Z,[(o(!0),a(m,null,b(n.incident_map_.features,(t,p)=>(o(),a("li",{onClick:I=>g.flyto(t.geometry.coordinates),key:p,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[e("div",P,[e("div",Q,[s[9]||(s[9]=e("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#FF0000] mr-2"},null,-1)),l(" "+i(t.properties.incident_no),1)])])],8,O))),128))])]),s[13]||(s[13]=e("br",null,null,-1)),n.resources_map_!=""?(o(),a("div",U,[s[12]||(s[12]=e("p",{class:"text-sm font-bold"},"Current Resources",-1)),e("ul",W,[n.resources_map_!==void 0?(o(!0),a(m,{key:0},b(n.resources_map_.features,(t,p)=>(o(),a("li",{onClick:I=>g.flyto(t.geometry.coordinates),key:p,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[e("div",A,[e("div",K,[s[11]||(s[11]=e("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#000000] mr-2"},null,-1)),l(" "+i(t.properties.name),1)])])],8,q))),128)):c("",!0)])])):c("",!0)])):c("",!0)])])}const re=D(j,[["render",$],["__scopeId","data-v-b2dbb292"]]);export{re as i};

import{S as c,U as h}from"./index-703ff788.js";c();const u=h("list",{state:()=>({module:"",modal:!1,loading:!1,list_data:[],columns:[],columns_header:[],filter_data:[],search:"",page:{total:0,current:1,per_page:0}}),actions:{clear(){this.list_data=[],this.columns=[],this.columns_header=[]},async get_column(){const t=JSON.parse(localStorage.getItem("column_header"));if(t==null?!1:t.hasOwnProperty(this.module))t[this.module].map(i=>{this.columns.push(i.name)}),this.columns.push("id"),this.columns_header=t[this.module],this.list_function();else try{this.loading=!0;const o=(await this.axios.get("list/columns",{params:{module:this.module}})).data;this.columns_header=o.data,this.columns_header.push({field:"action",label:"Action"});var a=o.data.map(n=>n.name),e=[...a,"id"];this.columns=e;const l={};l[this.module]=this.columns_header;const r={...t,...l};localStorage.setItem("column_header",JSON.stringify(r)),this.list_function()}catch{}},async list_function(){try{this.loading=!0;const s=(await this.axios.get("list?page="+this.page.current,{params:{module:this.module,columns:this.columns,filter:this.filter_data,search:this.search}})).data.data;this.page.total=s.total,this.page.per_page=s.per_page,this.list_data=s.data,this.loading=!1}catch{}},async delete(t,s,a){try{this.loading=!0,(await this.axios.delete("module/"+s,{params:{module:t}})).data.data==1&&this.list_data.splice(a,1),this.loading=!1}catch{}},async deleteAll(t,s,a){try{this.loading=!0,(await this.axios.get("module/delete_all/"+t,{params:{ids:s,module:t}})).data.data>0&&this.list_function()}catch{}}},persist:!0});export{u};

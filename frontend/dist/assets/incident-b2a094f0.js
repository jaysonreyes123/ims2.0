import{S as a,U as n}from"./index-a7d1dc36.js";a();const o=n("incident",{state:()=>({incidentList:[],incident_types_picklist:[],incident_statuses_picklist:[],incident_priorities_picklist:[],id:0,loading:!0,form:{incident_no:"",incident_types_picklist:"",incident_statuses_picklist:"",incident_priorities_picklist:"",time_of_incident:null,date_of_incident:null,remarks:"",location:"",street_name:"",nearest_landmark:"",incident_resolution:"",coordinates:"",assigned_team:[],response_team:"",assigned_by:"",caller_contact:"",caller_firstname:"",caller_lastname:""},data:[]}),actions:{clearField(){this.loading=!0,Object.keys(this.form).map(i=>{this.form[i]=""}),this.id="",this.loading=!1},async list(){try{this.loading=!0;const t=await this.axios.get("incidents");this.incidentList=t.data.data,this.loading=!1}catch{}},async getItem(){this.loading=!0;const t=await this.axios.get("incidents/"+this.id),i=Object.keys(this.form),e=t.data.data;this.data=e,i.map(s=>{s=="assigned_team"?this.form[s]=JSON.parse(e[s]):this.form[s]=t.data.data[s]}),this.loading=!1},async save(){try{if(this.loading=!0,this.id==""){const t=await this.axios.post("incidents",this.form);this.id=t.data.data.id}else await this.axios.put("incidents/"+this.id,this.form);this.loading=!1,this.router.push({name:"detail",params:{id:this.id,module:"incidents"}})}catch{}},async del(t){try{this.loading=!0,(await this.axios.delete("incidents/"+t)).data.status==200&&this.list(),this.loading=!1}catch{}},async get_incident_type(){try{const t=await this.axios.get("incident_type");this.incident_types_picklist=t.data.data}catch{}},async get_incident_status(){try{const t=await this.axios.get("incident_status");this.incident_statuses_picklist=t.data.data}catch{}},async get_incident_priority(){try{const t=await this.axios.get("incident_priority");this.incident_priorities_picklist=t.data.data}catch{}},async generate_id(t){try{this.loading=!0;const i=await this.axios.get("generate/id/"+t);this.form.incident_no=i.data,this.loading=!1}catch{}}},persist:!0});export{o as u};

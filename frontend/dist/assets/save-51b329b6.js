import{C as E,T as L,S as N}from"./vue-select.es-32a6a92b.js";import{u as H,B as I,M as D,a as z,b as A,c as P,d as Y,p as j,r as J,e as K}from"./user-9d6abda6.js";import{T as O}from"./index-47f1f544.js";import{B as Q}from"./index-b19fdcd2.js";import{B as W,c as B,i as U,u as w,a as X,r as Z}from"./contacts-fefe5379.js";import{_ as $,c as l,d as n,f as i,F as b,E as g,w as S,i as ee,a as c,b as o,C as y,n as te,h as m,t as p,g as _}from"./index-8591da51.js";import"./index-b62b9a14.js";import"./index-bfef6123.js";import"./mapbox-gl-geocoder-e8f69630.js";import"./index-42d9ee31.js";const M=H(),oe={components:{Block:I,Textinput:O,Button:Q,Select:E,Textarea:L,Map:D,Breadcrumb:W},data(){return{saveBtn:"Save "+this.$route.params.module,contacts_field:B,incidents_field:U,form:{},loading:!1,user_store:M}},created(){this.form=this.ModuleStore.form,this.$route.params.id!=""&&this.$route.params.id!=null?(this.ModuleStore.id=this.$route.params.id,this.ModuleStore.getItem()):this.ModuleStore.clearField()},mounted(){this.form.id===void 0&&this.$route.params.module=="incidents"&&w().generate_id(this.$route.params.module),this.load_picklist()},methods:{saveForm(){this.ModuleStore.form=this.form;var t="";if(this.RequiredField.map(s=>{this.ModuleStore.form[s.name]==""&&(t+=`<span class="text-red-500"><b>${s.label}</b> is required field</span><br>`)}),t!="")return N.fire({icon:"error",title:"Something wrong",html:t}),!1;this.ModuleStore.save()},updateCoordinates(t){const{lng:s,lat:h}=t;this.ModuleStore.form.coordinates=s+","+h},load_picklist(){const t=this.$route.params.module;M.assigned_to.length==0&&M.get_assigned_to(),t=="incidents"?(this.ModuleStore.incident_statuses_picklist.length==0&&this.ModuleStore.get_incident_status(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type(),this.ModuleStore.incident_priorities_picklist.length==0&&this.ModuleStore.get_incident_priority()):t=="resources"?(this.ModuleStore.resources_types_picklist.length==0&&this.ModuleStore.get_resources_type(),this.ModuleStore.resources_statuses_picklist.length==0&&this.ModuleStore.get_resources_status(),this.ModuleStore.conditions_picklist.length==0&&this.ModuleStore.get_resources_condition(),this.ModuleStore.dispatchers_picklist.length==0&&this.ModuleStore.get_resources_dispatch()):t=="contacts"?(this.ModuleStore.caller_types_picklist.length==0&&this.ModuleStore.get_caller_types(),this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):t=="agencies"?(this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):t=="responders"?this.ModuleStore.responder_types_picklist.length==0&&this.ModuleStore.get_responder_type():t=="pre-plans"&&this.ModuleStore.pre_plan_classifications_picklist.length==0&&this.ModuleStore.get_preplan_classification()}},computed:{fields_computed(){let t;switch(this.$route.params.module){case"incidents":t=U;break;case"resources":t=Z;break;case"contacts":t=B;break;case"agencies":t=K;break;case"responders":t=J;break;case"pre-plans":t=j;break}return t},RequiredField(){const t=[];return this.fields_computed.map(s=>{s.fields.map(h=>{h.required&&t.push(h)})}),t},ModuleStore(){const t=this.$route.params.module;let s;switch(t){case"incidents":s=w();break;case"resources":s=X();break;case"contacts":s=Y();break;case"agencies":s=P();break;case"responders":s=A();break;case"pre-plans":s=z();break}return s}}},se={class:"lg:grid lg:grid-cols-2 gap-12"},le={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},re={key:0},ae={class:"fromGroup relative"},ie={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ne={key:0,class:"text-red-500"},de={key:1},ce={class:"fromGroup relative"},ue={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},me={key:0,class:"text-red-500"},pe={key:2},_e={key:0,class:"fromGroup relative"},he={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ke={key:0,class:"text-red-500"},fe={key:1,class:"fromGroup relative"},be={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ge={key:0,class:"text-red-500"},Se={key:3},ye={class:"fromGroup relative"},Me={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ve={key:0,class:"text-red-500"},Ve={key:4},xe={class:"fromGroup relative"},Be={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ue={key:0,class:"text-red-500"};function we(t,s,h,Ce,r,u){const C=c("Breadcrumb"),q=c("Loading"),v=c("Textinput"),F=c("Map"),f=c("Block"),V=c("flat-pickr"),x=c("Select"),T=c("Textarea"),R=c("Button");return o(),l("div",null,[n(C,{mode:"edit"}),n(q,{active:u.ModuleStore.loading,"onUpdate:active":s[0]||(s[0]=d=>u.ModuleStore.loading=d)},null,8,["active"]),i("form",{onSubmit:s[1]||(s[1]=ee((...d)=>u.saveForm&&u.saveForm(...d),["prevent"]))},[(o(!0),l(b,null,g(u.fields_computed,(d,G)=>(o(),l("div",{key:G},[d.block_name=="Location Details"?(o(),y(f,{key:0,title:d.block_name},{default:S(()=>[i("div",se,[i("div",null,[(o(!0),l(b,null,g(d.fields,(e,k)=>(o(),y(v,{isReadonly:e.readonly,class:"mt-4",key:k,modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a,label:e.label,placeholder:`Enter ${e.label}`},null,8,["isReadonly","modelValue","onUpdate:modelValue","label","placeholder"]))),128))]),i("div",null,[n(F,{set_coordinates:r.form.coordinates,onUpdateCoordinate:u.updateCoordinates},null,8,["set_coordinates","onUpdateCoordinate"])])])]),_:2},1032,["title"])):(o(),y(f,{key:1,title:d.block_name},{default:S(()=>[i("div",le,[(o(!0),l(b,null,g(d.fields,(e,k)=>(o(),l("div",{key:k,class:te([`custom-grid-${k%2}`,"mt-4"])},[e.type=="time"?(o(),l("div",re,[i("div",ae,[i("label",ie,[m(p(e.label)+" ",1),e.required?(o(),l("span",ne,"*")):_("",!0)]),n(V,{modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a,class:"form-control",placeholder:"HH:mm",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1}},null,8,["modelValue","onUpdate:modelValue"])])])):e.type=="date"?(o(),l("div",de,[i("div",ce,[i("label",ue,[m(p(e.label)+" ",1),e.required?(o(),l("span",me,"*")):_("",!0)]),n(V,{modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"}},null,8,["modelValue","onUpdate:modelValue"])])])):e.type=="picklist"?(o(),l("div",pe,[e.name=="assigned_to_picklist"?(o(),l("div",_e,[i("label",he,[m(p(e.label)+" ",1),e.required?(o(),l("span",ke,"*")):_("",!0)]),n(x,{placeholder:"Select an option",reduce:a=>a.id,options:r.user_store[e.name],modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a},null,8,["reduce","options","modelValue","onUpdate:modelValue"])])):(o(),l("div",fe,[i("label",be,[m(p(e.label)+" ",1),e.required?(o(),l("span",ge,"*")):_("",!0)]),n(x,{placeholder:"Select an option",reduce:a=>a.id,options:u.ModuleStore[e.name],modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a},null,8,["reduce","options","modelValue","onUpdate:modelValue"])]))])):e.type=="textarea"?(o(),l("div",Se,[i("div",ye,[i("label",Me,[m(p(e.label)+" ",1),e.required?(o(),l("span",ve,"*")):_("",!0)]),n(T,{placeholder:`Enter ${e.label}`,modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a},null,8,["placeholder","modelValue","onUpdate:modelValue"])])])):(o(),l("div",Ve,[i("div",xe,[i("label",Be,[m(p(e.label)+" ",1),e.required?(o(),l("span",Ue,"*")):_("",!0)]),n(v,{isReadonly:e.readonly,type:e.type,name:r.form[e.name],modelValue:r.form[e.name],"onUpdate:modelValue":a=>r.form[e.name]=a,placeholder:`Enter ${e.label}`},null,8,["isReadonly","type","name","modelValue","onUpdate:modelValue","placeholder"])])]))],2))),128))])]),_:2},1032,["title"]))]))),128)),n(f,null,{default:S(()=>[n(R,{class:"w-full bg-emerald-500/100 hover:bg-emerald-600/100",text:r.saveBtn},null,8,["text"])]),_:1})],32)])}const De=$(oe,[["render",we]]);export{De as default};

import{M as Y,a as B,b as T,c as A,d as E}from"./mapbox-gl-748c9941.js";import{C as M}from"./index-f1216fd0.js";import{r as w,_ as g,a as n,b as o,c as p,d,w as l,f as t,F as k,E as v,C as m,h,t as b,g as f,S as L,U as V,V as S}from"./index-a7d1dc36.js";import"./index-d7d7792e.js";const $=w(),W=w([]),X=w([]),D={components:{MapboxMap:Y,MapboxMarker:B,MapboxGeocoder:T,MapboxImages:A,MapboxLayer:E,Card:M},data(){return{coordinates:[0,0],incident_map_:W,resources_map_:X,map:$}},mounted(){this.incident_map(),this.resources_map()},methods:{async incident_map(){try{const s=await this.$axios.get("map/incidents");this.incident_map_=s.data}catch(s){console.log(s)}},async resources_map(){try{const s=await this.$axios.get("map/resources");this.resources_map_=s.data}catch(s){console.log(s)}},flyto(s){$.value.flyTo({center:s})}}},N={class:"shadow-lg"},G={class:"lg:grid grid-cols-1 rounded-md"},R={class:"col-span-4"},j={style:{width:"300px"}},J={class:"text-xs mt-1"},U={style:{width:"300px"}},Z={class:"text-xs mt-1"};function H(s,e,y,x,a,c){const u=n("MapboxGeocoder"),i=n("router-link"),_=n("MapboxMarker"),F=n("MapboxMap"),O=n("Card");return o(),p("div",N,[d(O,{title:"Incident Map"},{default:l(()=>[t("div",G,[t("div",R,[d(F,{class:"h-screen",onMbCreated:e[0]||(e[0]=r=>a.map=r),"access-token":"pk.eyJ1IjoiamF5c29ucmV5ZXMyNiIsImEiOiJjbGd1aDViYXUwZzM2M3BsamlpdWtjbzBsIn0.DmYf96Yhwg7vip5Qpzghnw","map-style":"mapbox://styles/mapbox/streets-v11",center:[122.4902841093123,12.573067659271082],zoom:5},{default:l(()=>[d(u,{countries:"PH"}),a.incident_map_!==void 0?(o(!0),p(k,{key:0},v(a.incident_map_.features,(r,C)=>(o(),m(_,{key:C,"lng-lat":r.geometry.coordinates},{popup:l(()=>[t("div",j,[e[3]||(e[3]=t("p",{class:"text-base"},[t("b",null,"Incident")],-1)),t("div",J,[d(i,{class:"text-blue-600",to:`/app/module/incidents/detail/${r.properties.id}`},{default:l(()=>[h(b(r.properties.incident_no),1)]),_:2},1032,["to"]),t("p",null,[e[1]||(e[1]=t("b",null,"Status: ",-1)),h(b(r.properties.status),1)]),t("p",null,[e[2]||(e[2]=t("b",null,"Location: ",-1)),h(b(r.properties.location),1)])])])]),default:l(()=>[e[4]||(e[4]=t("p",{class:"custom-marker"},[t("span",{class:"pulsing-dot-red"})],-1))]),_:2},1032,["lng-lat"]))),128)):f("",!0),a.resources_map_!==void 0?(o(!0),p(k,{key:1},v(a.resources_map_.features,(r,C)=>(o(),m(_,{key:C,"lng-lat":r.geometry.coordinates},{popup:l(()=>[t("div",U,[e[7]||(e[7]=t("p",{class:"text-base"},[t("b",null,"Resources")],-1)),t("div",Z,[d(i,{class:"text-blue-600",to:`/app/module/resources/detail/${r.properties.id}`},{default:l(()=>[h(b(r.properties.name),1)]),_:2},1032,["to"]),t("p",null,[e[5]||(e[5]=t("b",null,"Type: ",-1)),h(b(r.properties.type),1)]),t("p",null,[e[6]||(e[6]=t("b",null,"Status: ",-1)),h(b(r.properties.status),1)])])])]),default:l(()=>[e[8]||(e[8]=t("p",{class:"custom-marker"},[t("span",{class:"pulsing-dot-black"})],-1))]),_:2},1032,["lng-lat"]))),128)):f("",!0)]),_:1})])])]),_:1})])}const P=g(D,[["render",H]]),Q={props:{count:{type:Number,default:6}},computed:{items(){return Array.from({length:this.count})}}},q={class:"w-full bg-white dark:bg-slate-700 shadow-base p-6 rounded-md"},K={class:"animate-pulse w-full border-separate border-spacing-4 table-fixed"},tt={class:"table-group-divider"};function et(s,e,y,x,a,c){return o(),p("div",q,[t("table",K,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},[t("div",{class:"h-4 bg-[#C4C4C4] dark:bg-slate-500"})]),t("th",{scope:"col"},[t("div",{class:"h-4 bg-[#C4C4C4] dark:bg-slate-500"})]),t("th",{scope:"col"},[t("div",{class:"h-4 bg-[#C4C4C4] dark:bg-slate-500"})]),t("th",{scope:"col"},[t("div",{class:"h-4 bg-[#C4C4C4] dark:bg-slate-500"})]),t("th",{scope:"col"},[t("div",{class:"h-4 bg-[#C4C4C4] dark:bg-slate-500"})])])],-1)),t("tbody",tt,[(o(!0),p(k,null,v(c.items,(u,i)=>(o(),p("tr",{key:i},e[0]||(e[0]=[t("td",null,[t("div",{class:"h-2 bg-[#C4C4C4] dark:bg-slate-500"})],-1),t("td",null,[t("div",{class:"h-2 bg-[#C4C4C4] dark:bg-slate-500"})],-1),t("td",null,[t("div",{class:"h-2 bg-[#C4C4C4] dark:bg-slate-500"})],-1),t("td",null,[t("div",{class:"h-2 bg-[#C4C4C4] dark:bg-slate-500"})],-1),t("td",null,[t("div",{class:"h-2 bg-[#C4C4C4] dark:bg-slate-500"})],-1)])))),128))])])])}const I=g(Q,[["render",et]]);L();const z=V("dashboard",{state:()=>({loading:!1,id:"",incident_by_type_:[],incident_by_status_:[]}),actions:{async incident_by_type(){try{const s=await this.axios.get("dashboard/incident_by_type");this.incident_by_type_=s.data.data}catch{}},async incident_by_status(){try{const s=await this.axios.get("dashboard/incident_by_status");this.incident_by_status_=s.data.data}catch{}}},persist:!0}),st=z(),ot={components:{Card:M,Skeleton:I},data(){return{loading:!0}},created(){st.incident_by_type()},methods:{incident_by_type(){S.get("dashboard/incident_by_type").then(s=>{const e=s.data.data;this.loading=!1,setTimeout(()=>{this.$refs.dashboard_chart.updateOptions({series:[e.series],xaxis:{categories:e.categories}})},100)})}},mounted(){this.incident_by_type()},computed:{columnCharthomeComputed(){return{series:[],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"end",horizontal:!0,endingShape:"rounded",columnWidth:"45%"}},legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"12px",fontFamily:"Inter",offsetY:-30,markers:{width:8,height:8,offsetY:-1,offsetX:-5,radius:12},labels:{colors:"#475569"},itemMargin:{horizontal:18,vertical:0}},title:{text:"Incident By Type (Incidents)",align:"left",offsetX:this.$store.themeSettingsStore.direction?"0%":0,offsetY:13,floating:!1,style:{fontSize:"20px",fontWeight:"500",fontFamily:"Inter",color:"#0f172a"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},yaxis:{opposite:!!this.$store.themeSettingsStore.direction,labels:{style:{colors:"#475569",fontFamily:"Inter"}}},xaxis:{categories:[],labels:{style:{colors:"#475569",fontFamily:"Inter"}},axisBorder:{show:!1},axisTicks:{show:!1}},fill:{opacity:1},tooltip:{y:{formatter:function(s){return s}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:10,position:"back"},responsive:[{breakpoint:600,options:{legend:{position:"bottom",offsetY:8,horizontalAlign:"center"},plotOptions:{bar:{columnWidth:"80%"}}}}]}}}}},nt={class:"legend-ring"};function at(s,e,y,x,a,c){const u=n("Skeleton"),i=n("apexchart"),_=n("Card");return o(),p("div",null,[a.loading?(o(),m(u,{key:0})):f("",!0),d(_,null,{default:l(()=>[t("div",nt,[a.loading?f("",!0):(o(),m(i,{key:0,ref:"dashboard_chart",type:"bar",options:c.columnCharthomeComputed.chartOptions,series:c.columnCharthomeComputed.series},null,8,["options","series"]))])]),_:1})])}const rt=g(ot,[["render",at]]),it=z(),lt={components:{Card:M,Skeleton:I},data(){return{loading:!0}},created(){it.incident_by_type()},methods:{incident_by_type(){S.get("dashboard/incident_by_status").then(s=>{const e=s.data.data;this.loading=!1,setTimeout(()=>{this.$refs.dashboard_chart.updateOptions({series:[e.series],xaxis:{categories:e.categories}})},100)})}},mounted(){this.incident_by_type()},computed:{columnCharthomeComputed(){return{series:[],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"end",horizontal:!0,endingShape:"rounded",columnWidth:"45%",dataLabels:{position:"top"}}},legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"12px",fontFamily:"Inter",offsetY:-30,markers:{width:8,height:8,offsetY:-1,offsetX:-5,radius:12},labels:{colors:"#475569"},itemMargin:{horizontal:18,vertical:0}},title:{text:"Incident By Type (Incidents)",align:"left",offsetX:this.$store.themeSettingsStore.direction?"0%":0,offsetY:13,floating:!1,style:{fontSize:"20px",fontWeight:"500",fontFamily:"Inter",color:"#0f172a"}},dataLabels:{enabled:!0,offsetX:30},stroke:{show:!0,width:2,colors:["transparent"]},yaxis:{opposite:!!this.$store.themeSettingsStore.direction,labels:{style:{colors:"#475569",fontFamily:"Inter"}}},xaxis:{categories:[],labels:{style:{colors:"#475569",fontFamily:"Inter"}},axisBorder:{show:!1},axisTicks:{show:!1}},fill:{opacity:1},tooltip:{y:{formatter:function(s){return s}}},grid:{show:!0,borderColor:"#E2E8F0",strokeDashArray:10,position:"back"},responsive:[{breakpoint:600,options:{legend:{position:"bottom",offsetY:8,horizontalAlign:"center"},plotOptions:{bar:{columnWidth:"80%"}}}}]}}}}},dt={class:"legend-ring"};function ct(s,e,y,x,a,c){const u=n("Skeleton"),i=n("apexchart"),_=n("Card");return o(),p("div",null,[a.loading?(o(),m(u,{key:0})):f("",!0),d(_,null,{default:l(()=>[t("div",dt,[a.loading?f("",!0):(o(),m(i,{key:0,ref:"dashboard_chart",type:"bar",options:c.columnCharthomeComputed.chartOptions,series:c.columnCharthomeComputed.series},null,8,["options","series"]))])]),_:1})])}const pt=g(lt,[["render",ct]]),ut={components:{Map:P,incident_by_type:rt,incident_by_status:pt}},_t={class:"grid grid-cols-2 grid-rows-2 gap-4"},ht={class:"row-span-2"};function bt(s,e,y,x,a,c){const u=n("incident_by_type"),i=n("Map"),_=n("incident_by_status");return o(),p("div",null,[t("div",_t,[t("div",null,[d(u)]),t("div",ht,[d(i)]),t("div",null,[d(_)])])])}const xt=g(ut,[["render",bt]]);export{xt as default};

import{C as A}from"./index-f1216fd0.js";import{B as V,M as W}from"./index-6554cf10.js";import{u as Dt}from"./incident-b2a094f0.js";import{q as re,r as B,x as we,p as K,v as Mt,m as It,F as $,o as ot,z as nt,B as $t,_ as L,a as y,b as p,c as v,d as b,f as n,w as k,t as f,g as Y,E as F,n as Q,C as z,S as st,U as rt,h as lt,a5 as Pt,a6 as Ft,$ as Ne,a7 as Gt,R as Lt}from"./index-a7d1dc36.js";import{f as Tt,e as Rt,j as it,d as Bt,u as ve,i as at,c as At,r as Et,b as Ot,p as jt,a as Ut,h as zt,g as Nt,k as qt,l as Kt,S as qe,B as Vt}from"./user-f5d7b971.js";import{a as Wt,f as ut,o as H,V as _e,w as Ht,t as dt,R as Ke,b as O,g as oe,M as j,u as Yt,i as Qt,B as Jt}from"./index-19193031.js";import{I as Re}from"./index-1a133b7f.js";import{u as ct,M as pt,T as Xt,P as Zt,I as eo}from"./index-207889cb.js";import{B as Be}from"./index-53e4b8ce.js";import{b as to}from"./use-resolve-button-type-4c0238b1.js";import"./mapbox-gl-748c9941.js";import"./index-d7d7792e.js";import"./vue-cleave.min-776623f5.js";let oo=re({props:{onFocus:{type:Function,required:!0}},setup(o){let e=B(!0);return()=>e.value?we(ut,{as:"button",type:"button",features:Wt.Focusable,onFocus(s){s.preventDefault();let r,t=50;function l(){var a;if(t--<=0){r&&cancelAnimationFrame(r);return}if((a=o.onFocus)!=null&&a.call(o)){e.value=!1,cancelAnimationFrame(r);return}r=requestAnimationFrame(l)}r=requestAnimationFrame(l)}}):null}}),ft=Symbol("TabsContext");function ge(o){let e=$t(ft,null);if(e===null){let s=new Error(`<${o} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ge),s}return e}let no=re({name:"TabGroup",emits:{change:o=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:e,attrs:s,emit:r}){let t=B(null),l=B([]),a=B([]),c=K(()=>o.selectedIndex!==null),m=K(()=>c.value?o.selectedIndex:t.value),u={selectedIndex:t,orientation:K(()=>o.vertical?"vertical":"horizontal"),activation:K(()=>o.manual?"manual":"auto"),tabs:l,panels:a,setSelectedIndex(i){m.value!==i&&r("change",i),c.value||(t.value=i)},registerTab(i){l.value.includes(i)||l.value.push(i)},unregisterTab(i){let _=l.value.indexOf(i);_!==-1&&l.value.splice(_,1)},registerPanel(i){a.value.includes(i)||a.value.push(i)},unregisterPanel(i){let _=a.value.indexOf(i);_!==-1&&a.value.splice(_,1)}};return Mt(ft,u),It(()=>{var i;if(u.tabs.value.length<=0||o.selectedIndex===null&&t.value!==null)return;let _=u.tabs.value.map(D=>H(D)).filter(Boolean),S=_.filter(D=>!D.hasAttribute("disabled")),C=(i=o.selectedIndex)!=null?i:o.defaultIndex;if(C<0)t.value=_.indexOf(S[0]);else if(C>u.tabs.value.length)t.value=_.indexOf(S[S.length-1]);else{let D=_.slice(0,C),g=[..._.slice(C),...D].find(M=>S.includes(M));if(!g)return;t.value=_.indexOf(g)}}),()=>{let i={selectedIndex:t.value};return we($,[l.value.length<=0&&we(oo,{onFocus:()=>{for(let _ of l.value){let S=H(_);if((S==null?void 0:S.tabIndex)===0)return S.focus(),!0}return!1}}),_e({theirProps:{...s,...Ht(o,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:i,slots:e,attrs:s,name:"TabGroup"})])}}}),so=re({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(o,{attrs:e,slots:s}){let r=ge("TabList");return()=>{let t={selectedIndex:r.selectedIndex.value},l={role:"tablist","aria-orientation":r.orientation.value};return _e({ourProps:l,theirProps:o,slot:t,attrs:e,slots:s,name:"TabList"})}}}),ro=re({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(o,{attrs:e,slots:s,expose:r}){let t=ge("Tab"),l=`headlessui-tabs-tab-${dt()}`,a=B(null);r({el:a,$el:a}),ot(()=>t.registerTab(a)),nt(()=>t.unregisterTab(a));let c=K(()=>t.tabs.value.indexOf(a)),m=K(()=>c.value===t.selectedIndex.value);function u(g){let M=t.tabs.value.map(le=>H(le)).filter(Boolean);if(g.key===O.Space||g.key===O.Enter){g.preventDefault(),g.stopPropagation(),t.setSelectedIndex(c.value);return}switch(g.key){case O.Home:case O.PageUp:return g.preventDefault(),g.stopPropagation(),oe(M,j.First);case O.End:case O.PageDown:return g.preventDefault(),g.stopPropagation(),oe(M,j.Last)}if(Yt(t.orientation.value,{vertical(){if(g.key===O.ArrowUp)return oe(M,j.Previous|j.WrapAround);if(g.key===O.ArrowDown)return oe(M,j.Next|j.WrapAround)},horizontal(){if(g.key===O.ArrowLeft)return oe(M,j.Previous|j.WrapAround);if(g.key===O.ArrowRight)return oe(M,j.Next|j.WrapAround)}}))return g.preventDefault()}function i(){var g;(g=H(a))==null||g.focus()}let _=B(!1);function S(){var g;_.value||(_.value=!0,!o.disabled&&((g=H(a))==null||g.focus(),t.setSelectedIndex(c.value),Qt(()=>{_.value=!1})))}function C(g){g.preventDefault()}let D=to(K(()=>({as:o.as,type:e.type})),a);return()=>{var g;let M={selected:m.value},le={ref:a,onKeydown:u,onFocus:t.activation.value==="manual"?i:S,onMousedown:C,onClick:S,id:l,role:"tab",type:D.value,"aria-controls":(g=H(t.panels.value[c.value]))==null?void 0:g.id,"aria-selected":m.value,tabIndex:m.value?0:-1,disabled:o.disabled?!0:void 0};return _e({ourProps:le,theirProps:o,slot:M,attrs:e,slots:s,name:"Tab"})}}}),lo=re({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(o,{slots:e,attrs:s}){let r=ge("TabPanels");return()=>{let t={selectedIndex:r.selectedIndex.value};return _e({theirProps:o,ourProps:{},slot:t,attrs:s,slots:e,name:"TabPanels"})}}}),io=re({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(o,{attrs:e,slots:s,expose:r}){let t=ge("TabPanel"),l=`headlessui-tabs-panel-${dt()}`,a=B(null);r({el:a,$el:a}),ot(()=>t.registerPanel(a)),nt(()=>t.unregisterPanel(a));let c=K(()=>t.panels.value.indexOf(a)),m=K(()=>c.value===t.selectedIndex.value);return()=>{var u;let i={selected:m.value},_={ref:a,id:l,role:"tabpanel","aria-labelledby":(u=H(t.tabs.value[c.value]))==null?void 0:u.id,tabIndex:m.value?0:-1};return!m.value&&o.unmount?we(ut,{as:"span",..._}):_e({ourProps:_,theirProps:o,slot:i,attrs:e,slots:s,features:Ke.Static|Ke.RenderStrategy,visible:m.value,name:"TabPanel"})}}});const ie=Dt(),ao={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;ie.id=o,ie.getItem()},methods:{find_picklist_value(o,e){var s="";if(ie[o]!==void 0){const r=ie[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{IncidentStore:ie}}},uo={class:"lg:grid lg:grid-cols-2 gap-12"},co={class:"fromGroup relative"},po={class:"fromGroup relative"},fo={class:"lg:grid lg:grid-cols-2 gap-12"},mo={class:"fromGroup relative"},vo={key:0},_o={class:"fromGroup relative"},go={class:"lg:grid lg:grid-cols-2 gap-12"},bo={class:"fromGroup relative"},yo={class:"fromGroup relative"},ho={class:"lg:grid lg:grid-cols-1 gap-12"},ko={class:"fromGroup relative"},xo={class:"lg:grid lg:grid-cols-2 gap-12"},So={class:"fromGroup relative"},wo={class:"fromGroup relative"},Co={class:"fromGroup relative"},Do={class:"fromGroup relative"},Mo={class:"lg:grid lg:grid-cols-2 gap-12"},Io={class:"fromGroup relative"},$o={class:"fromGroup relative"},Po={class:"lg:grid lg:grid-cols-1 gap-12"},Fo={class:"fromGroup relative"},Go={class:"lg:grid lg:grid-cols-1 gap-12"},Lo={class:"fromGroup relative"},To={class:"lg:grid lg:grid-cols-2 gap-12"},Ro={class:"fromGroup relative"},Bo={class:"fromGroup relative"},Ao={class:"lg:grid lg:grid-cols-1 gap-12"},Eo={class:"fromGroup relative"},Oo={class:"lg:grid lg:grid-cols-2 gap-12"},jo={class:"fromGroup relative"},Uo={class:"fromGroup relative"},zo={class:"lg:grid lg:grid-cols-2 gap-12"},No={class:"fromGroup relative"},qo={class:"fromGroup relative"};function Ko(o,e,s,r,t,l){const a=y("Loading"),c=y("Block"),m=y("Map");return p(),v("div",null,[b(a,{active:t.IncidentStore.loading,"onUpdate:active":e[0]||(e[0]=u=>t.IncidentStore.loading=u)},null,8,["active"]),n("div",null,[b(c,{blockname:"Incident Details"},{default:k(()=>[n("div",uo,[n("div",co,[e[1]||(e[1]=n("label",null,"Incident No",-1)),n("span",null,f(t.IncidentStore.form.incident_no),1)]),n("div",po,[e[2]||(e[2]=n("label",null,"Incident Type",-1)),n("span",null,f(l.find_picklist_value("incident_types_picklist",t.IncidentStore.form.incident_types_picklist)),1)])]),n("div",fo,[n("div",mo,[e[3]||(e[3]=n("label",null,"Time of Incident",-1)),t.IncidentStore.form.time_of_incident!=""?(p(),v("span",vo,f(t.IncidentStore.form.time_of_incident),1)):Y("",!0)]),n("div",_o,[e[4]||(e[4]=n("label",null,"Date of Incident",-1)),n("span",null,f(t.IncidentStore.form.date_of_incident),1)])]),n("div",go,[n("div",bo,[e[5]||(e[5]=n("label",null,"Incident Status",-1)),n("span",null,f(l.find_picklist_value("incident_statuses_picklist",t.IncidentStore.form.incident_statuses_picklist)),1)]),n("div",yo,[e[6]||(e[6]=n("label",null,"Incident Priority",-1)),n("span",null,f(l.find_picklist_value("incident_priorities_picklist",t.IncidentStore.form.incident_priorities_picklist)),1)])]),n("div",ho,[n("div",ko,[e[7]||(e[7]=n("label",{for:""},"Notes/Remarks",-1)),n("span",null,f(t.IncidentStore.form.remarks),1)])])]),_:1}),b(c,{blockname:"Location Details"},{default:k(()=>[n("div",xo,[n("div",null,[n("div",So,[e[8]||(e[8]=n("label",{for:""},"Location",-1)),n("span",null,f(t.IncidentStore.form.location),1)]),n("div",wo,[e[9]||(e[9]=n("label",{for:""},"Street name",-1)),n("span",null,f(t.IncidentStore.form.street_name),1)]),n("div",Co,[e[10]||(e[10]=n("label",{for:""},"Nearest landmark",-1)),n("span",null,f(t.IncidentStore.form.nearest_landmark),1)]),n("div",Do,[e[11]||(e[11]=n("label",{for:""},"Coordinates",-1)),n("span",null,f(t.IncidentStore.form.coordinates),1)])]),n("div",null,[b(m,{set_coordinates:t.IncidentStore.form.coordinates},null,8,["set_coordinates"])])])]),_:1}),b(c,{blockname:"Caller Details"},{default:k(()=>[n("div",Mo,[n("div",Io,[e[12]||(e[12]=n("label",{for:""},"First Name",-1)),n("span",null,f(t.IncidentStore.form.caller_firstname),1)]),n("div",$o,[e[13]||(e[13]=n("label",{for:""},"Last Name",-1)),n("span",null,f(t.IncidentStore.form.caller_lastname),1)])]),n("div",Po,[n("div",Fo,[e[14]||(e[14]=n("label",{for:""},"Contact no",-1)),n("span",null,f(t.IncidentStore.form.caller_contact),1)])])]),_:1}),b(c,{blockname:"Incident Resolution"},{default:k(()=>[n("div",Go,[n("div",Lo,[e[15]||(e[15]=n("label",{for:""},"Incident Resolution",-1)),n("span",null,f(t.IncidentStore.form.incident_resolution),1)])])]),_:1}),b(c,{blockname:"Responder Details"},{default:k(()=>[n("div",To,[n("div",Ro,[e[16]||(e[16]=n("label",{for:""},"Responder Team",-1)),n("span",null,f(t.IncidentStore.form.response_team),1)]),n("div",Bo,[e[17]||(e[17]=n("label",{for:""},"Assigned By",-1)),n("span",null,f(t.IncidentStore.form.assigned_by),1)])]),n("div",Ao,[n("div",Eo,[e[18]||(e[18]=n("label",{for:""},"Assigned Team",-1)),n("span",null,f(t.IncidentStore.form.assigned_team),1)])])]),_:1}),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",Oo,[n("div",jo,[e[19]||(e[19]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.IncidentStore.data.created_at),1)]),n("div",Uo,[e[20]||(e[20]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.IncidentStore.data.created_by),1)])]),n("div",zo,[n("div",No,[e[21]||(e[21]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.IncidentStore.data.updated_at),1)]),n("div",qo,[e[22]||(e[22]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.IncidentStore.data.updated_by),1)])])]),_:1})])])}const Vo=L(ao,[["render",Ko],["__scopeId","data-v-2904297f"]]);const ae=Tt(),Wo={components:{Block:V,Map:W,Card:A},methods:{find_picklist_value(o,e){var s="";if(ae[o]!==void 0){const r=ae[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},mounted(){const o=this.$route.params.id;ae.id=o,ae.getItem()},data(){return{ResourcesStore:ae}}},Ho={class:"lg:grid lg:grid-cols-2 gap-12"},Yo={class:"fromGroup relative"},Qo={class:"fromGroup relative"},Jo={class:"lg:grid lg:grid-cols-2 gap-12"},Xo={class:"fromGroup relative"},Zo={class:"fromGroup relative"},en={class:"lg:grid lg:grid-cols-2 gap-12"},tn={class:"fromGroup relative"},on={class:"fromGroup relative"},nn={class:"lg:grid lg:grid-cols-2 gap-12"},sn={class:"fromGroup relative"},rn={class:"fromGroup relative"},ln={class:"lg:grid lg:grid-cols-2 gap-12"},an={class:"fromGroup relative"},un={class:"fromGroup relative"},dn={class:"lg:grid lg:grid-cols-2 gap-12"},cn={class:"fromGroup relative"},pn={class:"lg:grid lg:grid-cols-2 gap-12"},fn={class:"fromGroup relative"},mn={class:"lg:grid lg:grid-cols-2 gap-12"},vn={class:"fromGroup relative"},_n={class:"fromGroup relative"},gn={class:"lg:grid lg:grid-cols-2 gap-12"},bn={class:"fromGroup relative"},yn={class:"fromGroup relative"};function hn(o,e,s,r,t,l){const a=y("Loading"),c=y("Block"),m=y("Map");return p(),v("div",null,[b(a,{active:t.ResourcesStore.loading,"onUpdate:active":e[0]||(e[0]=u=>t.ResourcesStore.loading=u)},null,8,["active"]),n("div",null,[b(c,{blockname:"Resources Information"},{default:k(()=>[n("div",Ho,[n("div",Yo,[e[1]||(e[1]=n("label",{for:""},"Resource Name",-1)),n("span",null,f(t.ResourcesStore.form.resources_name),1)]),n("div",Qo,[e[2]||(e[2]=n("label",{for:""},"Resource Category",-1)),n("span",null,f(l.find_picklist_value("resources_categories_picklist",t.ResourcesStore.form.resources_categories_picklist)),1)])]),n("div",Jo,[n("div",Xo,[e[3]||(e[3]=n("label",{for:""},"Resource Type",-1)),n("span",null,f(l.find_picklist_value("resources_types_picklist",t.ResourcesStore.form.resources_types_picklist)),1)]),n("div",Zo,[e[4]||(e[4]=n("label",{for:""},"Quantity",-1)),n("span",null,f(t.ResourcesStore.form.quantity),1)])]),n("div",en,[n("div",tn,[e[5]||(e[5]=n("label",{for:""},"Status",-1)),n("span",null,f(l.find_picklist_value("resources_statuses_picklist",t.ResourcesStore.form.resources_statuses_picklist)),1)]),n("div",on,[e[6]||(e[6]=n("label",{for:""},"Condition",-1)),n("span",null,f(l.find_picklist_value("conditions_picklist",t.ResourcesStore.form.conditions_picklist)),1)])]),n("div",nn,[n("div",sn,[e[7]||(e[7]=n("label",{for:""},"Contact info",-1)),n("span",null,f(t.ResourcesStore.form.contact_info),1)]),n("div",rn,[e[8]||(e[8]=n("label",{for:""},"Owner",-1)),n("span",null,f(t.ResourcesStore.form.owner),1)])]),n("div",ln,[n("div",an,[e[9]||(e[9]=n("label",{for:""},"Date Acquired",-1)),n("span",null,f(t.ResourcesStore.form.date_acquired),1)]),n("div",un,[e[10]||(e[10]=n("label",{for:""},"Dispatch",-1)),n("span",null,f(l.find_picklist_value("dispatchers_picklist",t.ResourcesStore.form.dispatchers_picklist)),1)])]),n("div",dn,[n("div",cn,[e[11]||(e[11]=n("label",{for:""},"Remarks",-1)),n("span",null,f(t.ResourcesStore.form.remarks),1)])])]),_:1}),b(c,{blockname:"Location Details"},{default:k(()=>[n("div",pn,[n("div",null,[n("div",fn,[e[12]||(e[12]=n("label",{for:""},"Coordinates",-1)),n("span",null,f(t.ResourcesStore.form.coordinates),1)])]),n("div",null,[b(m,{set_coordinates:t.ResourcesStore.form.coordinates},null,8,["set_coordinates"])])])]),_:1}),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",mn,[n("div",vn,[e[13]||(e[13]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.ResourcesStore.data.created_at),1)]),n("div",_n,[e[14]||(e[14]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.ResourcesStore.data.created_by),1)])]),n("div",gn,[n("div",bn,[e[15]||(e[15]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.ResourcesStore.data.updated_at),1)]),n("div",yn,[e[16]||(e[16]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.ResourcesStore.data.updated_by),1)])])]),_:1})])])}const kn=L(Wo,[["render",hn],["__scopeId","data-v-24c55307"]]);const ue=Rt(),xn={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;ue.id=o,ue.getItem()},methods:{find_picklist_value(o,e){var s="";if(ue[o]!==void 0){const r=ue[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{ModuleStore:ue,blocks:it}}},Sn={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},wn={class:"fromGroup relative"},Cn={key:0},Dn={key:1},Mn={class:"lg:grid lg:grid-cols-2 gap-12"},In={class:"fromGroup relative"},$n={class:"fromGroup relative"},Pn={class:"lg:grid lg:grid-cols-2 gap-12"},Fn={class:"fromGroup relative"},Gn={class:"fromGroup relative"};function Ln(o,e,s,r,t,l){const a=y("Loading"),c=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.ModuleStore.loading=m)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(m,u)=>(p(),v("div",{key:u},[b(c,{title:m.block_name},{default:k(()=>[n("div",Sn,[(p(!0),v($,null,F(m.fields,(i,_)=>(p(),v("div",{key:_,class:Q([`custom-grid-${_%2}`,"mt-4"])},[n("div",wn,[n("label",null,f(i.label),1),i.type!="picklist"?(p(),v("span",Cn,f(t.ModuleStore.form[i.name]),1)):(p(),v("span",Dn,f(l.find_picklist_value(i.name,t.ModuleStore.form[i.name])),1))])],2))),128))])]),_:2},1032,["title"])]))),128)),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",Mn,[n("div",In,[e[1]||(e[1]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.ModuleStore.data.created_at),1)]),n("div",$n,[e[2]||(e[2]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.ModuleStore.data.created_by),1)])]),n("div",Pn,[n("div",Fn,[e[3]||(e[3]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.ModuleStore.data.updated_at),1)]),n("div",Gn,[e[4]||(e[4]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.ModuleStore.data.updated_by),1)])])]),_:1})])}const Tn=L(xn,[["render",Ln],["__scopeId","data-v-68990fd4"]]);const de=Bt(),Rn=ve(),Bn={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;de.id=o,de.getItem()},methods:{find_picklist_value(o,e){var s="";if(de[o]!==void 0){const r=de[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{ModuleStore:de,blocks:at,user_store:Rn}}},An={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},En={class:"fromGroup relative"},On={key:0},jn={key:1},Un={key:0},zn={key:1},Nn={class:"lg:grid lg:grid-cols-2 gap-12"},qn={class:"fromGroup relative"},Kn={class:"fromGroup relative"},Vn={class:"lg:grid lg:grid-cols-2 gap-12"},Wn={class:"fromGroup relative"},Hn={class:"fromGroup relative"};function Yn(o,e,s,r,t,l){const a=y("Loading"),c=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.ModuleStore.loading=m)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(m,u)=>(p(),v("div",{key:u},[b(c,{title:m.block_name},{default:k(()=>[n("div",An,[(p(!0),v($,null,F(m.fields,(i,_)=>(p(),v("div",{key:_,class:Q([`custom-grid-${_%2}`,"mt-4"])},[n("div",En,[n("label",null,f(i.label),1),i.type!="picklist"?(p(),v("span",On,f(t.ModuleStore.form[i.name]),1)):(p(),v("span",jn,[i.name=="assigned_to_picklist"?(p(),v("span",Un,f(t.user_store.get_single_assigned_to_picklist(t.ModuleStore.form[i.name])),1)):(p(),v("span",zn,f(l.find_picklist_value(i.name,t.ModuleStore.form[i.name])),1))]))])],2))),128))])]),_:2},1032,["title"])]))),128)),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",Nn,[n("div",qn,[e[1]||(e[1]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.ModuleStore.data.created_at),1)]),n("div",Kn,[e[2]||(e[2]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.ModuleStore.data.created_by),1)])]),n("div",Vn,[n("div",Wn,[e[3]||(e[3]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.ModuleStore.data.updated_at),1)]),n("div",Hn,[e[4]||(e[4]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.ModuleStore.data.updated_by),1)])])]),_:1})])}const Qn=L(Bn,[["render",Yn],["__scopeId","data-v-b5bec2d9"]]);const ce=At(),Jn=ve(),Xn={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;ce.id=o,ce.getItem()},methods:{find_picklist_value(o,e){var s="";if(ce[o]!==void 0){const r=ce[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{ModuleStore:ce,blocks:Et,user_store:Jn}}},Zn={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},es={class:"fromGroup relative"},ts={key:0},os={key:1},ns={key:0},ss={key:1},rs={class:"lg:grid lg:grid-cols-2 gap-12"},ls={class:"fromGroup relative"},is={class:"fromGroup relative"},as={class:"lg:grid lg:grid-cols-2 gap-12"},us={class:"fromGroup relative"},ds={class:"fromGroup relative"};function cs(o,e,s,r,t,l){const a=y("Loading"),c=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.ModuleStore.loading=m)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(m,u)=>(p(),v("div",{key:u},[b(c,{title:m.block_name},{default:k(()=>[n("div",Zn,[(p(!0),v($,null,F(m.fields,(i,_)=>(p(),v("div",{key:_,class:Q([`custom-grid-${_%2}`,"mt-4"])},[n("div",es,[n("label",null,f(i.label),1),i.type!="picklist"?(p(),v("span",ts,f(t.ModuleStore.form[i.name]),1)):(p(),v("span",os,[i.name=="assigned_to_picklist"?(p(),v("span",ns,f(t.user_store.get_single_assigned_to_picklist(t.ModuleStore.form[i.name])),1)):(p(),v("span",ss,f(l.find_picklist_value(i.name,t.ModuleStore.form[i.name])),1))]))])],2))),128))])]),_:2},1032,["title"])]))),128)),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",rs,[n("div",ls,[e[1]||(e[1]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.ModuleStore.data.created_at),1)]),n("div",is,[e[2]||(e[2]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.ModuleStore.data.created_by),1)])]),n("div",as,[n("div",us,[e[3]||(e[3]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.ModuleStore.data.updated_at),1)]),n("div",ds,[e[4]||(e[4]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.ModuleStore.data.updated_by),1)])])]),_:1})])}const ps=L(Xn,[["render",cs],["__scopeId","data-v-20a01e31"]]);const pe=Ot(),fs=ve(),ms={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;pe.id=o,pe.getItem()},methods:{find_picklist_value(o,e){var s="";if(pe[o]!==void 0){const r=pe[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{ModuleStore:pe,blocks:jt,user_store:fs}}},vs={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},_s={class:"fromGroup relative"},gs={key:0},bs={key:1},ys={key:0},hs={key:1},ks={class:"lg:grid lg:grid-cols-2 gap-12"},xs={class:"fromGroup relative"},Ss={class:"fromGroup relative"},ws={class:"lg:grid lg:grid-cols-2 gap-12"},Cs={class:"fromGroup relative"},Ds={class:"fromGroup relative"};function Ms(o,e,s,r,t,l){const a=y("Loading"),c=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.ModuleStore.loading=m)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(m,u)=>(p(),v("div",{key:u},[b(c,{title:m.block_name},{default:k(()=>[n("div",vs,[(p(!0),v($,null,F(m.fields,(i,_)=>(p(),v("div",{key:_,class:Q([`custom-grid-${_%2}`,"mt-4"])},[n("div",_s,[n("label",null,f(i.label),1),i.type!="picklist"?(p(),v("span",gs,f(t.ModuleStore.form[i.name]),1)):(p(),v("span",bs,[i.name=="assigned_to_picklist"?(p(),v("span",ys,f(t.user_store.get_single_assigned_to_picklist(t.ModuleStore.form[i.name])),1)):(p(),v("span",hs,f(l.find_picklist_value(i.name,t.ModuleStore.form[i.name])),1))]))])],2))),128))])]),_:2},1032,["title"])]))),128)),b(c,{blockname:"System Generated"},{default:k(()=>[n("div",ks,[n("div",xs,[e[1]||(e[1]=n("label",{for:""},"Created time",-1)),n("span",null,f(t.ModuleStore.data.created_at),1)]),n("div",Ss,[e[2]||(e[2]=n("label",{for:""},"Created By",-1)),n("span",null,f(t.ModuleStore.data.created_by),1)])]),n("div",ws,[n("div",Cs,[e[3]||(e[3]=n("label",{for:""},"Last updated",-1)),n("span",null,f(t.ModuleStore.data.updated_at),1)]),n("div",Ds,[e[4]||(e[4]=n("label",{for:""},"Last updated by",-1)),n("span",null,f(t.ModuleStore.data.updated_by),1)])])]),_:1})])}const Is=L(ms,[["render",Ms],["__scopeId","data-v-32913581"]]);const fe=Ut(),$s=ve(),Ps={components:{Block:V,Map:W,Card:A},mounted(){const o=this.$route.params.id;fe.id=o,fe.getItem()},methods:{find_picklist_value(o,e){var s="";if(fe[o]!==void 0){const r=fe[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s}},data(){return{ModuleStore:fe,blocks:zt,user_store:$s}}},Fs={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},Gs={class:"fromGroup relative"},Ls={key:0},Ts={key:1},Rs={key:0},Bs={key:1};function As(o,e,s,r,t,l){const a=y("Loading"),c=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.ModuleStore.loading=m)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(m,u)=>(p(),v("div",{key:u},[b(c,{title:m.block_name},{default:k(()=>[n("div",Fs,[(p(!0),v($,null,F(m.fields,(i,_)=>(p(),v("div",{key:_,class:Q([`custom-grid-${_%2}`,"mt-4"])},[n("div",Gs,[n("label",null,f(i.label),1),i.type!="picklist"?(p(),v("span",Ls,f(t.ModuleStore.form[i.name]),1)):(p(),v("span",Ts,[i.name=="assigned_to_picklist"?(p(),v("span",Rs,f(t.user_store.get_single_assigned_to_picklist(t.ModuleStore.form[i.name])),1)):(p(),v("span",Bs,f(l.find_picklist_value(i.name,t.ModuleStore.form[i.name])),1))]))])],2))),128))])]),_:2},1032,["title"])]))),128))])}const Es=L(Ps,[["render",As],["__scopeId","data-v-afa2647e"]]);const ne=ve(),Os={components:{Block:V,Map:W,Card:A,Badge:Jt},mounted(){const o=this.$route.params.id;ne.id=o,ne.getItem(),console.log(ne.form)},methods:{find_picklist_value(o,e){var s="";if(ne[o]!==void 0){const r=ne[o].find(t=>t.id==e);r!==void 0&&(s=r.label)}return s},split_name(o){return o.split(".")[1]}},data(){return{ModuleStore:ne,blocks:Nt}}},js={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},Us={class:"fromGroup relative"},zs={key:0},Ns={key:0},qs={key:1},Ks={key:1},Vs={key:0},Ws={key:1};function Hs(o,e,s,r,t,l){const a=y("Loading"),c=y("Badge"),m=y("Block");return p(),v("div",null,[b(a,{active:t.ModuleStore.loading,"onUpdate:active":e[0]||(e[0]=u=>t.ModuleStore.loading=u)},null,8,["active"]),(p(!0),v($,null,F(t.blocks,(u,i)=>(p(),v("div",{key:i},[b(m,{title:u.block_name},{default:k(()=>[n("div",js,[(p(!0),v($,null,F(u.fields,(_,S)=>(p(),v("div",{key:S,class:Q([`custom-grid-${S%2}`,"mt-4"])},[n("div",Us,[n("label",null,f(_.label),1),_.type!="picklist"?(p(),v("span",zs,[_.type=="checkbox"?(p(),v("span",Ns,[t.ModuleStore.form.user_privileges[l.split_name(_.name)]?(p(),z(c,{key:0,label:"Active",badgeClass:"bg-success-500 text-white"})):Y("",!0),t.ModuleStore.form.user_privileges[l.split_name(_.name)]?Y("",!0):(p(),z(c,{key:1,label:"Inactive",badgeClass:"bg-danger-500 text-white"}))])):(p(),v("span",qs,f(t.ModuleStore.form[_.name]),1))])):(p(),v("span",Ks,[_.name=="assigned_to_picklist"?(p(),v("span",Vs,f(o.user_store.get_single_assigned_to_picklist(t.ModuleStore.form[_.name])),1)):(p(),v("span",Ws,f(l.find_picklist_value(_.name,t.ModuleStore.form[_.name])),1))]))])],2))),128))])]),_:2},1032,["title"])]))),128))])}const Ys=L(Os,[["render",Hs],["__scopeId","data-v-f45cf52c"]]),Pe=st(),Qs=rt("system",{state:()=>({loading:!1,logs:[],systemForm:{logo:"",site:""}}),getters:{},actions:{async activity_logs(o,e){try{this.log=[],this.loading=!0;const s=await this.axios.get("activity_logs/"+o+"/"+e);this.logs=s.data.data,this.loading=!1}catch{}},async save(){try{if(this.systemForm.site=="")return Pe.error("Site title is required!",{timeout:3e3}),!1;if(this.systemForm.logo=="")return Pe.error("Logo is required!",{timeout:3e3}),!1;let o=await this.axios.post("/system",this.systemForm,{headers:{"Content-Type":"multipart/form-data"}});this.systemForm.logo=o.data.data[0].logo,this.systemForm.site=o.data.data[0].site,Pe.success("Successfully saved!",{timeout:3e3})}catch(o){console.log(o)}}},persist:!0}),Ve=Qs(),Js={components:{Card:A},data(){return{modules:this.$route.params.module,module_id:this.$route.params.id,SystemStore:Ve}},mounted(){Ve.activity_logs(this.modules,this.module_id)},computed:{fields_computed(){let o;switch(this.$route.params.module){case"incidents":o=Kt;break;case"resources":o=qt;break;case"contacts":o=it;break;case"agencies":o=at;break}return o},fields(){const o=[];return this.fields_computed.map(e=>{e.fields.map(s=>{o[s.name]=s.label})}),o}}},Xs={class:"relative ltr:pl-2 rtl:pr-2"},Zs={class:"w-[250px] text-xs"},er={class:"text-sm font-medium dark:text-slate-400-900 mb-1 text-slate-600"},tr={class:"font-bold"},or=["innerHTML"];function nr(o,e,s,r,t,l){const a=y("Loading"),c=y("Card");return p(),v("div",null,[b(a,{active:t.SystemStore.loading,"onUpdate:active":e[0]||(e[0]=m=>t.SystemStore.loading=m)},null,8,["active"]),b(c,{title:"Updates"},{default:k(()=>[n("ul",Xs,[(p(!0),v($,null,F(t.SystemStore.logs,(m,u)=>(p(),v("li",{key:u,class:"mt-5 flex"},[n("div",Zs,f(m.created_at),1),e[1]||(e[1]=n("div",{class:"w-[100px] ltr:border-l-2 rtl:border-r-2 border-slate-100 dark:border-slate-700 pb-4 last:border-none ltr:pl-[22px] rtl:pr-[22px] relative before:absolute ltr:before:left-[-8px] rtl:before:-right-2 before:top-[0px] before:rounded-full before:w-4 before:h-4 before:bg-slate-900 dark:before:bg-slate-600 before:leading-[2px] before:content-[url('@/assets/images/all-img/ck.svg')]"},null,-1)),n("div",null,[n("h2",er,[n("span",tr,f(m.users_.name),1),lt(" - "+f(m.action),1)]),n("p",{class:"text-xs dark:text-slate-400",innerHTML:m.description.replace("agency_name ","test")},null,8,or)])]))),128))])]),_:1})])}const sr=L(Js,[["render",nr]]),rr=ct();st();const De=rt("media",{state:()=>({loading:!1,modal:!1,title:"",id:"",total:0,current:1,per_page:0,form:{files:[]},mediaList:[]}),actions:{async save(o){try{this.loading=!0;const e=await this.axios.post("media",o,{headers:{"Content-Type":"multipart/form-data"}});rr.List_Relation("media",this.id),this.loading=!1,this.clearFile()}catch{}},async del(o){try{this.loading=!0,(await this.axios.delete("media/"+o)).data.status==200&&this.list()}catch{}},async download(o,e,s){try{this.loading=!0;const r=await this.axios.get("media",{params:{filename:o,extension:e,path:s},responseType:"blob"}),t=URL.createObjectURL(r.data),l=document.createElement("a");l.href=t,l.setAttribute("download",o+"."+e),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t),this.loading=!1}catch{}},clearFile(){this.form.files=[],this.modal=!1}}});var mt={};function be(o,e,s,r){function t(l){return l instanceof s?l:new s(function(a){a(l)})}return new(s||(s=Promise))(function(l,a){function c(i){try{u(r.next(i))}catch(_){a(_)}}function m(i){try{u(r.throw(i))}catch(_){a(_)}}function u(i){i.done?l(i.value):t(i.value).then(c,m)}u((r=r.apply(o,e||[])).next())})}function ye(o,e){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,t,l,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(i){return m([u,i])}}function m(u){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(l=u[0]&2?t.return:u[0]?t.throw||((l=t.return)&&l.call(t),0):t.next)&&!(l=l.call(t,u[1])).done)return l;switch(t=0,l&&(u=[u[0]&2,l.value]),u[0]){case 0:case 1:l=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,t=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(u[0]===6||u[0]===2)){s=0;continue}if(u[0]===3&&(!l||u[1]>l[0]&&u[1]<l[3])){s.label=u[1];break}if(u[0]===6&&s.label<l[1]){s.label=l[1],l=u;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(u);break}l[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(o,s)}catch(i){u=[6,i],t=0}finally{r=l=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function lr(o,e){var s=typeof Symbol=="function"&&o[Symbol.iterator];if(!s)return o;var r=s.call(o),t,l=[],a;try{for(;(e===void 0||e-- >0)&&!(t=r.next()).done;)l.push(t.value)}catch(c){a={error:c}}finally{try{t&&!t.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}}return l}function ir(){for(var o=[],e=0;e<arguments.length;e++)o=o.concat(lr(arguments[e]));return o}var ar=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function Me(o,e){var s=ur(o);if(typeof s.path!="string"){var r=o.webkitRelativePath;Object.defineProperty(s,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:o.name,writable:!1,configurable:!1,enumerable:!0})}return s}function ur(o){var e=o.name,s=e&&e.lastIndexOf(".")!==-1;if(s&&!o.type){var r=e.split(".").pop().toLowerCase(),t=ar.get(r);t&&Object.defineProperty(o,"type",{value:t,writable:!1,configurable:!1,enumerable:!0})}return o}var dr=[".DS_Store","Thumbs.db"];function cr(o){return be(this,void 0,void 0,function(){return ye(this,function(e){return[2,pr(o)&&o.dataTransfer?vr(o.dataTransfer,o.type):fr(o)]})})}function pr(o){return!!o.dataTransfer}function fr(o){var e=mr(o.target)?o.target.files?Le(o.target.files):[]:[];return e.map(function(s){return Me(s)})}function mr(o){return o!==null}function vr(o,e){return be(this,void 0,void 0,function(){var s,r;return ye(this,function(t){switch(t.label){case 0:return o.items?(s=Le(o.items).filter(function(l){return l.kind==="file"}),e!=="drop"?[2,s]:[4,Promise.all(s.map(_r))]):[3,2];case 1:return r=t.sent(),[2,We(vt(r))];case 2:return[2,We(Le(o.files).map(function(l){return Me(l)}))]}})})}function We(o){return o.filter(function(e){return dr.indexOf(e.name)===-1})}function Le(o){for(var e=[],s=0;s<o.length;s++){var r=o[s];e.push(r)}return e}function _r(o){if(typeof o.webkitGetAsEntry!="function")return He(o);var e=o.webkitGetAsEntry();return e&&e.isDirectory?_t(e):He(o)}function vt(o){return o.reduce(function(e,s){return ir(e,Array.isArray(s)?vt(s):[s])},[])}function He(o){var e=o.getAsFile();if(!e)return Promise.reject(o+" is not a File");var s=Me(e);return Promise.resolve(s)}function gr(o){return be(this,void 0,void 0,function(){return ye(this,function(e){return[2,o.isDirectory?_t(o):br(o)]})})}function _t(o){var e=o.createReader();return new Promise(function(s,r){var t=[];function l(){var a=this;e.readEntries(function(c){return be(a,void 0,void 0,function(){var m,u,i;return ye(this,function(_){switch(_.label){case 0:if(c.length)return[3,5];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:return m=_.sent(),s(m),[3,4];case 3:return u=_.sent(),r(u),[3,4];case 4:return[3,6];case 5:i=Promise.all(c.map(gr)),t.push(i),l(),_.label=6;case 6:return[2]}})})},function(c){r(c)})}l()})}function br(o){return be(this,void 0,void 0,function(){return ye(this,function(e){return[2,new Promise(function(s,r){o.file(function(t){var l=Me(t,o.fullPath);s(l)},function(t){r(t)})})]})})}const yr=Object.freeze(Object.defineProperty({__proto__:null,fromEvent:cr},Symbol.toStringTag,{value:"Module"})),hr=Pt(yr);var Ae={};Ae.__esModule=!0;Ae.default=function(o,e){if(o&&e){var s=Array.isArray(e)?e:e.split(","),r=o.name||"",t=(o.type||"").toLowerCase(),l=t.replace(/\/.*$/,"");return s.some(function(a){var c=a.trim().toLowerCase();return c.charAt(0)==="."?r.toLowerCase().endsWith(c):c.endsWith("/*")?l===c.replace(/\/.*$/,""):t===c})}return!0};Object.defineProperty(mt,"__esModule",{value:!0});var G=Ft,kr=hr;function xr(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var Sr=xr(Ae),x=function(){return(x=Object.assign||function(o){for(var e,s=1,r=arguments.length;s<r;s++)for(var t in e=arguments[s])Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t]);return o}).apply(this,arguments)};function Ye(o,e){var s={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&e.indexOf(r)<0&&(s[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var t=0;for(r=Object.getOwnPropertySymbols(o);t<r.length;t++)e.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(o,r[t])&&(s[r[t]]=o[r[t]])}return s}function wr(o,e,s,r){return new(s||(s=Promise))(function(t,l){function a(u){try{m(r.next(u))}catch(i){l(i)}}function c(u){try{m(r.throw(u))}catch(i){l(i)}}function m(u){var i;u.done?t(u.value):(i=u.value,i instanceof s?i:new s(function(_){_(i)})).then(a,c)}m((r=r.apply(o,e||[])).next())})}function Cr(o,e){var s,r,t,l,a={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(m){return function(u){return function(i){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(t=a.trys,!((t=t.length>0&&t[t.length-1])||i[0]!==6&&i[0]!==2)){a=0;continue}if(i[0]===3&&(!t||i[1]>t[0]&&i[1]<t[3])){a.label=i[1];break}if(i[0]===6&&a.label<t[1]){a.label=t[1],t=i;break}if(t&&a.label<t[2]){a.label=t[2],a.ops.push(i);break}t[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(o,a)}catch(_){i=[6,_],r=0}finally{s=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([m,u])}}}function Te(o,e){for(var s=0,r=e.length,t=o.length;s<r;s++,t++)o[t]=e[s];return o}function Qe(o){o.preventDefault()}function Se(o){return o.dataTransfer?Array.prototype.some.call(o.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!o.target&&!!o.target.files}function Ce(o){return typeof o.isPropagationStopped=="function"?o.isPropagationStopped():o.cancelBubble!==void 0&&o.cancelBubble}var Dr={code:"too-many-files",message:"Too many files"},Mr=function(o){return o=Array.isArray(o)&&o.length===1?o[0]:o,{code:"file-invalid-type",message:"File type must be "+(Array.isArray(o)?"one of "+o.join(", "):o)}};function me(o){return o!=null}function Je(o,e){var s=o.type==="application/x-moz-file"||Sr.default(o,e);return[s,s?null:Mr(e)]}var Xe=function(o){return{code:"file-too-large",message:"File is larger than "+o+" bytes"}},Ze=function(o){return{code:"file-too-small",message:"File is smaller than "+o+" bytes"}};function et(o,e,s){if(me(o.size)&&o.size)if(me(e)&&me(s)){if(o.size>s)return[!1,Xe(s)];if(o.size<e)return[!1,Ze(e)]}else{if(me(e)&&o.size<e)return[!1,Ze(e)];if(me(s)&&o.size>s)return[!1,Xe(s)]}return[!0,null]}function U(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(s){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return o.some(function(l){return!Ce(s)&&l&&l.apply(void 0,Te([s],r)),Ce(s)})}}var Ir={disabled:!1,getFilesFromEvent:kr.fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};function $r(o,e){switch(e.type){case"focus":return x(x({},o),{isFocused:!0});case"blur":return x(x({},o),{isFocused:!1});case"openDialog":return x(x({},o),{isFileDialogActive:!0});case"closeDialog":return x(x({},o),{isFileDialogActive:!1});case"setDraggedFiles":var s=e.isDragActive,r=e.draggedFiles;return x(x({},o),{draggedFiles:r,isDragActive:s});case"setFiles":return x(x({},o),{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return x(x({},o),{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return o}}var Pr=mt.useDropzone=function(o){o===void 0&&(o={});var e=G.ref(x(x({},Ir),o));G.watch(function(){return x({},o)},function(d){e.value=x(x({},e.value),d)});var s=G.ref(),r=G.ref(),t=function(d,h,w){var I=G.reactive(h),P=function(R){var T=d(G.toRaw(I),R);Object.keys(T).forEach(function(E){I[E]=T[E]})};return w!=null&&P(w),[I,P]}($r,{isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]}),l=t[0],a=t[1],c=function(){r.value&&(a({type:"openDialog"}),r.value.value="",r.value.click())},m=function(){var d=e.value.onFileDialogCancel;l.isFileDialogActive&&setTimeout(function(){if(r.value){var h=r.value.files;h&&!h.length&&(a({type:"closeDialog"}),typeof d=="function"&&d())}},300)};function u(d){s.value&&(s.value.$el||s.value).isEqualNode(d.target)&&(d.keyCode!==32&&d.keyCode!==13||(d.preventDefault(),c()))}function i(){a({type:"focus"})}function _(){a({type:"blur"})}function S(){var d;e.value.noClick||(d===void 0&&(d=window.navigator.userAgent),function(h){return h.includes("MSIE")||h.includes("Trident/")}(d)||function(h){return h.includes("Edge/")}(d)?setTimeout(c,0):c())}var C=G.ref([]),D=function(d){s.value&&((s.value.$el||s.value).contains(d.target)||(d.preventDefault(),C.value=[]))};function g(d){e.value.noDragEventsBubbling&&d.stopPropagation()}function M(d){return wr(this,void 0,void 0,function(){var h,w,I,P,R;return Cr(this,function(T){switch(T.label){case 0:return h=e.value,w=h.getFilesFromEvent,I=h.noDragEventsBubbling,P=h.onDragEnter,d.preventDefault(),g(d),C.value=Te(Te([],C.value),[d.target]),Se(d)?w?[4,w(d)]:[2]:[3,2];case 1:if((R=T.sent())||(R=[]),Ce(d)&&!I)return[2];a({draggedFiles:R,isDragActive:!0,type:"setDraggedFiles"}),P&&P(d),T.label=2;case 2:return[2]}})})}function le(d){var h=e.value.onDragOver;if(d.preventDefault(),g(d),d.dataTransfer)try{d.dataTransfer.dropEffect="copy"}catch{}return Se(d)&&h&&h(d),!1}function gt(d){d.preventDefault(),g(d);var h=C.value.filter(function(P){return!!s.value&&(s.value.$el||s.value).contains(P)}),w=h.indexOf(d.target);if(w!==-1&&h.splice(w,1),C.value=h,!(h.length>0)){a({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]});var I=e.value.onDragLeave;Se(d)&&I&&I(d)}}function Ee(d){d.preventDefault(),g(d),C.value=[];var h=e.value,w=h.getFilesFromEvent,I=h.noDragEventsBubbling,P=h.accept,R=h.minSize,T=h.maxSize,E=h.multiple,X=h.maxFiles,Z=h.onDrop,ke=h.onDropRejected,xe=h.onDropAccepted;if(Se(d)){if(!w)return;Promise.resolve(w(d)).then(function($e){if(!Ce(d)||I){var N=[],ee=[];$e.forEach(function(te){var Ue=Je(te,P),ht=Ue[0],kt=Ue[1],ze=et(te,R,T),xt=ze[0],St=ze[1];if(ht&&xt)N.push(te);else{var wt=[kt,St].filter(function(Ct){return Ct});ee.push({file:te,errors:wt})}}),(!E&&N.length>1||E&&X>=1&&N.length>X)&&(N.forEach(function(te){ee.push({file:te,errors:[Dr]})}),N.splice(0)),a({acceptedFiles:N,fileRejections:ee,type:"setFiles"}),Z&&Z(N,ee,d),ee.length>0&&ke&&ke(ee,d),N.length>0&&xe&&xe(N,d)}})}a({type:"reset"})}G.onMounted(function(){window.addEventListener("focus",m,!1),e.value.preventDropOnDocument&&(document.addEventListener("dragover",Qe,!1),document.addEventListener("drop",D,!1))}),G.onUnmounted(function(){window.removeEventListener("focus",m,!1),e.value.preventDropOnDocument&&(document.removeEventListener("dragover",Qe),document.removeEventListener("drop",D))});var J=function(d){return e.value.disabled?void 0:d},Ie=function(d){return e.value.noKeyboard?void 0:J(d)},he=function(d){return e.value.noDrag?void 0:J(d)},bt=function(d){d.stopPropagation()},Oe=G.computed(function(){return l.draggedFiles?l.draggedFiles.length:0}),je=G.computed(function(){return Oe.value>0&&function(d){var h=d.files,w=d.accept,I=d.minSize,P=d.maxSize,R=d.multiple,T=d.maxFiles;return!(!R&&h.length>1||R&&T>=1&&h.length>T)&&h.every(function(E){var X=Je(E,w)[0],Z=et(E,I,P)[0];return X&&Z})}({files:l.draggedFiles,accept:e.value.accept,minSize:e.value.minSize,maxSize:e.value.maxSize,multiple:e.value.multiple,maxFiles:e.value.maxFiles})}),yt=G.computed(function(){return Oe.value>0&&!je.value});return x(x({},G.toRefs(l)),{isDragAccept:je,isDragReject:yt,isFocused:G.computed(function(){return l.isFocused&&!e.value.disabled}),getRootProps:function(d){d===void 0&&(d={});var h=d.onKeyDown,w=d.onFocus,I=d.onBlur,P=d.onClick,R=d.onDragEnter,T=d.onDragenter,E=d.onDragOver,X=d.onDragover,Z=d.onDragLeave,ke=d.onDragleave,xe=d.onDrop,$e=Ye(d,["onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragenter","onDragOver","onDragover","onDragLeave","onDragleave","onDrop"]);return x(x({onKeyDown:Ie(U(h,u)),onFocus:Ie(U(w,i)),onBlur:Ie(U(I,_)),onClick:J(U(P,S)),onDragenter:he(U(R,T,M)),onDragover:he(U(E,X,le)),onDragleave:he(U(Z,ke,gt)),onDrop:he(U(xe,Ee)),ref:s},e.value.disabled||e.value.noKeyboard?{}:{tabIndex:0}),$e)},getInputProps:function(d){d===void 0&&(d={});var h=d.onChange,w=d.onClick,I=Ye(d,["onChange","onClick"]),P={accept:e.value.accept,multiple:e.value.multiple,style:"display: none",type:"file",onChange:J(U(h,Ee)),onClick:J(U(w,bt)),autoComplete:"off",tabIndex:-1,ref:r};return x(x({},P),I)},rootRef:s,inputRef:r,open:J(c)})};const Fr="/assets/upload-7ea9ffeb.svg",Gr={setup(){const o=De();function e(u){u.map(i=>{o.form.files.push(i)})}function s(){o.form.files=[],o.modal=!1}function r(u){o.form.files.splice(u,1)}function t(u){console.log(u.target.files[0])}const l=()=>{const u=Gt.currentRoute.value.params.id;var i=new FormData;o.id=u,i.append("incident_id",u),o.form.files.map(_=>{i.append("files[]",_)}),o.save(i)},{getRootProps:a,getInputProps:c,...m}=Pr({onDrop:e});return{getRootProps:a,getInputProps:c,closeModal:s,removeFile:r,SaveMedia:l,changeFile:t,...m,media:o}},components:{Modal:pt,Icon:Re,Button:Be}},Lr={key:0,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Tr={key:1,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Rr={class:"list-item space-y-3 h-full overflow-x-auto mt-5"},Br={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},Ar={class:"text-sm text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap"},Er={class:"flex-1 ltr:text-right rtl:text-left"},Or={class:"text-sm font-light text-slate-400 dark:text-slate-400"},jr={class:"w-full flex justify-between mt-5"};function Ur(o,e,s,r,t,l){const a=y("Button");return p(),v("div",null,[n("div",Ne(r.getRootProps(),{class:"w-full text-center border-dashed border border-secondary-500 rounded-md py-[52px] flex flex-col justify-center items-center"}),[n("div",null,[n("input",Ne(r.getInputProps(),{class:"hidden"}),null,16),e[2]||(e[2]=n("img",{src:Fr,alt:"",class:"mx-auto mb-4"},null,-1)),o.isDragActive?(p(),v("p",Lr," Drop the files here ... ")):(p(),v("p",Tr," Drop files here or click to upload. "))])],16),n("ul",Rr,[(p(!0),v($,null,F(r.media.form.files,(c,m)=>(p(),v("li",{class:"flex items-center space-x-3 rtl:space-x-reverse border-b border-slate-100 dark:border-slate-700 last:border-b-0 pb-3 last:pb-0",key:m},[n("div",Br,[n("div",Ar,f(m+1)+". "+f(c.name),1)]),n("div",Er,[n("div",Or,[b(a,{icon:"heroicons-outline:trash",btnClass:"inline-flex items-center justify-center h-10 w-10 bg-danger-500 text-lg border rounded border-danger-500 text-white",onClick:u=>r.removeFile(m)},null,8,["onClick"])])])]))),128))]),n("div",jr,[b(a,{text:"Close",btnClass:"btn-dark",onClick:e[0]||(e[0]=c=>r.closeModal())}),b(a,{text:"Save Media",btnClass:"btn-danger",onClick:e[1]||(e[1]=c=>r.SaveMedia())})])])}const zr=L(Gr,[["render",Ur]]);De();const Nr={props:{previewContent:{type:String,default:""}}},qr=["src"],Kr=["src"];function Vr(o,e,s,r,t,l){return p(),v("div",null,[s.previewContent.type=="image/png"||s.previewContent.type=="image/jpg"||s.previewContent.type=="image/svg+xml"?(p(),v("img",{key:0,src:s.previewContent.preview,style:{"max-height":"500px",width:"100%"}},null,8,qr)):(p(),v("iframe",{key:1,src:s.previewContent.preview,style:{width:"100%","min-height":"500px"},frameborder:"0"},null,8,Kr))])}const Wr=L(Nr,[["render",Vr]]);const Fe=De();B("Media");const Hr={props:{previewContent:{default:"",type:String}},components:{Modal:pt,Button:Be,Media:zr,Preview:Wr},data(){return{media:Fe}},methods:{closeModal(){Fe.form.files=[],Fe.modal=!1}}};function Yr(o,e,s,r,t,l){const a=y("Media"),c=y("Preview"),m=y("Modal",!0);return p(),v("div",null,[b(m,{title:t.media.title,activeModal:t.media.modal,onClose:l.closeModal,sizeClass:"max-w-5xl"},{default:k(()=>[t.media.title=="Media"?(p(),z(a,{key:0})):Y("",!0),t.media.title=="Preview"?(p(),z(c,{key:1,"preview-content":s.previewContent},null,8,["preview-content"])):Y("",!0)]),_:1},8,["title","activeModal","onClose"])])}const Qr=L(Hr,[["render",Yr]]),q=ct(),Ge=B(!1),se=De(),Jr=B(15),Xr=B(15),tt=B(""),Zr=[{label:"File Name",field:"filename"},{label:"Extionsion",field:"extension"},{label:"Action",field:"action"}],el={components:{Card:A,Icon:Re,Tooltip:Xt,Button:Be,modal:Qr,Pagination:Zt,Swal:qe,InputGroup:eo},data(){return{media:se,columns:Zr,current:Jr,per_page:Xr,preview_content_data:tt,list:q,is_search:Ge}},mounted(){q.List_Relation("media",this.$route.params.id)},methods:{openModal(){se.title="Media",se.modal=!0},preview(o,e,s){tt.value={name:o,preview:e,type:s},se.title="Preview",se.modal=!0},changePage(o){q.current=o,q.List_Relation("media",this.$route.params.id)},searchBtn(){q.search!=""&&(Ge.value=!0,q.List_Relation("media",this.$route.params.id))},clearSearch(){q.search="",Ge.value=!1,q.List_Relation("media",this.$route.params.id)},download(o,e,s){se.download(o,e,s)},del(o,e,s){const r=e+"."+s;qe.fire({title:"Do you want to delete this "+r+" ?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&q.Delete_Relation("media",this.$route.params.id,o)})}}},tl={class:"grid lg:grid-cols-2 mt-4 mb-4"},ol={class:"flex"},nl={class:"flex justify-end"},sl={key:0},rl={class:"flex space-x-3 justify-center rtl:space-x-reverse"},ll=["onClick"],il={class:"action-btn"},al={class:"action-btn text-red-500 cursor-no-drop"},ul=["onClick"],dl=["onClick"],cl={class:"py-4 px-3 flex justify-center"};function pl(o,e,s,r,t,l){const a=y("Loading"),c=y("Button"),m=y("InputGroup"),u=y("Icon"),i=y("Tooltip"),_=y("Pagination"),S=y("vue-good-table"),C=y("Card"),D=y("modal");return p(),v("div",null,[b(a,{active:t.media.loading,"onUpdate:active":e[0]||(e[0]=g=>t.media.loading=g)},null,8,["active"]),b(C,{title:"Media"},{default:k(()=>[n("div",tl,[n("div",ol,[b(m,{type:"text",class:"w-3/5",modelValue:t.list.search,"onUpdate:modelValue":e[1]||(e[1]=g=>t.list.search=g),placeholder:"Search..."},{append:k(()=>[b(c,{disabled:t.list.filter_data.length>0,onClick:l.searchBtn,icon:"heroicons-outline:search",btnClass:"btn-outline-dark disabled:bg-slate-300 disabled:cursor-not-allowed"},null,8,["disabled","onClick"])]),_:1},8,["modelValue"]),t.is_search?(p(),z(c,{key:0,icon:"heroicons-outline:x-mark",text:"Clear Search",btnClass:"btn-outline-danger ml-2 py-2",onClick:l.clearSearch},null,8,["onClick"])):Y("",!0)]),n("div",nl,[b(c,{icon:"heroicons-outline:plus",text:"Add Media",btnClass:"btn-danger mr-2 py-2",onClick:l.openModal},null,8,["onClick"])])]),b(S,{isLoading:t.list.loading,columns:t.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:t.list.list_relation,"pagination-options":{enabled:!0,perPage:15},"max-height":"600px","select-options":{enabled:!1,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":k(g=>[g.column.field=="action"?(p(),v("span",sl,[n("div",rl,[g.row.view!=""?(p(),z(i,{key:0,placement:"top",arrow:"",theme:"dark"},{button:k(()=>[n("a",{onClick:M=>l.preview(g.row.filename,g.row.view,g.row.filetype)},[n("div",il,[b(u,{icon:"heroicons:eye"})])],8,ll)]),default:k(()=>[e[2]||(e[2]=n("span",null,"Preview",-1))]),_:2},1024)):(p(),z(i,{key:1,placement:"top",arrow:"",theme:"dark",'"':""},{button:k(()=>[n("a",null,[n("div",al,[b(u,{icon:"heroicons:eye-slash"})])])]),default:k(()=>[e[3]||(e[3]=n("span",null,"No Preview",-1))]),_:1})),b(i,{placement:"top",arrow:"",theme:"dark"},{button:k(()=>[n("div",{class:"action-btn text-blue-500",onClick:M=>l.download(g.row.filename,g.row.extension,g.row.path)},[b(u,{icon:"heroicons:document-arrow-down"})],8,ul)]),default:k(()=>[e[4]||(e[4]=n("span",null,"Download",-1))]),_:2},1024),b(i,{placement:"top",arrow:"",theme:"danger-500"},{button:k(()=>[n("div",{class:"action-btn text-red-500",onClick:M=>l.del(g.row.id,g.row.filename,g.row.extension)},[b(u,{icon:"heroicons:trash"})],8,dl)]),default:k(()=>[e[5]||(e[5]=n("span",null,"Delete",-1))]),_:2},1024)])])):Y("",!0)]),"pagination-bottom":k(g=>[n("div",cl,[b(_,{total:t.list.total,current:t.list.current,"per-page":t.list.per_page,onPageChanged:l.changePage,perPageChanged:g.perPageChanged},null,8,["total","current","per-page","onPageChanged","perPageChanged"])])]),_:1},8,["isLoading","columns","rows"])]),_:1}),b(D,{"preview-content":t.preview_content_data},null,8,["preview-content"])])}const fl=L(el,[["render",pl]]),ml={incidents:[{title:"Details",icon:"heroicons-outline:view-columns",component:"Incident"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"},{title:"Media",icon:"heroicons-outline:view-columns",component:"IncidentMedia"}],resources:[{title:"Details",icon:"heroicons-outline:view-columns",component:"Resource"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],preplans:[{title:"Details",icon:"heroicons-outline:view-columns",component:"PrePlan"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],contacts:[{title:"Details",icon:"heroicons-outline:view-columns",component:"Contact"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],agencies:[{title:"Details",icon:"heroicons-outline:view-columns",component:"Agency"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],responders:[{title:"Details",icon:"heroicons-outline:view-columns",component:"Responder"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],call_logs:[{title:"Details",icon:"heroicons-outline:view-columns",component:"CallLog"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}],users:[{title:"Details",icon:"heroicons-outline:view-columns",component:"User"},{title:"Updates",icon:"heroicons-outline:view-columns",component:"Update"}]},vl={components:{Breadcrumb:Vt,Card:A,TabGroup:no,TabList:so,Tab:ro,TabPanel:io,TabPanels:lo,Icon:Re,Resource:kn,Incident:Vo,Update:sr,Contact:Tn,Agency:Qn,Responder:ps,PrePlan:Is,User:Ys,CallLog:Es,IncidentMedia:fl},computed:{button_module(){return ml[this.$route.params.module]}}},_l={class:"text-ba se relative top-[1px] ltr:mr-1 rtl:ml-1"};function gl(o,e,s,r,t,l){const a=y("Breadcrumb"),c=y("Icon"),m=y("Tab"),u=y("TabList"),i=y("Card"),_=y("TabPanel"),S=y("TabPanels"),C=y("TabGroup");return p(),v("div",null,[b(a,{mode:"view"}),b(C,{defaultIndex:0},{default:k(()=>[b(i,{class:"mb-4"},{default:k(()=>[b(u,{class:"lg:space-x-8 md:space-x-4 space-x-0 rtl:space-x-reverse"},{default:k(()=>[(p(!0),v($,null,F(l.button_module,(D,g)=>(p(),z(m,{as:"template",key:g},{default:k(({selected:M})=>[n("button",{class:Q([[M?"text-primary-500 before:w-full":"text-slate-500 before:w-0 dark:text-slate-300"],"inline-flex items-start text-sm font-medium capitalize bg-white dark:bg-slate-800 ring-0 foucs:ring-0 focus:outline-none px-2 transition duration-150 before:transition-all before:duration-150 relative before:absolute before:left-1/2 before:bottom-[-6px] before:h-[1.5px] before:bg-primary-500 before:-translate-x-1/2"])},[n("span",_l,[b(c,{icon:D.icon},null,8,["icon"])]),lt(f(D.title),1)],2)]),_:2},1024))),128))]),_:1})]),_:1}),b(S,null,{default:k(()=>[(p(!0),v($,null,F(l.button_module,(D,g)=>(p(),z(_,{key:g},{default:k(()=>[(p(),z(Lt(D.component)))]),_:2},1024))),128))]),_:1})]),_:1})])}const Fl=L(vl,[["render",gl]]);export{Fl as default};

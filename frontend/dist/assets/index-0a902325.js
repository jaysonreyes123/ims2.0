import{M as I,a as V,b as B,c as j,d as N,m as h}from"./mapbox-gl-79a43217.js";import{C as D}from"./index-59a3d1fa.js";import{r as y,_ as g,a as m,b as a,c as n,f as t,d as _,w as d,F as b,E as x,C as f,h as p,t as l,g as u,R as G}from"./index-1d3dd1f9.js";import"./index-a722a3a4.js";const F=y(),L=y([]),Y=y([]),E={components:{MapboxMap:I,MapboxMarker:V,MapboxGeocoder:B,MapboxImages:j,MapboxLayer:N,Card:D},data(){return{coordinates:[0,0],incident_map_:L,resources_map_:Y,map:F}},mounted(){this.incident_map(),this.resources_map()},methods:{async incident_map(){try{const o=await this.$axios.get("map/incidents");this.incident_map_=o.data}catch(o){console.log(o)}},async resources_map(){try{const o=await this.$axios.get("map/resources");this.resources_map_=o.data}catch(o){console.log(o)}},flyto(o){F.value.flyTo({center:o})}}},J={class:"shadow-lg"},S={class:"lg:grid grid-cols-5 rounded-md"},T={class:"col-span-4"},X={style:{width:"300px"}},Z={class:"text-xs mt-1"},R={style:{width:"300px"}},O={class:"text-xs mt-1"},Q={class:"bg-white p-5 h-screen overflow-x-auto"},U={class:"list-item mt-1"},W=["onClick"],H={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},P={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"},q={key:0},A={class:"list-item mt-1"},K=["onClick"],ee={class:"text-start overflow-hidden text-ellipsis whitespace-nowrap max-w-[63%]"},te={class:"text-xs text-slate-600 dark:text-slate-300 overflow-hidden text-ellipsis whitespace-nowrap flex"};function se(o,e,w,v,r,c){const C=m("MapboxGeocoder"),k=m("router-link"),M=m("MapboxMarker"),z=m("MapboxMap");return a(),n("div",J,[t("div",S,[t("div",T,[_(z,{class:"h-screen",onMbCreated:e[0]||(e[0]=s=>r.map=s),"access-token":"pk.eyJ1IjoiamF5c29ucmV5ZXMyNiIsImEiOiJjbGd1aDViYXUwZzM2M3BsamlpdWtjbzBsIn0.DmYf96Yhwg7vip5Qpzghnw","map-style":"mapbox://styles/mapbox/streets-v11",center:[122.4902841093123,12.573067659271082],zoom:5},{default:d(()=>[_(C,{countries:"PH"}),r.incident_map_!==void 0?(a(!0),n(b,{key:0},x(r.incident_map_.features,(s,i)=>(a(),f(M,{key:i,"lng-lat":s.geometry.coordinates},{popup:d(()=>[t("div",X,[e[3]||(e[3]=t("p",{class:"text-base"},[t("b",null,"Incident")],-1)),t("div",Z,[_(k,{class:"text-blue-600",to:`/app/module/incidents/detail/${s.properties.id}`},{default:d(()=>[p(l(s.properties.incident_no),1)]),_:2},1032,["to"]),t("p",null,[e[1]||(e[1]=t("b",null,"Status: ",-1)),p(l(s.properties.status),1)]),t("p",null,[e[2]||(e[2]=t("b",null,"Location: ",-1)),p(l(s.properties.location),1)])])])]),default:d(()=>[e[4]||(e[4]=t("p",{class:"custom-marker"},[t("span",{class:"pulsing-dot-red"})],-1))]),_:2},1032,["lng-lat"]))),128)):u("",!0),r.resources_map_!==void 0?(a(!0),n(b,{key:1},x(r.resources_map_.features,(s,i)=>(a(),f(M,{key:i,"lng-lat":s.geometry.coordinates},{popup:d(()=>[t("div",R,[e[7]||(e[7]=t("p",{class:"text-base"},[t("b",null,"Resources")],-1)),t("div",O,[_(k,{class:"text-blue-600",to:`/app/module/resources/detail/${s.properties.id}`},{default:d(()=>[p(l(s.properties.name),1)]),_:2},1032,["to"]),t("p",null,[e[5]||(e[5]=t("b",null,"Type: ",-1)),p(l(s.properties.type),1)]),t("p",null,[e[6]||(e[6]=t("b",null,"Status: ",-1)),p(l(s.properties.status),1)])])])]),default:d(()=>[e[8]||(e[8]=t("p",{class:"custom-marker"},[t("span",{class:"pulsing-dot-black"})],-1))]),_:2},1032,["lng-lat"]))),128)):u("",!0)]),_:1})]),t("div",Q,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-bold"},"Current incidents",-1)),t("ul",U,[r.incident_map_!==void 0?(a(!0),n(b,{key:0},x(r.incident_map_.features,(s,i)=>(a(),n("li",{onClick:$=>c.flyto(s.geometry.coordinates),key:i,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[t("div",H,[t("div",P,[e[9]||(e[9]=t("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#FF0000] mr-2"},null,-1)),p(" "+l(s.properties.incident_no),1)])])],8,W))),128)):u("",!0)])]),e[13]||(e[13]=t("br",null,null,-1)),r.resources_map_!=""?(a(),n("div",q,[e[12]||(e[12]=t("p",{class:"text-sm font-bold"},"Current Resources",-1)),t("ul",A,[r.resources_map_!==void 0?(a(!0),n(b,{key:0},x(r.resources_map_.features,(s,i)=>(a(),n("li",{onClick:$=>c.flyto(s.geometry.coordinates),key:i,class:"hover:bg-slate-100 p-2 cursor-pointer flex items-center border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[t("div",ee,[t("div",te,[e[11]||(e[11]=t("span",{class:"block h-[15px] w-[15px] bg-red-500 rounded-full bg-[#000000] mr-2"},null,-1)),p(" "+l(s.properties.name),1)])])],8,K))),128)):u("",!0)])])):u("",!0)])])])}const oe=g(E,[["render",se],["__scopeId","data-v-16be29b5"]]);h.accessToken="pk.eyJ1IjoiamF5c29ucmV5ZXMyNiIsImEiOiJjbGd1aDViYXUwZzM2M3BsamlpdWtjbzBsIn0.DmYf96Yhwg7vip5Qpzghnw";const ae=y([]),re={data(){return{heat_map_data:ae}},mounted(){this.heat_map()},methods:{async heat_map(){try{const o=await this.$axios.get("map/heat_map");this.heat_map_data=o.data;const e=new h.Map({container:this.$refs.mapContainer,style:"mapbox://styles/mapbox/dark-v10",center:[122.4902841093123,12.573067659271082],zoom:5});e.addControl(new h.FullscreenControl),e.addControl(new h.NavigationControl),e.on("load",()=>{e.addSource("datasource",{type:"geojson",data:this.heat_map_data}),console.log(this.heat_map_data),e.addLayer({id:"heatheat",type:"heatmap",source:"datasource",maxzoom:10,paint:{"heatmap-weight":{property:"dbh",type:"exponential",stops:[[1,0],[62,1]]},"heatmap-intensity":{stops:[[11,1],[18,3]]},"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(255, 255, 255,0)",.2,"#FF0000",.4,"#FF0000",.6,"#FF0000",.8,"#FF0000"],"heatmap-radius":{stops:[[3,18],[10,20]]},"heatmap-opacity":{default:1,stops:[[6,1],[10,0]]}}},"waterway-label"),e.addLayer({id:"point",type:"circle",source:"datasource",minzoom:9,paint:{"circle-radius":{property:"dbh",type:"exponential",stops:[[{zoom:10,value:1},5],[{zoom:10,value:62},10],[{zoom:12,value:1},20],[{zoom:12,value:62},50]]},"circle-color":{property:"dbh",type:"exponential",stops:[[0,"rgba(255, 255, 255,0)"],[10,"#FF0000"],[20,"#FF0000"],[30,"#FF0000"],[40,"#FF0000"],[50,"#FF0000"],[60,"#FF0000"]]},"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":{stops:[[6,0],[10,1]]}}},"waterway-label")})}catch(o){console.log(o)}}}},ne={class:"shadow-lg"},pe={ref:"mapContainer",class:"map-container h-screen"};function le(o,e,w,v,r,c){return a(),n("div",ne,[t("div",pe,null,512)])}const ie=g(re,[["render",le]]),de={components:{incident_map:oe,heat_map:ie},methods:{MapView(){return this.$route.params.module}}};function ce(o,e,w,v,r,c){return a(),n("div",null,[(a(),f(G(c.MapView())))])}const xe=g(de,[["render",ce]]);export{xe as default};

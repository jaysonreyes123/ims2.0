import{u as D,B as H,j as I,l as T,S as A,a as P,b as j,c as K,d as O,e as Y,f as J,g as Q,h as W,p as X,r as Z,i as $,k as ee}from"./user-dd06187b.js";import{B as te,M as oe}from"./index-97d0c7de.js";import{T as le}from"./index-b019bb3a.js";import{B as se}from"./index-b562c514.js";import{C as ae,T as re}from"./index-b262ec37.js";import{I as ne}from"./index-dd1ce917.js";import{_ as G,q as ie,r as de,p as ue,a as m,b as l,c as s,f as n,I as ce,K as me,a1 as pe,n as f,g as c,C as g,d as i,w as k,T as F,t as _,i as _e,F as x,E as w,h}from"./index-1d3dd1f9.js";import{u as R}from"./incident-9ee9fcc1.js";import"./index-59a3d1fa.js";import"./mapbox-gl-79a43217.js";import"./index-a722a3a4.js";const he=ie({name:"Checkbox",inheritAttrs:!1,components:{Icon:ne},props:{label:{type:String},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:"checkbox"},activeClass:{type:String,default:"bg-slate-900 dark:bg-slate-900 "},value:{type:null},modelValue:{type:null},badge:{type:Boolean,default:!1},icon:{type:Boolean,default:!1},prevIcon:{type:String,default:"heroicons-outline:volume-up"},nextIcon:{type:String,default:"heroicons-outline:volume-off"}},emits:{"update:modelValue":e=>({modelValue:e})},setup(e,o){const d=de(e.active),M=()=>{d.value=!d.value};return{localValue:ue({get:()=>e.modelValue,set:u=>o.emit("update:modelValue",u)}),ck:d,onChange:M}}}),fe=["disabled","name","value"],be={key:0},ge={key:0},ke={key:0,class:"text-slate-500 dark:text-slate-400 text-sm leading-6"};function ye(e,o,d,M,a,u){const y=m("Icon");return l(),s("div",null,[n("label",{class:f(["flex items-start",e.disabled?" cursor-not-allowed opacity-40":"cursor-pointer"])},[ce(n("input",pe({type:"checkbox",class:"hidden",disabled:e.disabled,name:e.name,onChange:o[0]||(o[0]=(...b)=>e.onChange&&e.onChange(...b)),value:e.value,"onUpdate:modelValue":o[1]||(o[1]=b=>e.localValue=b)},e.$attrs),null,16,fe),[[me,e.localValue]]),n("div",{class:f([e.ck?e.activeClass:"bg-secondary-500","relative inline-flex h-6 w-[46px] ltr:mr-3 rtl:ml-3 items-center rounded-full transition-all duration-150"])},[e.badge&&e.ck?(l(),s("span",{key:0,class:f([e.icon?"text-sm":" text-[9px]","absolute left-1 top-1/2 -translate-y-1/2 capitalize font-bold text-white tracking-[1px]"])},[e.icon?c("",!0):(l(),s("span",be,"on")),e.icon?(l(),g(y,{key:1,icon:e.prevIcon},null,8,["icon"])):c("",!0)],2)):c("",!0),e.badge&&!e.ck?(l(),s("span",{key:1,class:f([e.icon?"text-sm":" text-[9px]","absolute right-1 top-1/2 -translate-y-1/2 capitalize font-bold text-slate-900 tracking-[1px]"])},[i(F,null,{default:k(()=>[e.icon?c("",!0):(l(),s("span",ge,"Off"))]),_:1}),i(F,null,{default:k(()=>[e.icon?(l(),g(y,{key:0,icon:e.nextIcon},null,8,["icon"])):c("",!0)]),_:1})],2)):c("",!0),n("span",{class:f([e.ck?"ltr:translate-x-6 rtl:-translate-x-6":"ltr:translate-x-[2px] rtl:-translate-x-[2px]","inline-block h-5 w-5 transform rounded-full bg-white transition-all duration-150"])},null,2)],2),e.label?(l(),s("span",ke,_(e.label),1)):c("",!0)],2)])}const Se=G(he,[["render",ye]]);const v=D(),ve={components:{Block:te,Textinput:le,Button:se,Select:ae,Textarea:re,Map:oe,Breadcrumb:H,Switch:Se},data(){return{saveBtn:"Save "+this.$route.params.module,contacts_field:I,incidents_field:T,form:{},loading:!1,user_store:v}},created(){this.form=this.ModuleStore.form,this.ModuleStore.loading=!1,this.$route.params.id!=""&&this.$route.params.id!=null?(this.ModuleStore.id=this.$route.params.id,this.ModuleStore.getItem()):this.clearField()},mounted(){(this.$route.params.id===void 0||this.$route.params.id=="")&&this.$route.params.module=="incidents"&&R().generate_id(this.$route.params.module),this.load_picklist()},unmounted(){},methods:{split_name(e){return e.split(".")[1]},clearField(){this.fields_computed.map(e=>{e.fields.map(o=>{this.ModuleStore.id="";const d=o.name.split(".");d.length==1?this.form[o.name]=o.default:this.form[d[0]][d[1]]=o.default})})},saveForm(){this.ModuleStore.form=this.form;var e="";if(this.RequiredField.map(o=>{this.ModuleStore.form[o.name]==""&&(e+=`<span class="text-red-500"><b>${o.label}</b> is required field</span><br>`)}),e!="")return A.fire({icon:"error",title:"Something wrong",html:e}),!1;console.log(this.ModuleStore.form),this.ModuleStore.save()},updateCoordinates(e){const{lng:o,lat:d}=e;this.ModuleStore.form.coordinates=o+","+d},load_picklist(){const e=this.$route.params.module;e=="incidents"?(this.ModuleStore.incident_statuses_picklist.length==0&&this.ModuleStore.get_incident_status(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type(),this.ModuleStore.incident_priorities_picklist.length==0&&this.ModuleStore.get_incident_priority()):e=="resources"?(this.ModuleStore.resources_types_picklist.length==0&&this.ModuleStore.get_resources_type(),this.ModuleStore.resources_statuses_picklist.length==0&&this.ModuleStore.get_resources_status(),this.ModuleStore.conditions_picklist.length==0&&this.ModuleStore.get_resources_condition(),this.ModuleStore.dispatchers_picklist.length==0&&this.ModuleStore.get_resources_dispatch()):e=="contacts"?(this.ModuleStore.caller_types_picklist.length==0&&this.ModuleStore.get_caller_types(),this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="agencies"?(this.ModuleStore.municipalities_picklist.length==0&&this.ModuleStore.get_municipalities(),this.ModuleStore.barangays_picklist.length==0&&this.ModuleStore.get_barangay()):e=="responders"?this.ModuleStore.responder_types_picklist.length==0&&this.ModuleStore.get_responder_type():e=="preplans"?(this.ModuleStore.pre_plan_classifications_picklist.length==0&&this.ModuleStore.get_preplan_classification(),this.ModuleStore.incident_types_picklist.length==0&&this.ModuleStore.get_incident_type()):e=="users"&&this.ModuleStore.roles_picklist.length==0&&this.ModuleStore.get_role(),v.assigned_to.length==0&&v.get_assigned_to()}},computed:{fields_computed(){let e;switch(this.$route.params.module){case"incidents":e=T;break;case"resources":e=ee;break;case"contacts":e=I;break;case"agencies":e=$;break;case"responders":e=Z;break;case"preplans":e=X;break;case"call_logs":e=W;break;case"users":e=Q;break}return e},RequiredField(){const e=[];return this.fields_computed.map(o=>{o.fields.map(d=>{d.required&&e.push(d)})}),e},ModuleStore(){const e=this.$route.params.module;let o;switch(e){case"incidents":o=R();break;case"resources":o=J();break;case"contacts":o=Y();break;case"agencies":o=O();break;case"responders":o=K();break;case"preplans":o=j();break;case"call_logs":o=P();break;case"users":o=v;break}return o}}},Me={class:"lg:grid lg:grid-cols-2 gap-12"},Ve={class:"lg:grid gap-x-12",style:{"grid-template-columns":"1fr 1fr"}},xe={key:0},we={class:"fromGroup relative"},Ce={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ue={key:0,class:"text-red-500"},Be={key:1},qe={class:"fromGroup relative"},Ie={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Te={key:0,class:"text-red-500"},Fe={key:2},Re={key:0,class:"fromGroup relative"},Ge={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Ee={key:0,class:"text-red-500"},Le={key:1,class:"fromGroup relative"},Ne={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},ze={key:0,class:"text-red-500"},De={key:3},He={class:"fromGroup relative"},Ae={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},Pe={key:0,class:"text-red-500"},je={key:4},Ke={key:0},Oe={key:1},Ye={key:5},Je={class:"fromGroup relative"},Qe={class:"flex-0 mr-6 break-words ltr:inline-block rtl:block input-label"},We={key:0,class:"text-red-500"};function Xe(e,o,d,M,a,u){const y=m("Breadcrumb"),b=m("Loading"),C=m("Textinput"),E=m("Map"),V=m("Block"),U=m("flat-pickr"),B=m("Select"),L=m("Textarea"),q=m("Switch"),N=m("Button");return l(),s("div",null,[i(y,{mode:"edit"}),i(b,{active:u.ModuleStore.loading,"onUpdate:active":o[0]||(o[0]=p=>u.ModuleStore.loading=p)},null,8,["active"]),u.ModuleStore.loading?c("",!0):(l(),s("form",{key:0,onSubmit:o[1]||(o[1]=_e((...p)=>u.saveForm&&u.saveForm(...p),["prevent"]))},[(l(!0),s(x,null,w(u.fields_computed,(p,z)=>(l(),s("div",{key:z},[p.block_name=="Location Details"?(l(),g(V,{key:0,title:p.block_name},{default:k(()=>[n("div",Me,[n("div",null,[(l(!0),s(x,null,w(p.fields,(t,S)=>(l(),g(C,{isReadonly:t.readonly,class:"mt-4",key:S,modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r,label:t.label,placeholder:`Enter ${t.label}`},null,8,["isReadonly","modelValue","onUpdate:modelValue","label","placeholder"]))),128))]),n("div",null,[i(E,{set_coordinates:a.form.coordinates,onUpdateCoordinate:u.updateCoordinates},null,8,["set_coordinates","onUpdateCoordinate"])])])]),_:2},1032,["title"])):(l(),g(V,{key:1,title:p.block_name},{default:k(()=>[n("div",Ve,[(l(!0),s(x,null,w(p.fields,(t,S)=>(l(),s("div",{key:S,class:f([`custom-grid-${S%2}`,"mt-4"])},[t.type=="time"?(l(),s("div",xe,[n("div",we,[n("label",Ce,[h(_(t.label)+" ",1),t.required?(l(),s("span",Ue,"*")):c("",!0)]),i(U,{modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r,class:"form-control",placeholder:"HH:mm",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i:00",time_24hr:!0,minuteIncrement:1}},null,8,["modelValue","onUpdate:modelValue"])])])):t.type=="date"?(l(),s("div",Be,[n("div",qe,[n("label",Ie,[h(_(t.label)+" ",1),t.required?(l(),s("span",Te,"*")):c("",!0)]),i(U,{modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r,class:"form-control",placeholder:"yyyy-mm-dd",config:{dateFormat:"Y-m-d"}},null,8,["modelValue","onUpdate:modelValue"])])])):t.type=="picklist"?(l(),s("div",Fe,[t.name=="assigned_to_picklist"?(l(),s("div",Re,[n("label",Ge,[h(_(t.label)+" ",1),t.required?(l(),s("span",Ee,"*")):c("",!0)]),i(B,{placeholder:"Select an option",reduce:r=>r.id,options:a.user_store[t.name],modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r},null,8,["reduce","options","modelValue","onUpdate:modelValue"])])):(l(),s("div",Le,[n("label",Ne,[h(_(t.label)+" ",1),t.required?(l(),s("span",ze,"*")):c("",!0)]),i(B,{placeholder:"Select an option",reduce:r=>r.id,options:u.ModuleStore[t.name],modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r},null,8,["reduce","options","modelValue","onUpdate:modelValue"])]))])):t.type=="textarea"?(l(),s("div",De,[n("div",He,[n("label",Ae,[h(_(t.label)+" ",1),t.required?(l(),s("span",Pe,"*")):c("",!0)]),i(L,{placeholder:`Enter ${t.label}`,modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r},null,8,["placeholder","modelValue","onUpdate:modelValue"])])])):t.type=="checkbox"?(l(),s("div",je,[this.$route.params.module=="users"?(l(),s("div",Ke,[i(q,{label:t.label,modelValue:a.form.user_privileges[u.split_name(t.name)],"onUpdate:modelValue":r=>a.form.user_privileges[u.split_name(t.name)]=r,active:a.form.user_privileges[u.split_name(t.name)]==1,class:"mb-5"},null,8,["label","modelValue","onUpdate:modelValue","active"])])):(l(),s("div",Oe,[i(q,{label:t.label,modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r,active:a.form[t.name],class:"mb-5"},null,8,["label","modelValue","onUpdate:modelValue","active"])]))])):(l(),s("div",Ye,[n("div",Je,[n("label",Qe,[h(_(t.label)+" ",1),t.required?(l(),s("span",We,"*")):c("",!0)]),i(C,{isReadonly:t.readonly,type:t.type,name:a.form[t.name],modelValue:a.form[t.name],"onUpdate:modelValue":r=>a.form[t.name]=r,placeholder:`Enter ${t.label}`},null,8,["isReadonly","type","name","modelValue","onUpdate:modelValue","placeholder"])])]))],2))),128))])]),_:2},1032,["title"]))]))),128)),i(V,null,{default:k(()=>[i(N,{class:"w-full bg-emerald-500/100 hover:bg-emerald-600/100",text:a.saveBtn},null,8,["text"])]),_:1})],32))])}const dt=G(ve,[["render",Xe]]);export{dt as default};
